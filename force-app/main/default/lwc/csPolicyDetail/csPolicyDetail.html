<template>
  <div class="content-container">
    <lightning-tabset>
      <lightning-tab label={label.Pol_Policy_Information}>
        <template if:true={policy}>
          <div class="slds-section slds-is-open" name="policy-information-section">
            <h3 class="slds-section__title">
              <button aria-controls="policy-information-content-id" aria-expanded="true"
                class="slds-button slds-section__title-action" onclick={toggleSection}
                data-sectionid="policy-information-section">
                <lightning-icon icon-name="utility:switch" size="x-small"
                  class="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></lightning-icon>
                <span class="slds-truncate" title="Section Title">{label.Pol_Policy_Information}</span>
              </button>
            </h3>
            <!--Policy Information Section Content-->
            <div aria-hidden="false" class="slds-section__content toggle-content" id="policy-information-content-id">
              <div class="slds-p-bottom_medium">
                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Policy_No}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.policyNumber}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Policy_Effective_Date}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <lightning-formatted-date-time 
                              value={policy.effDateInDate}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Product_Name}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.marketingName}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Product_Code}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.productCode}{policy.rateScale}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <template if:true={policy.isElite}>
                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">&nbsp;</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">&nbsp;</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">{label.Pol_Renewal_Segment}</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              {policy.renewalSegment}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">&nbsp;</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">&nbsp;</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">{label.Pol_Actual_Segment}</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              {policy.actualSegment}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">&nbsp;</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">&nbsp;</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">{label.Pol_Internal_Product_Name}</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              {policy.internalProductName}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </template>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{transField.Rate_Scale_Name}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.rateScaleName}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Payment_Mode}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.paymentMode}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Policy_Status}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.policyStatusDisplayName}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{transField.Levy}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <lightning-formatted-number value={policy.nextLevy} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Currency}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.currencyCodeDesc}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Total_Modal_Premium}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <lightning-formatted-number value={payment.modalPremium} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Paid_to_Date}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <lightning-formatted-date-time 
                              value={policy.paidToDateInDate}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{transField.Levy_Total_Modal_Premium_Including_Levy}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <lightning-formatted-number value={payment.totalModalPremiumIncludeLevy} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Broker_Contact_Person}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.broker}>
                              {policy.broker.fullName}
                            </template>
                            <template if:false={policy.broker}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Broker_Company}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.broker}>
                              <template if:true={policy.broker.organization}>
                                {policy.broker.organization.fullName}
                              </template>
                              <template if:false={policy.broker.organization}>
                                &nbsp;
                              </template>
                            </template>
                            <template if:false={policy.broker}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Broker_Code}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.broker}>
                              {policy.broker.brokerAgentCode}
                            </template>
                            <template if:false={policy.broker}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Broker_Contact_No}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.broker}>
                              {policy.broker.businessPhoneNo}
                            </template>
                            <template if:false={policy.broker}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Source_System}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.sourceSystem}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Broker_Name}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.broker}>
                              {policy.broker.fullName}
                            </template>
                            <template if:false={policy.broker}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <template if:true={policy.isILAS}>
                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">{label.ILAS_Application_Date}</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              <lightning-formatted-date-time 
                                value={policy.applicationDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">&nbsp;</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">&nbsp;</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </template>

                <template if:true={policy.isDMB}>
                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">Offer Cash Reward indicator</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              <template if:true={policy.cashRewardInd}>
                                <img src="/img/checkbox_checked.gif" width="21" height="16" id="cash-reward-checked" />
                              </template>
                              <template if:false={policy.cashRewardInd}>
                                <img src="/img/checkbox_unchecked.gif" width="21" height="16" id="cash-reward-unchecked" />
                              </template>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">Offer for Date(of Offer cash reward)</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              <lightning-formatted-date-time 
                                value={policy.cashRewardDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">Type of Diabetes</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              {policy.diabetesTypeCode}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">&nbsp;</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">&nbsp;</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </template>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Hardcopy_Medical_Card_Indicator}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.medCardIndicator}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_SellerName}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {tmName}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Campaign_Code}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {policy.campaignCode}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{transField.Health_Migration}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.isHealthMigration}>
                              Yes
                            </template>
                            <template if:false={policy.isHealthMigration}>
                              No
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{transField.Health_Migration_Cancel_Policy}</span>
                        <div class="slds-form-element__control">
                          <lightning-input type="checkbox" name="cancel-policy" checked={policy.isDisplayTooltip} onchange={handleCancelPolicyChange}></lightning-input>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">&nbsp;</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">&nbsp;</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>

          <!-- retention eligibility section-->
          <template if:true={retentionList}>
            <div class="slds-p-around_medium slds-box">
              <article class="slds-card">
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                      <lightning-icon icon-name="standard:care_request_reviewer" size="small" alternative-text={label.Pol_Retention_Eligibility_title}></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <div class="slds-truncate" title={label.Pol_Retention_Eligibility_title}>
                          <span>{label.Pol_Retention_Eligibility_title}</span>
                        </div>
                      </h2>
                    </div>
                  </header>
                </div>
                <div class="scroll-container">
                  <div class="slds-card__body">
                    <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                      <thead>
                        <tr class="slds-line-height_reset">
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Current_Insured_Age}>{label.Pol_Current_Insured_Age}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Days_Since_Policy}>{label.Pol_Days_Since_Policy}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Total_IP_Claim_Amt}>{label.Pol_Total_IP_Claim_Amt}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Retention_Health_Eligible}>{label.Pol_Retention_Health_Eligible}</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <template for:each={retentionList} for:item="retention" for:index="index">
                          <tr key={retention.currentInsuredAge} class="slds-hint-parent">
                            <th scope="row">
                              <div class="slds-truncate" title={retention.currentInsuredAge}>{retention.currentInsuredAge}</div>
                            </th>
                            <td role="gridcell">
                              <div class="slds-truncate" title={retention.policyDays}>{retention.policyDays}</div>
                            </td>
                            <td scope="row">
                              <div class="slds-truncate" title={retention.totalIpClaimAmt}>{retention.totalIpClaimAmt}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={retention.retentionHealthEligible}>{retention.retentionHealthEligible}</div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </article>
            </div>
          </template>

          <div class="slds-m-around_medium"></div>

          <!-- NCD eligibility section-->
          <template if:true={ncdList}>
            <div class="slds-p-around_medium slds-box">
              <article class="slds-card">
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                      <lightning-icon icon-name="standard:device" size="small" alternative-text={label.Pol_NCD_Eligibility}></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <div class="slds-truncate" title={label.Pol_NCD_Eligibility}>
                          <span>{label.Pol_NCD_Eligibility}</span>
                        </div>
                      </h2>
                    </div>
                  </header>
                </div>
                <div class="scroll-container">
                  <div class="slds-card__body">
                    <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                      <thead>
                        <tr class="slds-line-height_reset">
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_NCD_Eligibility}>{label.Pol_NCD_Eligibility}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_NCD_Percentage}>{label.Pol_NCD_Percentage}</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <template for:each={ncdList} for:item="ncd" for:index="index">
                          <tr key={ncd.ncdPercentage} class="slds-hint-parent">
                            <th scope="row">
                              <div class="slds-truncate" title={ncd.ncdInd}>{ncd.ncdInd}</div>
                            </th>
                            <td role="gridcell">
                              <div class="slds-truncate" title={ncd.ncdPercentage}>{ncd.ncdPercentage}</div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </article>
            </div>
          </template>

          <div class="slds-m-around_medium"></div>

          <!-- exclusion section -->
          <template if:true={exclusionList}>
            <div class="slds-p-around_medium slds-box">
              <article class="slds-card">
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                      <lightning-icon icon-name="standard:digital_verification_config" size="small" alternative-text={label.Pol_Exclusion_Coverage_Level}></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <div class="slds-truncate" title={label.Pol_Exclusion_Coverage_Level}>
                          <span>{label.Pol_Exclusion_Coverage_Level}</span>
                        </div>
                      </h2>
                    </div>
                  </header>
                </div>
                <div class="scroll-container">
                  <div class="slds-card__body">
                    <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                      <thead>
                        <tr class="slds-line-height_reset">
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Exclusion Sequence No">Exclusion Sequence No</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Plan Code">Plan Code</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Exclusion Code">Exclusion Code</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Exclusion Description">Exclusion Description</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <template for:each={exclusionList} for:item="exclusion" for:index="index">
                          <tr key={exclusion.exclusionSequenceNo} class="slds-hint-parent">
                            <th scope="row">
                              <div class="slds-truncate" title={exclusion.ExclusionSeqNo}>{exclusion.ExclusionSeqNo}</div>
                            </th>
                            <td role="gridcell">
                              <div class="slds-truncate" title={exclusion.planCode}>{exclusion.planCode}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={exclusion.ExclusionCode}>{exclusion.ExclusionCode}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={exclusion.ExclusionDesc}>{exclusion.ExclusionDesc}</div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </article>
            </div>
          </template>

          <div class="slds-m-around_medium"></div>

          <!-- loading section -->
          <template if:true={loadingList}>
            <div class="slds-p-around_medium slds-box">
              <article class="slds-card">
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                      <lightning-icon icon-name="standard:currency" size="small" alternative-text={label.Pol_Loading_Coverage_Level}></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <div class="slds-truncate" title={label.Pol_Loading_Coverage_Level}>
                          <span>{label.Pol_Loading_Coverage_Level}</span>
                        </div>
                      </h2>
                    </div>
                  </header>
                </div>
                <div class="scroll-container">
                  <div class="slds-card__body">
                    <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                      <thead>
                        <tr class="slds-line-height_reset">
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Loading Amount">Loading Amount</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Loading Percentage">Loading Percentage</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Loading Amount Duration">Loading Amount Duration</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Loading Percentage Duration">Loading Percentage Duration</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <template for:each={loadingList} for:item="loading" for:index="index">
                          <tr key={loading.loadingAmount} class="slds-hint-parent">
                            <th scope="row">
                              <div class="slds-truncate" title={loading.loadingAmount}>{loading.loadingAmount}</div>
                            </th>
                            <td role="gridcell">
                              <div class="slds-truncate" title={loading.loadingPercentageStr}>{loading.loadingPercentageStr}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={loading.loadingAmountDuration}>{loading.loadingAmountDuration}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={loading.loadingPercentageDuration}>{loading.loadingPercentageDuration}</div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </article>
            </div>
          </template>
          
          <div class="slds-m-around_medium"></div>

          <!-- policy holder information section -->
          <div class="slds-section slds-is-open" name="policy-holder-information-section">
            <h3 class="slds-section__title">
              <button aria-controls="Policy-Holder-Information-Content-id" aria-expanded="true"
                class="slds-button slds-section__title-action" onclick={toggleSection}
                data-sectionid="policy-holder-information-section">
                <lightning-icon icon-name="utility:switch" size="x-small"
                  class="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></lightning-icon>
                <span class="slds-truncate" title="Section Title">{label.Pol_Policy_holder_Information}</span>
              </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content toggle-content" id="Policy-Holder-Information-Content-id">
              <div class="slds-p-bottom_medium">
                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Policy_Holder}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              {policy.holder.fullName}
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">&nbsp;</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">&nbsp;</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">Asia Miles Membership No.</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              <template if:true={policy.holder.membership}>
                                {policy.holder.membership.membershipId}
                              </template>
                              <template if:false={policy.holder.membership}>
                                &nbsp;
                              </template>
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">Asia Miles Membership Name</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              <template if:true={policy.holder.membership}>
                                {policy.holder.membership.membershipFirstName} {policy.holder.membership.membershipLastName}
                              </template>
                              <template if:false={policy.holder.membership}>
                                &nbsp;
                              </template>
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Gender}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {holder.gender}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Date_of_Birth}(Age)</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <lightning-formatted-date-time 
                              value={holder.birthDateInDate}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Policyholder_ID_Passport_No}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:false={policy.wfh}>{holder.ssnNumber}</template>
                            <template if:true={policy.wfh}>{holder.ssnNumberMasked}</template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">&nbsp;</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">&nbsp;</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <template if:true={isILAS}>
                  <div class="slds-grid slds-gutters">
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">{label.ILAS_RPQ_Status}</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              {holder.rPQStatus}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="slds-col slds-size_1-of-2">
                      <div class="slds-form__item">
                        <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                          <span class="slds-form-element__label">{label.ILAS_RPQ_Effective_Date}</span>
                          <div class="slds-form-element__control">
                            <div class="slds-form-element__static">
                              <lightning-formatted-date-time 
                                value={holder.rPQEffectiveDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </template>

              </div>
            </div>
          </div>

          <!-- contact information section -->
          <div class="slds-section slds-is-open" name="contact-information-section">
            <h3 class="slds-section__title">
              <button aria-controls="Contact-Information-Content-id" aria-expanded="true"
                class="slds-button slds-section__title-action" onclick={toggleSection}
                data-sectionid="contact-information-section">
                <lightning-icon icon-name="utility:switch" size="x-small"
                  class="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></lightning-icon>
                <span class="slds-truncate" title="Section Title">{label.Pol_Contact_Information}</span>
              </button>
            </h3>
            <div aria-hidden="false" class="slds-section__content toggle-content" id="Contact-Information-Content-id">
              <div class="slds-p-bottom_medium">
                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Mobile}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              <template if:false={policy.wfh}>{policy.holder.mobileCountryCode} {policy.holder.mobilePhoneNo}</template>
                              <template if:true={policy.wfh}>{policy.holder.mobileCountryCode} {policy.holder.mobilePhoneNoMasked}</template>
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Home_Phone}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              <template if:false={policy.wfh}>{policy.holder.homePhoneCountryCode} {policy.holder.homePhoneNo}</template>
                              <template if:true={policy.wfh}>{policy.holder.homePhoneCountryCode} {policy.holder.homePhoneNoMasked}</template>
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Business_Phone}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              <template if:false={policy.wfh}>{policy.holder.businessPhoneCountryCode} {policy.holder.businessPhoneNo}</template>
                              <template if:true={policy.wfh}>{policy.holder.businessPhoneCountryCode} {policy.holder.businessPhoneNoMasked}</template>
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Home_Fax}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              {policy.holder.homeFaxNo}
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Business_Fax}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              {policy.holder.businessFaxNo}
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Other_Phone}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              {policy.holder.otherPhoneNo}
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.CS_Correspondence_Phone}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              {policy.holder.correspondencePhoneNo}
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Email}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center">
                            <div class="slds-form-element__static">
                              {holder.emailAddress}
                            </div>
                            <div class="slds-no-flex">
                              <lightning-button label="Resend Welcome Email" onclick={handleResendWelcomeEmail} size="small"></lightning-button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="slds-grid slds-gutters">
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Pol_Correspondence_Address}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            <template if:true={policy.holder}>
                              <template if:false={policy.wfh}>{policy.holder.fullAddress}</template>
                              <template if:true={policy.wfh}>{policy.holder.fullAddressMasked}</template>
                            </template>
                            <template if:false={policy.holder}>
                              &nbsp;
                            </template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_1-of-2">
                    <div class="slds-form__item">
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">&nbsp;</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">&nbsp;</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
          
          <!-- insured list section -->
          <template if:true={insuredList}>
            <div class="slds-p-around_medium slds-box">
              <article class="slds-card">
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                      <lightning-icon icon-name="standard:user" size="small" alternative-text={label.Pol_Person_s_Insured}></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <div class="slds-truncate" title={label.Pol_Person_s_Insured}>
                          <span>{label.Pol_Person_s_Insured}</span>
                        </div>
                      </h2>
                    </div>
                  </header>
                </div>
                <div class="scroll-container">
                  <div class="slds-card__body">
                    <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                      <thead>
                        <tr class="slds-line-height_reset">
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Person_Insured}>{label.Pol_Person_Insured}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Gender}>{label.Pol_Gender}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Date_of_Birth}>{label.Pol_Date_of_Birth}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Person_Insured_ID_Passport_No}>{label.Pol_Person_Insured_ID_Passport_No}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Asia Miles Membership No.">Asia Miles Membership No.</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="Asia Miles Membership Name">Asia Miles Membership Name</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <template for:each={insuredList} for:item="insured" for:index="index">
                          <tr key={insured.ssnNumber} class="slds-hint-parent">
                            <th scope="row">
                              <div class="slds-truncate" title={insured.fullName}>{insured.fullName}</div>
                            </th>
                            <td role="gridcell">
                              <div class="slds-truncate" title={insured.gender}>{insured.gender}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={insured.birthDateInDate}>
                                <lightning-formatted-date-time 
                                  value={insured.birthDateInDate}
                                  time-zone="Asia/Hong_Kong"
                                  year="numeric"
                                  month="2-digit"
                                  day="2-digit">
                                </lightning-formatted-date-time>
                              </div>
                            </td>
                            <td role="gridcell">
                              <template if:false={policy.wfh}>
                                <div class="slds-truncate" title={insured.ssnNumber}>{insured.ssnNumber}</div>
                              </template>
                              <template if:true={policy.wfh}>
                                <div class="slds-truncate" title={insured.ssnNumberMasked}>{insured.ssnNumberMasked}</div>
                              </template>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate">
                                <template if:true={insured.membership}>
                                  {insured.membership.membershipId}
                                </template>
                                <template if:false={insured.membership}>
                                  &nbsp;
                                </template>
                              </div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate">
                                <template if:true={insured.membership}>
                                  {insured.membership.membershipFirstName} {insured.membership.membershipLastName}
                                </template>
                                <template if:false={insured.membership}>
                                  &nbsp;
                                </template>
                              </div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </article>
            </div>
          </template>

          <div class="slds-m-around_medium"></div>

          <!-- beneficiary list section -->
          <template if:true={beneficiaryList}>
            <div class="slds-p-around_medium slds-box">
              <article class="slds-card">
                <div class="slds-card__header slds-grid">
                  <header class="slds-media slds-media_center slds-has-flexi-truncate">
                    <div class="slds-media__figure">
                      <lightning-icon icon-name="standard:opportunity_contact_role" size="small" alternative-text={label.Pol_Beneficiary_List}></lightning-icon>
                    </div>
                    <div class="slds-media__body">
                      <h2 class="slds-card__header-title">
                        <div class="slds-truncate" title={label.Pol_Beneficiary_List}>
                          <span>{label.Pol_Beneficiary_List}</span>
                        </div>
                      </h2>
                    </div>
                  </header>
                </div>
                <div class="scroll-container">
                  <div class="slds-card__body">
                    <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                      <thead>
                        <tr class="slds-line-height_reset">
                          <th class="" scope="col">
                            <div class="slds-truncate" title="#">#</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title={label.Pol_Beneficiary}>{label.Pol_Beneficiary}</div>
                          </th>
                          <th class="" scope="col">
                            <div class="slds-truncate" title="SSN ID">SSN ID</div>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <template for:each={beneficiaryList} for:item="beneficiary" for:index="index">
                          <tr key={beneficiary.ssnNumber} class="slds-hint-parent">
                            <th scope="row">
                              <div class="slds-truncate" title={beneficiary.displayIndex}>{beneficiary.displayIndex}</div>
                            </th>
                            <td role="gridcell">
                              <div class="slds-truncate" title={beneficiary.fullName}>{beneficiary.fullName}</div>
                            </td>
                            <td role="gridcell">
                              <div class="slds-truncate" title={beneficiary.ssnNumber}>
                                <template if:false={wfh}>{beneficiary.ssnNumber}</template>
                                <template if:true={wfh}>{beneficiary.ssnNumberMasked}</template>
                              </div>
                            </td>
                          </tr>
                        </template>
                      </tbody>
                    </table>
                  </div>
                </div>
              </article>
            </div>
          </template>
        </template>
      </lightning-tab>

      <lightning-tab label="Payment Information">
        <!-- payment information section-->
        <div class="slds-section slds-is-open" name="payment-information-section">
          <h3 class="slds-section__title">
            <button aria-controls="Payment-Information-Content-id" aria-expanded="true"
              class="slds-button slds-section__title-action" onclick={toggleSection}
              data-sectionid="payment-information-section">
              <lightning-icon icon-name="utility:switch" size="x-small"
                class="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></lightning-icon>
              <span class="slds-truncate" title="Section Title">{label.Pol_Payment_Information}</span>
            </button>
          </h3>
          <div aria-hidden="false" class="slds-section__content toggle-content" id="Payment-Information-Content-id">
            <div class="slds-p-bottom_medium">
              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Payment_Mode}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {policy.paymentMode}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Total_Modal_Premium}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <lightning-formatted-number value={payment.modalPremium} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{transField.Levy_Total_Modal_Premium_Including_Levy}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <lightning-formatted-number value={payment.totalModalPremiumIncludeLevy} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{transField.Levy}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <lightning-formatted-number value={policy.nextLevy} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Account_No}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.accountNumber}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Payment_Method}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.paymentMethod}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Debit_Day}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.polDebitDayDisplay}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Card_Type}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.CardType}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Credit_Card_Expiry_Date}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <lightning-formatted-date-time 
                            value={payment.creditCardExpDateInDate}
                            time-zone="Asia/Hong_Kong"
                            year="numeric"
                            month="2-digit"
                            day="2-digit">
                          </lightning-formatted-date-time>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Payor_ID}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <template if:false={policy.wfh}>
                            {payment.CardHolderID}
                          </template>
                          <template if:true={policy.wfh}>
                            {payment.CardHolderIDMasked}
                          </template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Payor}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.fullName}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Autopay_limit}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.AutopayLimit}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Latest_Autopay_Reject_Date_And_Reason}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {payment.LatestAutopayRejectDateandReason}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_Start_Date_of_Automatic_Premium_Payment}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <template if:true={payment.startDateofAutomaticPremiumPaymentInDate}>
                            <lightning-formatted-date-time 
                              value={payment.startDateofAutomaticPremiumPaymentInDate}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </template>
                          <template if:false={payment.startDateofAutomaticPremiumPaymentInDate}>
                            N/A
                          </template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-p-horizontal_small">
                    <div class="slds-form-element" style="margin-left: 5px;">
                      <lightning-input 
                        label={label.Account_No_Masked_Part}
                        value={payment.accountMaskedNumber}
                        maxlength="8"
                        onchange={handleAccNoChange}
                        data-field="accountMaskedNumber">
                      </lightning-input>
                      <template if:true={invalidString}>
                        <div class="slds-form-element__static slds-text-color_error" style="font-size:12px;">
                          {label.Only_Numeric_Input_Is_Allowed}
                        </div>
                      </template>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <template if:true={displayResult}>
                      <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                        <span class="slds-form-element__label">{label.Credit_Card_Number_Validation_Result}</span>
                        <div class="slds-form-element__control">
                          <div class="slds-form-element__static">
                            {validationResult}
                          </div>
                        </div>
                      </div>
                    </template>
                    <template if:false={displayResult}>
                      <span class="slds-form-element__label">&nbsp;</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">&nbsp;</div>
                      </div>
                    </template>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{label.Pol_End_Date_of_Automatic_Premium_Payment}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <template if:true={payment.endDateofAutomaticPremiumPaymentInDate}>
                            <lightning-formatted-date-time 
                              value={payment.endDateofAutomaticPremiumPaymentInDate}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </template>
                          <template if:false={payment.endDateofAutomaticPremiumPaymentInDate}>
                            N/A
                          </template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{transField.Total_Coupon_Used_Amount}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          <template if:true={payment.couponUsedAmt}>
                            <lightning-formatted-number value={payment.couponUsedAmt} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </template>
                          <template if:false={payment.couponUsedAmt}>
                            &nbsp;
                          </template>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- billing list section -->
        <template if:true={billingList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:contract_payment" size="small" alternative-text={label.Pol_Transaction_History}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Transaction_History}>
                        <span>{label.Pol_Transaction_History}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Transaction_Date}>{label.Pol_Transaction_Date}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Description}>{label.Pol_Description}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Bill_Amount}>{label.Pol_Bill_Amount}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Bill_Date}>{label.Pol_Bill_Date}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Billing_Start_Date}>{label.Pol_Billing_Start_Date}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={transField.Levy_Outstanding_Levy_Indicator}>{transField.Levy_Outstanding_Levy_Indicator}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Period}>{label.Pol_Period}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Status}>{label.Pol_Status}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Autopay_Premium_Reject_Reason}>{label.Pol_Autopay_Premium_Reject_Reason}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Paid_Date}>{label.Pol_Paid_Date}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Currency}>{label.Pol_Currency}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Collector}>{label.Pol_Collector}</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={billingList} for:item="billing" for:index="index">
                        <tr key={billing.displayIndex} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={billing.finActivityDateInDate}>
                              <lightning-formatted-date-time 
                                value={billing.finActivityDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.description}>{billing.description}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate slds-text-align_right" title={billing.formattedAmount}>
                              {billing.formattedAmount}
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.finActivityDateInDate}>
                              <lightning-formatted-date-time 
                                value={billing.finActivityDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.BillingStartDate}>
                              <lightning-formatted-date-time 
                                value={billing.BillingStartDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.outstandingLevyIndicator}>{billing.outstandingLevyIndicator}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.Period}>{billing.Period}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.Status}>{billing.Status}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.rejCodeDesc}>{billing.rejCodeDesc}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.PayDate}>
                              <lightning-formatted-date-time 
                                value={billing.PayDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.currencyTypeDesc}>{billing.currencyTypeDesc}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={billing.Collector}>{billing.Collector}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
              <footer class="slds-card__footer slds-p-bottom_none">
                <c-custom-pagination 
                  current-page={billingCurrentPage}
                  total-records={billingTotalRecords}
                  page-size={generalPageSize}
                  show-page-info="true"
                  show-page-numbers="true"
                  max-page-numbers="20"
                  onpagechange={handleBillingPageChange}>
                </c-custom-pagination>
              </footer>
            </article>
          </div>
        </template>
        
        <div class="slds-m-around_medium"></div>

        <!-- NCD eligibility section-->
        <template if:true={ncdList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:device" size="small" alternative-text={label.Pol_NCD_Eligibility}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_NCD_Eligibility}>
                        <span>{label.Pol_NCD_Eligibility}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_NCD_Eligibility}>{label.Pol_NCD_Eligibility}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_NCD_Percentage}>{label.Pol_NCD_Percentage}</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={ncdList} for:item="ncd" for:index="index">
                        <tr key={ncd.ncdPercentage} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={ncd.ncdInd}>{ncd.ncdInd}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={ncd.ncdPercentage}>{ncd.ncdPercentage}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>
        
        <!-- exclusion section -->
        <template if:true={exclusionList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:digital_verification_config" size="small" alternative-text={label.Pol_Exclusion_Coverage_Level}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Exclusion_Coverage_Level}>
                        <span>{label.Pol_Exclusion_Coverage_Level}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Sequence No">Exclusion Sequence No</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Plan Code">Plan Code</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Code">Exclusion Code</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Description">Exclusion Description</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={exclusionList} for:item="exclusion" for:index="index">
                        <tr key={exclusion.exclusionSequenceNo} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={exclusion.ExclusionSeqNo}>{exclusion.ExclusionSeqNo}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.planCode}>{exclusion.planCode}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.ExclusionCode}>{exclusion.ExclusionCode}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.ExclusionDesc}>{exclusion.ExclusionDesc}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>

        <!-- loading section -->
        <template if:true={loadingList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:currency" size="small" alternative-text={label.Pol_Loading_Coverage_Level}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Loading_Coverage_Level}>
                        <span>{label.Pol_Loading_Coverage_Level}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Amount">Loading Amount</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Percentage">Loading Percentage</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Amount Duration">Loading Amount Duration</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Percentage Duration">Loading Percentage Duration</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={loadingList} for:item="loading" for:index="index">
                        <tr key={loading.loadingAmount} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={loading.loadingAmount}>{loading.loadingAmount}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingPercentageStr}>{loading.loadingPercentageStr}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingAmountDuration}>{loading.loadingAmountDuration}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingPercentageDuration}>{loading.loadingPercentageDuration}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>
        
        <div class="slds-m-around_medium"></div>

        <!-- discount offered section -->
        <template if:true={discountList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:discounts" size="small" alternative-text={label.Pol_Discount_Offered}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Discount_Offered}>
                        <span>{label.Pol_Discount_Offered}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Discount">Discount</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Discount Duration">Discount Duration</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Discount Percentage">Discount Percentage</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={discountList} for:item="discount" for:index="index">
                        <tr key={discount.description} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={discount.description}>{discount.description}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={discount.discountDuration}>{discount.discountDuration}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={discount.discountPercentage}>{discount.discountPercentage}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>

        <!-- coupon section -->
        <template if:true={couponList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:coupon_codes" size="small" alternative-text="Coupon"></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title="Coupon">
                        <span>Coupon</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Coupon Number">Coupon Number</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Coupon Amount">Coupon Amount</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={couponList} for:item="coupon" for:index="index">
                        <tr key={coupon.sojectCoupon.Coupon_Number__c} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={coupon.sojectCoupon.Coupon_Number__c}>{coupon.sojectCoupon.Coupon_Number__c}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={coupon.sojectCoupon.Coupon_Amount__c}>{coupon.sojectCoupon.Coupon_Amount__c}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>
      </lightning-tab>

      <lightning-tab label="Policy Document">
        <!-- Policy document -->
        <template if:true={docYearList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:document_reference" size="small" alternative-text={label.Pol_Policy_Documents}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Policy_Documents}>
                        <span>{label.Pol_Policy_Documents}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <!-- policy document year filter -->
              <div class="slds-size_1-of-5 slds-align_left">              
                <lightning-select
                name="policy-document-year-filter"
                label="Year"
                value={docYear}
                options={docYearList}
                onchange={handleDocYearChange}></lightning-select>
              </div>
              <!-- policy document list -->
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                    <tr class="slds-line-height_reset">
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Document Name">Document Name</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Date">Date</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Action">Action</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Doc Hidden Date">Doc Hidden Date</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Doc Hidden By">Doc Hidden By</div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <template for:each={docList} for:item="doc" for:index="index">
                      <tr key={doc.attachmentKey} class="slds-hint-parent">
                        <th scope="row">
                          <div class="slds-truncate clickable-text" title={doc.description} onclick={handleViewDoc} data-doc-key={doc.attachmentKey}>{doc.description}</div>
                        </th>
                        <td role="gridcell">
                          <div class="slds-truncate" title={doc.createdDateStrDisp}>{doc.createdDateStrDisp}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate">
                            <template if:true={doc.isHidden}>
                              <button type="button" onclick={handleToggleDoc} data-doc-key={doc.attachmentKey} data-doc-type="PolicyDoc">Hide</button>
                            </template>
                            <template if:false={doc.isHidden}>
                              <button type="button" onclick={handleToggleDoc} data-doc-key={doc.attachmentKey} data-doc-type="PolicyDoc">Show</button>
                            </template>
                          </div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={doc.hiddenDateStr}>{doc.hiddenDateStr}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={doc.hiddenBy}>{doc.hiddenBy}</div>
                        </td>
                      </tr>
                    </template>
                  </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>
        
        <!-- exclusion section -->
        <template if:true={exclusionList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:digital_verification_config" size="small" alternative-text={label.Pol_Exclusion_Coverage_Level}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Exclusion_Coverage_Level}>
                        <span>{label.Pol_Exclusion_Coverage_Level}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Sequence No">Exclusion Sequence No</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Plan Code">Plan Code</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Code">Exclusion Code</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Description">Exclusion Description</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={exclusionList} for:item="exclusion" for:index="index">
                        <tr key={exclusion.exclusionSequenceNo} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={exclusion.ExclusionSeqNo}>{exclusion.ExclusionSeqNo}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.planCode}>{exclusion.planCode}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.ExclusionCode}>{exclusion.ExclusionCode}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.ExclusionDesc}>{exclusion.ExclusionDesc}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>

        <!-- loading section -->
        <template if:true={loadingList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:currency" size="small" alternative-text={label.Pol_Loading_Coverage_Level}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Loading_Coverage_Level}>
                        <span>{label.Pol_Loading_Coverage_Level}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Amount">Loading Amount</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Percentage">Loading Percentage</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Amount Duration">Loading Amount Duration</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Percentage Duration">Loading Percentage Duration</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={loadingList} for:item="loading" for:index="index">
                        <tr key={loading.loadingAmount} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={loading.loadingAmount}>{loading.loadingAmount}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingPercentageStr}>{loading.loadingPercentageStr}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingAmountDuration}>{loading.loadingAmountDuration}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingPercentageDuration}>{loading.loadingPercentageDuration}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>

        <!-- Policy correspondence -->
        <template if:true={corDocYearList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:email_chatter" size="small" alternative-text={label.efulfillment_policy_correspondences}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.efulfillment_policy_correspondences}>
                        <span>{label.efulfillment_policy_correspondences}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <!-- policy correspondence year filter -->
              <div class="slds-size_1-of-5 slds-align_left">              
                <lightning-select
                name="policy-correspondence-year-filter"
                label="Year"
                value={corDocYear}
                options={corDocYearList}
                onchange={handleCorDocYearChange}></lightning-select>
              </div>
              <!-- policy correspondence list -->
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                    <tr class="slds-line-height_reset">
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Document Name">Document Name</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Date">Date</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Action">Action</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Doc Hidden Date">Doc Hidden Date</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title="Doc Hidden By">Doc Hidden By</div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <template for:each={corDocList} for:item="corDoc" for:index="index">
                      <tr key={corDoc.attachmentKey} class="slds-hint-parent">
                        <th scope="row">
                          <div class="slds-truncate clickable-text" title={corDoc.description} onclick={handleViewDoc} data-doc-key={corDoc.attachmentKey}>{corDoc.description}</div>
                        </th>
                        <td role="gridcell">
                          <div class="slds-truncate" title={corDoc.createdDateStrDisp}>{corDoc.createdDateStrDisp}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={corDoc.status}>
                            <template if:true={corDoc.isHidden}>
                              <button type="button" onclick={handleToggleDoc} data-doc-key={corDoc.attachmentKey} data-doc-type="PolicyCorDoc">Hide</button>
                            </template>
                            <template if:false={corDoc.isHidden}>
                              <button type="button" onclick={handleToggleDoc} data-doc-key={corDoc.attachmentKey} data-doc-type="PolicyCorDoc">Show</button>
                            </template>
                          </div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={corDoc.hiddenDateStr}>{corDoc.hiddenDateStr}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={corDoc.hiddenBy}>{corDoc.hiddenBy}</div>
                        </td>
                      </tr>
                    </template>
                  </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <!-- manual letter section -->
        <template if:true={isCS}>
          <div class="slds-m-around_medium"></div>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:logging" size="small" alternative-text="Manual letter(Not available in MyCigna)"></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title="Manual letter(Not available in MyCigna)">
                        <span>Manual letter(Not available in MyCigna)</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="slds-card__body">
                <div class="slds-m-around_medium">
                  <c-up-load-file record-id={customerAccountId} policy-number={policyNo}></c-up-load-file>
                </div>
              </div>
            </article>
          </div>
        </template>
      </lightning-tab>

      <lightning-tab label={label.Pol_Coverage_Information}>
        <!-- Policy coverage -->
        <template if:true={coverageList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:policy" size="small" alternative-text={label.Pol_Coverage_Information}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Coverage_Information}>
                        <span>{label.Pol_Coverage_Information}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <!-- policy coverage list -->
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                    <tr class="slds-line-height_reset">
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Benefit}>{label.Pol_Benefit}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Sum_Insured}>{label.Pol_Sum_Insured}</div>
                      </th>
                      <!-- START HKITSFDC-416 -->
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Remaining_Sum_Insured}>{label.Pol_Remaining_Sum_Insured}</div>
                      </th>
                      <!-- END HKITSFDC-416 -->
                      <template if:true={showDeductible}>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Deductible_Amount}>{label.Pol_Deductible_Amount}</div>
                        </th>
                      </template>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Effective_Date}>{label.Pol_Effective_Date}</div>
                      </th>
                      <template if:true={showAFCcolumns}>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Additional_Fund_Contribution_Amount}>{label.Pol_Additional_Fund_Contribution_Amount}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Additional_Fund_Contribution_Annual_Amount}>{label.Pol_Additional_Fund_Contribution_Annual_Amount}</div>
                        </th>
                      </template>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Person_Insured}>{label.Pol_Person_Insured}</div>
                      </th>
                      <!-- START HKITSFDC-416 -->
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Coverage_Period}>{label.Pol_Coverage_Period}</div>
                      </th>
                      <!-- END HKITSFDC-416 -->
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Maturity_Expiry_Date}>{label.Pol_Maturity_Expiry_Date}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Benefit_Status}>{label.Pol_Benefit_Status}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Pol_Face_Amount}>{label.Pol_Face_Amount}</div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <template for:each={coverageList} for:item="coverage" for:index="index">
                      <tr key={coverage.benefitCode} class="slds-hint-parent">
                        <th scope="row">
                          <div class="slds-truncate" title={coverage.benefitMarketingName}>{coverage.benefitMarketingName}</div>
                        </th>
                        <td role="gridcell">
                          <div class="slds-truncate" title={coverage.benefitAmountInNumber}>
                            <lightning-formatted-number value={coverage.benefitAmountInNumber} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </div>
                        </td>
                      <!-- START HKITSFDC-416 -->
                      <td role="gridcell">
                        <template if:true={showCIcolumns}>
                          <div class="slds-truncate" title={coverage.RemainSumInsured}>
                            <lightning-formatted-number value={coverage.RemainSumInsured} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </div>
                        </template>
                        <template if:false={showCIcolumns}>
                          <div class="slds-truncate">N/A</div>
                        </template>
                      </td>
                      <!-- END HKITSFDC-416 -->
                        <template if:true={showDeductible}>
                          <td role="gridcell">
                            <div class="slds-truncate slds-text-align_right" title={coverage.deductibleAmount}>
                              <lightning-formatted-number value={coverage.deductibleAmount} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                            </div>
                          </td>
                        </template>
                        <td role="gridcell">
                          <div class="slds-truncate" title={coverage.effectiveDateInDate}>
                            <lightning-formatted-date-time 
                              value={coverage.effectiveDateInDate}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </div>
                        </td>
                        <template if:true={showAFCcolumns}>
                          <td role="gridcell">
                            <template if:true={coverage.isAFCR}>
                              <div class="slds-truncate" title={coverage.additionalFundContributionAmount}>
                                <lightning-formatted-number value={coverage.additionalFundContributionAmount} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                              </div>
                            </template>
                            <template if:true={coverage.isAFCS}>
                              <div class="slds-truncate" title="N/A">
                                N/A
                              </div>
                            </template>
                          </td>
                          <td role="gridcell">
                            <template if:true={coverage.isAFCR}>
                              <div class="slds-truncate" title={coverage.additionalFundContributionAnnualAmountInNumber}>
                                <lightning-formatted-number value={coverage.additionalFundContributionAnnualAmountInNumber} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                              </div>
                            </template>
                            <template if:true={coverage.isAFCS}>
                              <div class="slds-truncate" title="N/A">
                                N/A
                              </div>
                            </template>
                          </td>
                        </template>
                        <td role="gridcell">
                          <div class="slds-truncate" title={coverage.insuredName}>{coverage.insuredName}</div>
                        </td>
                        <!-- START HKITSFDC-416 -->
                        <td role="gridcell">
                          <template if:true={showCIcolumns}>
                            <template if:false={showCoverage}>
                              <template if:true={coverage.CoveragePeriodFromInDate}>
                                <template if:true={coverage.CoveragePeriodToInDate}>
                                  <div class="slds-truncate" title={coveragePeriodTitle}>
                                    <lightning-formatted-date-time 
                                      value={coverage.CoveragePeriodFromInDate}
                                      time-zone="Asia/Hong_Kong"
                                      year="numeric"
                                      month="2-digit"
                                      day="2-digit">
                                    </lightning-formatted-date-time>
                                    &nbsp;{label.Pol_to}&nbsp;
                                    <lightning-formatted-date-time 
                                      value={coverage.CoveragePeriodToInDate}
                                      time-zone="Asia/Hong_Kong"
                                      year="numeric"
                                      month="2-digit"
                                      day="2-digit">
                                    </lightning-formatted-date-time>
                                  </div>
                                </template>
                              </template>
                            </template>
                          </template>

                          <template if:false={showCIcolumns}>
                            <div class="slds-truncate">N/A</div>
                          </template>

                          <template if:true={showCIcolumns}>
                            <template if:true={showCoverage}>
                              <div class="slds-truncate">N/A</div>
                            </template>
                          </template>

                        </td>
                        <!-- END HKITSFDC-416 -->
                        <td role="gridcell">
                          <template if:true={coverage.maturityExpiryDateInDate}>
                            <div class="slds-truncate" title={coverage.maturityExpiryDateInDate}>
                              <lightning-formatted-date-time 
                                value={coverage.maturityExpiryDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </template>
                          <template if:false={coverage.maturityExpiryDateInDate}>
                            <div class="slds-truncate" title="N/A">
                              N/A
                            </div>
                          </template>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={coverage.coverageStatus}>{coverage.coverageStatus}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={coverage.faceAmt}>
                            <lightning-formatted-number value={coverage.faceAmt} format-style="currency" currency-code={policy.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                          </div>
                        </td>
                      </tr>
                    </template>
                  </tbody>
                  </table>
                </div>
              </div>
              <footer class="slds-card__footer slds-p-bottom_none">
                <c-custom-pagination 
                  current-page={coverageCurrentPage}
                  total-records={coverageTotalRecords}
                  page-size={generalPageSize}
                  show-page-info="true"
                  show-page-numbers="true"
                  max-page-numbers="20"
                  onpagechange={handleCoveragePageChange}>
                </c-custom-pagination>
              </footer>
            </article>
          </div>
        </template>
        
        <div class="slds-m-around_medium"></div>
        
        <!-- exclusion section -->
        <template if:true={exclusionList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:digital_verification_config" size="small" alternative-text={label.Pol_Exclusion_Coverage_Level}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Exclusion_Coverage_Level}>
                        <span>{label.Pol_Exclusion_Coverage_Level}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Sequence No">Exclusion Sequence No</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Plan Code">Plan Code</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Code">Exclusion Code</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Exclusion Description">Exclusion Description</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={exclusionList} for:item="exclusion" for:index="index">
                        <tr key={exclusion.exclusionSequenceNo} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={exclusion.ExclusionSeqNo}>{exclusion.ExclusionSeqNo}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.planCode}>{exclusion.planCode}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.ExclusionCode}>{exclusion.ExclusionCode}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={exclusion.ExclusionDesc}>{exclusion.ExclusionDesc}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>

        <!-- loading section -->
        <template if:true={loadingList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:currency" size="small" alternative-text={label.Pol_Loading_Coverage_Level}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Loading_Coverage_Level}>
                        <span>{label.Pol_Loading_Coverage_Level}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Amount">Loading Amount</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Percentage">Loading Percentage</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Amount Duration">Loading Amount Duration</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title="Loading Percentage Duration">Loading Percentage Duration</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={loadingList} for:item="loading" for:index="index">
                        <tr key={loading.loadingAmount} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={loading.loadingAmount}>{loading.loadingAmount}</div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingPercentageStr}>{loading.loadingPercentageStr}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingAmountDuration}>{loading.loadingAmountDuration}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={loading.loadingPercentageDuration}>{loading.loadingPercentageDuration}</div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
            </article>
          </div>
        </template>
      </lightning-tab>

      <lightning-tab label={label.Pol_Claim_History}>
        <!-- claim payment information section-->
        <div class="slds-section slds-is-open" name="claim-payment-information-section">
          <h3 class="slds-section__title">
            <button aria-controls="Claim-Payment-Information-Content-id" aria-expanded="true"
              class="slds-button slds-section__title-action" onclick={toggleSection}
              data-sectionid="claim-payment-information-section">
              <lightning-icon icon-name="utility:switch" size="x-small"
                class="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></lightning-icon>
              <span class="slds-truncate" title="Section Title">{transField.ClaimPaymentMethod}</span>
            </button>
          </h3>
          <div aria-hidden="false" class="slds-section__content toggle-content" id="Claim-Payment-Information-Content-id">
            <div class="slds-p-bottom_medium">
              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{transField.PayTo}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {paymentMode}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{transField.PolBankCode}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {bankCode}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">&nbsp;</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          &nbsp;
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="slds-col slds-size_1-of-2">
                  <div class="slds-form__item">
                    <div class="slds-form-element slds-form-element_readonly slds-form-element_stacked slds-hint-parent">
                      <span class="slds-form-element__label">{transField.PolBankAC}</span>
                      <div class="slds-form-element__control">
                        <div class="slds-form-element__static">
                          {bankAccount}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- Claim history from WS -->
        <template if:true={claimList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:network_contract" size="small" alternative-text={label.Pol_Claim_History}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.Pol_Claim_History}>
                        <span>{label.Pol_Claim_History}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <!-- claim status filter -->
              <div class="slds-size_1-of-5 slds-align_left">              
                <lightning-select
                name="claim-status-filter"
                label={label.Pol_Claims_Status}
                value={claimStatus}
                options={claimStatusOptions}
                onchange={handleClaimStatusChange}></lightning-select>
              </div>
              <!-- claim list -->
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                      <tr class="slds-line-height_reset">
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Claim_No}>{label.Pol_Claim_No}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Claim_Type}>{label.Pol_Claim_Type}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Received_Date}>{label.Pol_Received_Date}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Person_Insured}>{label.Pol_Person_Insured}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Claim_Status}>{label.Pol_Claim_Status}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Claim_Period_From}>{label.Pol_Claim_Period_From}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Claim_Period_To}>{label.Pol_Claim_Period_To}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Paid_Amount}>{label.Pol_Paid_Amount}</div>
                        </th>
                        <th class="" scope="col">
                          <div class="slds-truncate" title={label.Pol_Last_Update_Date}>{label.Pol_Last_Update_Date}</div>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <template for:each={claimList} for:item="claim" for:index="index">
                        <tr key={claim.claimNumber} class="slds-hint-parent">
                          <th scope="row">
                            <div class="slds-truncate" title={claim.claimNumber}>
                              <div class="slds-truncate clickable-text" title={claim.claimNumber} onclick={handleViewClaim} data-claim-no={claim.claimNumber} data-policy-no={claim.polNumber} data-cert-no={claim.certNumber}>{claim.claimNumber}</div>
                            </div>
                          </th>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.claimTypeDisplay}>{claim.claimTypeDisplay}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.submitDateInDate}>
                              <lightning-formatted-date-time 
                                value={claim.submitDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                          <td role="gridcell">
                            <template if:true={personInsureId}>
                              <div class="slds-truncate clickable-text" title={claim.policyInsuredName} onclick={handleGoToCustomerProfile} data-account-id={personInsureId}>{claim.policyInsuredName}</div>
                            </template>
                            <template if:false={personInsureId}>
                              <div class="slds-truncate" title={claim.policyInsuredName}>{claim.policyInsuredName}</div>
                            </template>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.claimStatusDescription}>{claim.claimStatusDescription}</div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.consultationDateInDate}>
                              <lightning-formatted-date-time 
                                value={claim.consultationDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.dischargeDateInDate}>
                              <lightning-formatted-date-time 
                                value={claim.dischargeDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.paidAmount}>
                              <lightning-formatted-number value={claim.paidAmount} format-style="currency" currency-code={claim.currencySymbol} currency-display-as="code"></lightning-formatted-number>
                            </div>
                          </td>
                          <td role="gridcell">
                            <div class="slds-truncate" title={claim.lastUpdateDateInDate}>
                              <lightning-formatted-date-time 
                                value={claim.lastUpdateDateInDate}
                                time-zone="Asia/Hong_Kong"
                                year="numeric"
                                month="2-digit"
                                day="2-digit">
                              </lightning-formatted-date-time>
                            </div>
                          </td>
                        </tr>
                      </template>
                    </tbody>
                  </table>
                </div>
              </div>
              <footer class="slds-card__footer slds-p-bottom_none">
                <c-custom-pagination 
                  current-page={claimCurrentPage}
                  total-records={claimTotalRecords}
                  page-size={generalPageSize}
                  show-page-info="true"
                  show-page-numbers="true"
                  max-page-numbers="20"
                  onpagechange={handleClaimPageChange}>
                </c-custom-pagination>
              </footer>
            </article>
          </div>
        </template>

        <div class="slds-m-around_medium"></div>

        <!-- Claim history in SFDC -->
        <template if:true={claimHistoryList}>
          <div class="slds-p-around_medium slds-box">
            <article class="slds-card">
              <div class="slds-card__header slds-grid">
                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                  <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:contract_line_item" size="small" alternative-text={label.CP_Claims_Histories_Portal}></lightning-icon>
                  </div>
                  <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                      <div class="slds-truncate" title={label.CP_Claims_Histories_Portal}>
                        <span>{label.CP_Claims_Histories_Portal}</span>
                      </div>
                    </h2>
                  </div>
                </header>
              </div>
              <div class="scroll-container">
                <div class="slds-card__body">
                  <table class="slds-table slds-table_cell-buffer slds-no-row-hover slds-table_bordered" role="grid">
                    <thead>
                    <tr class="slds-line-height_reset">
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Policy_No}>{label.Policy_No}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Claim_Detial}>{label.Claim_Detial}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Claim_Type}>{label.Claim_Type} (Portal)</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Person_Insured}>{label.Person_Insured}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Submission_Date}>{label.Submission_Date}</div>
                      </th>
                      <th class="" scope="col">
                        <div class="slds-truncate" title={label.Claim_Histroy_Status}>{label.Claim_Histroy_Status}</div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <template for:each={claimHistoryList} for:item="claimPortal" for:index="index">
                      <tr key={claimPortal.Name} class="slds-hint-parent">
                        <th scope="row">
                          <div class="slds-truncate" title={claimPortal.Policy__c}>{claimPortal.Policy__c}</div>
                        </th>
                        <td role="gridcell">
                          <div class="slds-truncate clickable-text" title="View" onclick={handleViewClaim} data-claim-no={claimPortal.Name} data-policy-no={claimPortal.Policy__c} data-source-type="Portal">View</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={claimPortal.Claim_Type__c}>{claimPortal.Claim_Type__c}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={claimPortal.Person_Insured_Name__c}>{claimPortal.Person_Insured_Name__c}</div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title={claimPortal.Submission_Date__c}>
                            <lightning-formatted-date-time 
                              value={claimPortal.Submission_Date__c}
                              time-zone="Asia/Hong_Kong"
                              year="numeric"
                              month="2-digit"
                              day="2-digit">
                            </lightning-formatted-date-time>
                          </div>
                        </td>
                        <td role="gridcell">
                          <div class="slds-truncate" title="Submitted">Submitted</div>
                        </td>
                      </tr>
                    </template>
                  </tbody>
                  </table>
                </div>
              </div>
              <footer class="slds-card__footer slds-p-bottom_none">
                <c-custom-pagination 
                  current-page={claimHistroyCurrentPage}
                  total-records={claimHistroyTotalRecords}
                  page-size={generalPageSize}
                  show-page-info="true"
                  show-page-numbers="true"
                  max-page-numbers="20"
                  onpagechange={handleClaimHistroyPageChange}>
                </c-custom-pagination>
              </footer>
            </article>
          </div>
        </template>
      </lightning-tab>
    </lightning-tabset>

    <!-- Rancho_HKITSFDC250_20250915 - add loading overlay -->
    <template if:true={isLoading}>
      <div class="slds-spinner_container loading-overlay">
        <div role="status" class="slds-spinner slds-spinner_medium">
          <span class="slds-assistive-text">Loading</span>
          <div class="slds-spinner__dot-a"></div>
          <div class="slds-spinner__dot-b"></div>
        </div>
      </div>
    </template>
  </div>
</template>