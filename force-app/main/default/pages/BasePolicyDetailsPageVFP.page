<apex:page docType="html-5.0" id="customerMyPolicyPage" Controller="policyDetailsController" sideBar="false" showHeader="false" title="My Policy">

        <head>
            <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, viewport-fit=cover" />

            <!-- 20200306 - minghua - ILAS -->
            <apex:include pageName="ILASPopup" />

            <apex:include pageName="CignaCommonCSS" />
            <apex:stylesheet value="{!URLFOR($Resource.Cigna_HK_Icons, 'Cigna-HK-Icons.css')}"/>
            <link rel="stylesheet" type="text/css" href="{!$Setup.Portal_Settings__c.Typography_Font_URL__c}" />
            <style>
                        
             .bs .grey-background {
                    background-color: rgb(242, 242, 242);
                }
       
            th {$(".form-toggle-tab").trigger('click');
                font-weight: bold;
            }

            tbody {
              width: 100%
            }

            
            td,
            th {
                padding: 6px;
                border: 0px solid #ccc;
                text-align: left;
            }
            
            tr {
                margin-top: 50px;
            }
       
             .nav active{
                background-color: #00A9E0;
                color: #fff;
                text-align: center;
                padding: 15px !important;
                font-size: 12px;
            }
            
            .bs .dropdown-menu>.active>a,
            .bs .dropdown-menu>.active>a:focus,
            .bs .dropdown-menu>.active>a:hover {
                color: #fff !important;
                background-color: #2E2E2E !important;
                text-decoration: none;
                outline: 0;
            }
            
            .myTitle {
                font-weight: bold;
            }
            
            .myTable {
                border-top: 0px !important;
            }

            .bs .table {
                table-layout: fixed;
                word-wrap: break-word;
            }

            .bs .panel {
                background: none;
            }

            #CoverageTable .bs {
              font-size :13px;
            } 

            .bs .table>tbody>tr>td,
            .bs .table>tbody>tr>th,
            .bs .table>tfoot>tr>td,
            .bs .table>tfoot>tr>th,
            .bs .table>thead>tr>td,
            .bs .table>thead>tr>th {
                border-top: 0px solid #ddd !important;
            }
            
            .bs .two-column-table {
                border: 0 !important;
                border-radius: 0 !important;
                -webkit-box-shadow: 0px 0px 0px !important;
                box-shadow: 0px 0px 0px !important;
            }
            
            .bs .field-label {
                white-space: pre-wrap;
                white-space: -moz-pre-wrap;
                white-space: -pre-wrap;
                white-space: -o-pre-wrap;
                word-wrap: break-word;
            }

            .bs .field-value {
              font-weight: bold;
            }
            
            .bs .two-column-table-body .row {
                padding-top: 5px;
                padding-bottom: 5px;
            }

            
            
            @media (min-width: 768px) {

                .policy-detail-tabs {
                  padding-left: 15px;
                  padding-right: 15px;
                }

                .bs .floating-button-container {
                    position: relative;
                }
                .bs .floating-button-panel {
                    border-top: 0px;
                    position: relative;
                }


                .bs .sub-panel {
                    padding: 10px 0px;
                    padding-left: 30px;
                    border:none;
                    box-shadow: none;
                }

                .bs .left-padding-2 {
                    padding-left: 40px !important;
                }
                
                .fundName {
                    height: 32px;
                }
            }

            @media (max-width: 768px) {

                .table-panel-body {
                  padding:0px !important;
                }

                .bs .field-label {
                  padding-left: 0px;            
                }

                .bs .field-value {
                  padding-left: 0px;
                }

                html, body
                {
                    width: 100%; overflow: auto; 
                    <!---webkit-overflow-scrolling: touch;-->
                }

                .bs .no-padding {
                    padding: 0px !important;
                }

                .bs .floating-button-container {
                    position: relative;
                }
                .bs .floating-button-panel {
                    border-top: 1px solid #f2f2f2;
                    position: fixed;
                    bottom: 0px;
                    background: #fff;
                    width: 100%;
                    left: 0;
                }

                .paymentTable {
                  padding-left: 15px !important;
                }
            }

            @media (min-width: 992px) {
              .bs .button-margin-left{
                margin-left: 50px;
              }

              .bs .button-margin-left-lg{
                margin-left: 100px;
              }

              .bs .button-margin-right{
                margin-right: 50px;
              }
            }

            @media (min-width:768px and max-width: 991px) {
              .bs .button-margin-left{
                margin-left: 0px;
              }

              .bs .button-margin-right{
                margin-right: 0px;
              }

              .bs .button-margin-left-lg{
                margin-left: 0px;
              }
            }

            .bs .panel-heading {
                padding-left: 0px;
                padding-right: 0px;
            }
            
            .bs .search-criteria {
                padding-bottom: 10px;
            }
            
            .bs .search-criteria label {
                padding-right: 10px;
            }

            .bs .panel {
                padding: 0;
                margin-bottom: 0px;
            }

            .bs .form-control {
                margin-top: 10px;
            }

            .bs .desktop-action-btn{
                cursor: pointer;
            }

            .bs div {
                word-wrap: break-word;
            }

            .bs .panel-heading{
                background-color: transparent !important;
                color: black !important;
                border:none;
                border-bottom: 1px solid #ddd;
            }

            .tab-pane {
                padding:10px;
            }

            .bs .policy-title{
                font-size: 1.5em;
                font-weight: 700;
            }

            /*
            .fundTable th {
                font-size:12px;
                padding-bottom:3px !important;
            }
            
            .fundTable td {
                padding-top:0 !important;
                padding-bottom:0 !important;
            }
            
            .fontSize14 {
                font-size:14px;
            }
            */
            .grey-bottom {
                border-bottom:2px solid #f2f2f2;
            }

            .bs .break-word {
                 white-space: pre-wrap;      /* CSS3 */   
                 white-space: -moz-pre-wrap; /* Firefox */    
                 white-space: -pre-wrap;     /* before Opera 7 */   
                 white-space: -o-pre-wrap;   /* Opera 7 */    
                 word-wrap: break-word;      /* IE */
            }
            
            .chart-center-div {
                 float: none !important; 
                 margin-left: auto !important; 
                 margin-right: auto !important;
            }

            #policy-detail-header {
              padding-left: 15px;
            }

            .mobile-tab-selector {
              padding-right: 15px;
              padding-top: 0px;
            }

            .table-header-row {
              <!--background-color:#EBEBEB;-->
            }

            .link-value {
              text-decoration: underline;
              color: blue;
              cursor: pointer;
            }
            
            /* Rancho_PI85_20221118 - change the table cell width */
            .table-container {
                display: flex;
                align-items: flex-start;
                width: 100%;
                margin-top: 0px;
            }

            .table-cell {
                width: 50% !important;
            }

            /* Rancho_JOBR340_20231107 - user guide button */
            .product-doc-btn {
              background-color: blue !important;
              white-space: normal !important;
            }

            </style>
            <!-- efulfillment style start-->
              <style>

                          @media (max-width:767px){
               
                          }
                          @media (min-width:768px) and (max-width:1170px){
                            .dy-col{   
                              width:33.3% !important;             
                            }
                          }
                          @media (min-width:1171px){
                            .dy-col{    
                              width:25% !important;                
                            }
                          }

                          
                          @media (min-width:651px) and (max-width:896px){
                            .dy-col2{   
                              width:33.3% !important;             
                            }
                          }
                          @media (min-width:897px){
                            .dy-col2{    
                              width:25% !important;                
                            }
                          }

                          @media (max-width: 1170px) {
                              .fw-filename{
                                font-size: 12px;
                                width:75%;
                                padding:0px;
                                margin:0px;
                                text-align:center;
                                vertical-align:middle !important;
                                display: inline-block;
                                padding-left: 6px;
                                padding-right: 10px;
                              }
                            
                          }
                           @media (min-width: 1171px) {
                            .fw-filename{
                              font-size: 14px;
                              width:75%;
                              padding:0px;
                              margin:0px;
                              text-align:center;
                              vertical-align:middle !important;
                              display: inline-block;
                              padding-left: 6px;
                              padding-right: 12px;
                            }
                          }
                          .fileWrapper {
                              font-size:14px;
                              font-weight: bold;
                              padding-left: 0px;
                              padding-right: 0px; 
                              vertical-align: middle;          
                              cursor:pointer;
                              -moz-box-shadow:1px 3px 8px #919191; 
                              -webkit-box-shadow:1px 3px 8px #919191; 
                              box-shadow:1px 3px 8px #919191;
                            }

                          .newFile{
                            background: url('{!URLFOR($Resource.eFulfillment, 'icon2.png')}') no-repeat;
                            background-position:right top; 
                            background-size: auto 40%;
                          }
                          .fw-icon{
                            width:25%;
                            padding:0px;
                            margin:0px;
                            text-align:center;                           
                            padding:0px;
                            display: inline-block;
                            vertical-align: middle;
                            background-color: #9BC93B;
                          }

            </style>
            <!--efulfillment style end -->
        </head>

        <apex:define name="additionalLibraries">
            <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/Chart.min.js')}"></script>
        </apex:define>
        
        <script>
            var Cigna = Cigna || {};
            //JOBR24-KIRK-20220119-Separate inpatient visit counts into another tab
            var clinicOrInpatient='';
            var oldTab='';
            var noSearchValueErrMsg = '{!$Label.Error_Input_Criteria}';
            Cigna.PolicyDetail = function() {

              function viewClaimDetails(claimNumber){
                sessionStorage.setItem('policy-detail-back-url','PolicyDetailsPageVFP?policyNumber={!JSINHTMLENCODE(policyNumber)}&policyType={!JSINHTMLENCODE(policyType)}&SHA256Key={!SHA256Key}');
                Cigna.Util.navigateToVFP('ClaimDetailsVFP?claimNo='+claimNumber+'&policyType={!JSINHTMLENCODE(policyType)}', null, null, true);
              }

              function refresh(select) {
                $($(select).val()).tab('show');
              }
            
              function changeSection(section){
                var icon = $(section).find('i');               
                
                console.log('##changeSection');
                if(icon.hasClass("ci-hk-arrow-28")){
                    console.log($(section));
                    icon.removeClass("ci-hk-arrow-28").addClass("ci-hk-arrow-27");
                }else if(icon.hasClass("ci-hk-arrow-27")){
                    icon.removeClass("ci-hk-arrow-27").addClass("ci-hk-arrow-28");
                }
                
                
              }
              
              function changeSection_arrow(section){
                var arrow = $(section).find('.section-arrow');  
                var arrowId = arrow.attr('id');                
                
                if(arrowId.indexOf("arrow-down") >= 0){                    
                    $('#'+arrowId).css('display','none').removeClass('section-arrow');
                    $('#'+arrowId.replace('down','up')).css('display', 'block').addClass('section-arrow');                   
                }else if(arrowId.indexOf("arrow-up") >= 0){                    
                    $('#'+arrowId).css('display','none').removeClass('section-arrow');
                    $('#'+arrowId.replace('up','down')).css('display', 'block').addClass('section-arrow');
                }
              }
              
              function backRequest() {
                if (Cigna.Util.isCustomerPortal()) {
                    Cigna.Util.navigateToVFP('MyPolicyVFP', null, null, true);
                }
                else if (Cigna.Util.isBrokerPortal()) {
                    Cigna.Util.navigateToVFP('CustomizeSearchPolicyPageVFP{!IF(encryptedSearchCriteria!='','?'+URLParamName+'='+encryptedSearchCriteria,'')}', null, null, true);//JR1840
                }
                else {
                    Cigna.Util.navigateToVFP('MyPolicyVFP', null, null, true);
                }
              }

              function setRow(itemClassName){
               //CR-56_Link_20220214
               var totalItem = $('.'+itemClassName).length;

                var sp = 768;

                if( itemClassName == 'paymentInfoPanelItem'){
                    sp = 992;
                }
                
                if($(window).width() < sp){
                  for(var i = 0; i< totalItem; i++){
                    $('.'+itemClassName).slice(i,i+1).wrapAll('<div class="bs row"/>');
                  }
                  return;
                }

                if(totalItem > 1){
                  var pair = Math.ceil(totalItem / 2);
                  for(var i = 0; i< pair; i++){
                    if(i*2+2 < totalItem){
                      $('.'+itemClassName).slice(i*2,i*2+2).wrapAll('<div class="bs row"/>');
                    } else {
                      $('.'+itemClassName).slice(i*2).wrapAll('<div class="bs row"/>');
                    }
                  }
                } else if(totalItem == 1) {
                  $('.'+itemClassName).wrapAll('<div class="bs row"/>');
                }
              }

              function scrollToPanel(panelId){
                console.log('Here');
                $('body').animate({
                    scrollTop: $("[id*="+panelId+"]").offset().top - $('#navtopbar').height() - 50
                }, 100);
              }

              function makePolicyChange(){
                if(Cigna.Util.isBrokerPortal){

                } else if(Cigna.Util.isCustomerPortal){

                }
              }


              return {
                  changeSection: changeSection,
                  changeSection_arrow: changeSection_arrow,
                  backRequest: backRequest,
                  setRow : setRow,
                  refresh: refresh,
                  viewClaimDetails: viewClaimDetails,
                  scrollToPanel: scrollToPanel
              }
            }();
                
            $(document).ready(function() {

                initBenefitSchedule = false;
                
                if({!!(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)])}){
                  PolicyDetailAF.getPolicyInfomation();
                } else if ({!isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)]}){
                  //PolicyDetailAF.getPolicyInfomation();      //Nicole_20190926_SPS-283
                  PolicyDetailAF.getPolicyClaimHistory(); 
                  initPolicyClaimHistory = true;
                }
                
                //CR-56_Link_20220214
                $(".tab-header").on("click",function(event) {
                    $(".tab-pane").hide();
                    $("#"+(this.id).substring(0,this.id.length-3)).show();
                    $(".active-bar-tab").addClass("inactive-bar-tab").removeClass("active-bar-tab");
                    $(this).addClass("active-bar-tab").removeClass("inactive-bar-tab");
                    console.log(this.id);

                    if(this.id == 'CoverageInformationTab'){
                      PolicyDetailAF.getPolicyPersonCoverageBasic();
                    } else if(this.id == 'PaymentInformationTab'){
                      PolicyDetailAF.getPolicyPayment();
                    } else if(this.id == 'ClaimHistoryTab'){                  
                      PolicyDetailAF.getPolicyClaimHistory();
                    } else if (this.id == 'PolicyChangeHistoryTab'){
                      PolicyDetailAF.getPolicyChangeList();
                    } else if (this.id == 'RemainingClinicVisitsTab'){
                      PolicyDetailAF.getClinicVisitCount();
                      $(document).on('click', '.gs-clinic-class', function() {
                        var categorySeq = $(this).attr('sequence');
                        $('.' + categorySeq + '-gs-clinic-content').toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                      });

                      $(document).on('click', '.mobile-gs-clinic-class', function() {
                        var categorySeq = $(this).attr('sequence');
                        var clinicContent = $('.' + categorySeq + '-mobile-gs-clinic-content');
                        clinicContent.toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                        if(clinicContent.hasClass('visible-xs')) {
                          clinicContent.removeClass('visible-xs');
                        } else {
                          clinicContent.addClass('visible-xs');
                        }
                      });
                    } else if(this.id == 'InformationTab'){
                      PolicyDetailAF.getPolicyInfomation();
                    } else if (this.id == 'FundPortfolioTab'){
                      PolicyDetailAF.getChartData();
                    } else if (this.id =='BenefitScheduleTab'){
                      if(Cigna.Util.isBrokerPortal()){
                        PolicyDetailAF.getFullPlanList();
                      } else if(Cigna.Util.isCustomerPortal() && !initBenefitSchedule){
                        initBenefitSchedule = true;
                        PolicyDetailAF.getBenefitSchedule();
                      }                    
                    } else if (this.id =='PremiumSettlementHistoryTab'){
                      PolicyDetailAF.getPremiumSettlement();
                    } else if (this.id == 'MemberListTab'){
                      PolicyDetailAF.getMemberList();
                    }
                      $('#inputCharErrorMessage').css('display','none');
                      $('#inputCharErrorMessageLong').css('display','none');
                      $('#inputCharErrorMessageMember').css('display','none');
                      $('#inputCharErrorMessageLongMember').css('display','none');

                });
                
                
                //CR-56_Link_20220214
                $("[id$='tabSelector']").on("change",function(event) {
                    var v = $(this).val();
                    console.log(v);
                    $(".tab-pane").hide();
                    $(v).show();

                    if(v == '#CoverageInformation'){
                      PolicyDetailAF.getPolicyPersonCoverageBasic();
                    } else if(v == '#PaymentInformation'){
                      PolicyDetailAF.getPolicyPayment();
                    } else if(v == '#ClaimHistory'){
                      PolicyDetailAF.getPolicyClaimHistory();
                    } else if (v == '#PolicyChangeHistory'){
                      PolicyDetailAF.getPolicyChangeList();
                    // Rancho_PI85_20221118 - add option for mobile version
                    //} else if (v == '#RemainingClinicVisits'){
                    } else if (v == '#RemainingClinicVisits' || v == '#RemainingInpatientVisits'){  
                        if(v == '#RemainingClinicVisits'){
                            clinicOrInpatient = 'Clinic';
                        }else{
                            $("#RemainingClinicVisits").show();
                            clinicOrInpatient = 'Inpatient';
                        }
                        console.log('remaining type: '+clinicOrInpatient);
                      PolicyDetailAF.getClinicVisitCount();

                      $(document).on('click', '.gs-clinic-class', function() {
                        var categorySeq = $(this).attr('sequence');
                        $('.' + categorySeq + '-gs-clinic-content').toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                      });

                      $(document).on('click', '.mobile-gs-clinic-class', function() {
                        var categorySeq = $(this).attr('sequence');
                        var clinicContent = $('.' + categorySeq + '-mobile-gs-clinic-content');
                        clinicContent.toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                        if(clinicContent.hasClass('visible-xs')) {
                          clinicContent.removeClass('visible-xs');
                        } else {
                          clinicContent.addClass('visible-xs');
                        }
                      });
                    } else if (v == '#Information'){
                      PolicyDetailAF.getPolicyInfomation();
                    } else if (v == '#FundPortfolio'){
                      PolicyDetailAF.getChartData();
                    } else if (v =='#BenefitSchedule'){
                      if(Cigna.Util.isBrokerPortal()){
                        PolicyDetailAF.getFullPlanList();
                      } else if(Cigna.Util.isCustomerPortal()  && !initBenefitSchedule){
                        initBenefitSchedule = true;
                        PolicyDetailAF.getBenefitSchedule();
                      }
                    } else if (v == '#PremiumSettlementHistory'){
                      PolicyDetailAF.getPremiumSettlement();
                    } else if (v == '#MemberList'){
                      PolicyDetailAF.getMemberList();
                    }
                      $('#inputCharErrorMessage').css('display','none');
                      $('#inputCharErrorMessageLong').css('display','none');
                      $('#inputCharErrorMessageMember').css('display','none');
                      $('#inputCharErrorMessageLongMember').css('display','none');
                });

                if (Cigna.Util.isIOS() && Cigna.Util.isSalesforce1() && Cigna.Util.isBrokerPortal()) {
                      $('#action-bar').css('position', 'absolute');
                      $('#mobile-app-padding').css('display', 'block');
                      $(a).attr("target","");
                }

               var tab_count = $('td.tab-header:visible').length;
               var tab_length = 100/tab_count;

               $('td.tab-header:visible').each(function(){
                    $(this).css('width', tab_length+'%');
               });
               
               $(".form-toggle-tab").trigger('click');

                <!--junda add 20201201-->
                $('[data-toggle="tooltip"]').tooltip();
                <!--junda add end-->
               
/*efulfillment */
               refreshFileNameANDDownload();
            });
/*efulfillment enhanced added start*/
            
            function refreshFileNameANDDownload(){
              //alert ('called');
              var wid = $(window).width();
              $(".txt-filename").each(function(){  
                
                var v = $(this).text();    
                
                if (Cigna.ValidationUtil.isEnglishOnlyExtend(v)){                        
                  if (wid<768){
                    if (v.length> 22 ){
                      $(this).text(v.substring(0,19)+'...');
                    }
                  }else if (wid>1170){
                    if (v.length> 21 ){
                      $(this).text(v.substring(0,18)+'...');
                    }
                  }else{
                    if (v.length> 19 ){
                      $(this).text(v.substring(0,16)+'...');
                    }
                  }   
                }else{
                  if (wid<768){
                    if (v.length> 11 ){
                      $(this).text(v.substring(0,10)+'...');
                    }
                  }else if (wid>1170){
                    if (v.length> 12 ){
                      $(this).text(v.substring(0,11)+'...');
                    }
                  }else{
                    if (v.length> 11 ){
                      $(this).text(v.substring(0,10)+'...');
                    }
                  }  
                }                       
              });


              //CR-56_Link_20220214
              $(".fileWrapper").on("click",function(){   
				console.log('###click fileWrapper');
                var atk = $(this).data("atk");
                var brkatt = $(this).data("brkatt");
                $("input[id$='targetAttachmentKey']").val(atk);
                $("input[id$='selectedAttID']").val(brkatt);
               
                var indid = "#dlink_"+ brkatt;
                // 20230921 - minghua - PI-129 Vulnerability follow up request - Pentest (FND-61951) High
                // Rancho_PI142_20231214 - fix user could not open doc in iPad/iPhone website
                var hrefBack=$(indid).attr("href");
                if (Cigna.Util.checkWebView()) {
                    var href=hrefBack.split("/apex/");
                    var param="/apex/"+href[1];
                    if (Cigna.Util.isIOS()) {
                        var openURL=openDownload(param);
                        $(indid).attr("href",openURL);
                    }else{
                        $(indid).removeAttr("target");
                        $(indid).attr("href","javascript:void(0);");
                        $(indid).attr("onclick",openDownload(param));
                    }
                }
                $(indid)[0].click();
                if (Cigna.Util.checkWebView()) {
                    $(indid).attr("href",hrefBack);
                }
               // PolicyDetailAF.getDocForMobile();
                  
              });
            }

/*efulfillment enhanced end end*/            
                      
            
            function groupClaimSearchValidation(){
            
              var opt = $("[id$='selectedSearchOptionGroup']").find(":selected").val();
              var searchvalue = $("input[id*='selectedSearchValueGroup']").val().split(" ").join("");

              $("[id$='GroupClaimErrorApex']").hide();

              if(!searchvalue.trim()){
                    $('#inputCharErrorMessage').show();
                    $('#inputCharErrorMessage').text(noSearchValueErrMsg);  
                    return null;                  
              } else {
                  $('#inputCharErrorMessage').hide();
              }

              if(opt == "Member Name"){
                  if((searchvalue.length) < 2){
                      $('#inputCharErrorMessage').text('{!$Label.Please_input_at_least_2_characters_to_search}'); 
                      $('#inputCharErrorMessage').css('display','block');
                      $('#inputCharErrorMessageLong').css('display','none');
                  }
                  else{
                      $('#inputCharErrorMessage').css('display','none');
                      $('#inputCharErrorMessageLong').css('display','none');
                      groupClaimSearch();
                  }
              }
              else if (opt == "Member Id") {
                  var searchvalue = $("input[id*='selectedSearchValueGroup']").val().split(" ").join("");
                  if((searchvalue.length) < 4){
                      $('#inputCharErrorMessageLong').css('display','block');
                      $('#inputCharErrorMessage').css('display','none');
                  }
                  else{
                      $('#inputCharErrorMessage').css('display','none');
                      $('#inputCharErrorMessageLong').css('display','none');
                      groupClaimSearch();
                  }
              }
              else{
                  $('#inputCharMessage').css('display','none');
                  $('#inputCharErrorMessageLong').css('display','none');
                  groupClaimSearch();
              }  
            
          }
          
          function memberListSearchValidation(){
            
              var opt = $("[id$='selectedSearchOptionMember']").find(":selected").val();
              var searchvalue = $("input[id*='selectedSearchValueMember']").val().split(" ").join("");
              $('#MemberListError').hide();
              if(!searchvalue.trim()){
                  $('#inputCharErrorMessageMember').text(noSearchValueErrMsg);  
                  $('#inputCharErrorMessageMember').show();
                  return null;                  
              } else {
                  $('#inputCharErrorMessageMember').hide();
              }

              if(opt == "Member Name"){
                  
                  if((searchvalue.length) < 2){
                      $('#inputCharErrorMessageMember').text('{!$Label.Please_input_at_least_2_characters_to_search}');  
                      $('#inputCharErrorMessageMember').css('display','block');
                      $('#inputCharErrorMessageLongMember').css('display','none');
                  }
                  else{
                      $('#inputCharErrorMessageMember').css('display','none');
                      $('#inputCharErrorMessageLongMember').css('display','none');
                      memberListSearch();
                  }
              }
              else if (opt == "Member Id") {
                  var searchvalue = $("input[id*='selectedSearchValueMember']").val().split(" ").join("");
                  if((searchvalue.length) < 4){
                      $('#inputCharErrorMessageLongMember').css('display','block');
                      $('#inputCharErrorMessageMember').css('display','none');
                  }
                  else{
                      $('#inputCharErrorMessageMember').css('display','none');
                      $('#inputCharErrorMessageLongMember').css('display','none');
                      memberListSearch();
                  }
              }
              else{
                  $('#inputCharMessageMember').css('display','none');
                  $('#inputCharErrorMessageLongMember').css('display','none');
                  memberListSearch();
              }  
            
          }
          
            function openDocument(){
                console.log('###start openDocument');
                var el=document.getElementById('open-attachment-link');
                if (Cigna.Util.isIOS() && Cigna.Util.isSalesforce1() && Cigna.Util.isBrokerPortal()) {
                    el.target = "";
                }    
                el.click();  
                $('input[type="hidden"][id$="is-document-download-complete"]').val(false);                                
            }

            //added for async download 
            function documentDetector(){
                //showLoading();
                var isComplete = $('input[type="hidden"][id$="is-document-download-complete"]').val();
                //var isComplete = document.getElementById('open-attachment-link');
                console.log('###isComplete='+isComplete );
                if(isComplete=='false'){
                    console.log('###false');
                    //setTimeOut(checkIsDocumentDownloadComplete,3000);
                    setTimeout(checkIsDocumentDownloadComplete, 3000); 
                    console.log('###false 1');               
                }else{
                    finishLoading();
                    console.log('###true');
                    openDocument();
                }
                
            }
            
            function showLoading() {
                $('#download-loader').fadeIn(100);
                
            }
            
            function finishLoading(){
                $('#download-loader').fadeOut(100);
                
            }
            
        </script>
        
        <div class="bs">          
            <!--added by Connor-->
            <div id="download-loader" class="bs col-xs-12 col-lg-12 loading-div" style="display: none;">
                <span class="loading-helper"></span>
                <i class="spinner-icon fa fa-spinner fa-pulse fa-3x fa-fw"></i>
                <span class="sr-only">Loading...</span>
            </div>
            <!--added by Connor-->  
            
          <apex:define name="body"> 
            <apex:form id="mainPage">
                
              <!--information -->
              <apex:actionFunction action="{!getPolicyInfomation}" 
                                    name="getPolicyInfomation" 
                                    reRender="InformationApex,titlePanel, mobileButtonApex, desktopButtonApex, brkMobileButtonApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" 
                                    oncomplete="PolicyDetailAF.InitEfulfillment();"/>
                 
                
              <!--converage -->                              
              <apex:actionFunction action="{!getPolicyPersonCoverageBasic}" 
                                    name="getPolicyPersonCoverageBasic" 
                                    reRender="CoverageInformationApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />

              <!--payment-->                                                                 
              <apex:actionFunction action="{!getPolicyPaymentInformation}" 
                                    name="getPolicyPayment" 
                                    reRender="PaymentInformationApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" /> 

              <!--policy change-->                       
              <apex:actionFunction action="{!getPolicyChangeList}" 
                                    name="getPolicyChangeList" 
                                    reRender="PolicyChangeHistoryApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" /> 
              
              <!--claim history group+custom start tab -->                       
              <apex:actionFunction action="{!getPolicyClaimHistory}" 
                                    name="getPolicyClaimHistory" 
                                    reRender="ClaimHistoryApex,ClaimHistoryApex2,titlePanel,GroupClaimErrorApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />
                                    
              
              <apex:actionFunction action="{!getClinicVisitCount}" 
                                    name="getClinicVisitCount" 
                                    reRender="RemainingClinicVisitsApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />
            

               <apex:actionFunction action="{!getChartData}" 
                                    name="getChartData" 
                                    reRender="FundPortfolioApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />  

              <apex:actionFunction action="{!getBenefitSchedule}" 
                                    name="getBenefitSchedule" 
                                    reRender="BenefitScheduleApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF"
                                    oncomplete="$('.planListPanelHeader')[0].click();" /> 

              <apex:actionFunction action="{!getPremiumSettlement}" 
                                    name="getPremiumSettlement" 
                                    reRender="PremiumSettlementApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />   

              <apex:actionFunction action="{!getMemberList}" 
                                    name="getMemberList" 
                                    reRender="MemberListApex, MemberListErrorApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />

              <apex:actionFunction action="{!getPlanNameFullList}" 
                                    name="getFullPlanList" 
                                    reRender="BenefitScheduleApex"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" />  
                                     
              <!--Efulfillment Document Download Action-->
              <apex:actionFunction action="{!downloadDocument}" 
                                    name="downloadDocument" 
                                    namespace="PolicyDetailAF" 
                                    reRender="open-attachment-link-panel"
                                    oncomplete="documentDetector();"

                                    >
                              <apex:param name="attKey" value="" assignTo="{!selectedDowlAttKey}"/>
               </apex:actionFunction>

               <apex:outputPanel id="open-attachment-link-panel" rendered="{!isBrokerUser}">
                    <!-- 20230921 - minghua - PI-129 Vulnerability follow up request - Pentest (FND-61951) High -->
                    <!-- <a href="{!$Setup.Portal_Settings__c.File_Download_URL__c}{!selectedDowlAttId}" target="_blank" id="open-attachment-link" style="display:none;" value = 'test'/> -->
                     <a href="{!$Site.BaseUrl}/servlet/servlet.FileDownload?file={!selectedDowlAttId}" target="_blank" id="open-attachment-link" style="display:none;" value = 'test'/>
               </apex:outputPanel>
               
               <!-- added for async download  -->   
               <apex:actionFunction action="{!checkIsDocumentDownloadComplete}" name="checkIsDocumentDownloadComplete"  reRender="is-document-download-param-panel,open-attachment-link-panel" oncomplete="documentDetector();" />
               <apex:outputPanel id="is-document-download-param-panel" >
                     <apex:inputHidden value="{!isDownloadComplete}" id="is-document-download-complete"/>
               </apex:outputPanel>
                                                                                                   
              <!--efulfillment enhanced added start -->   
              <apex:outputPanel id="dlvar" >
               <apex:inputHidden id="targetAttachmentKey" value="{!targetAttachmentKey}"/>
                 <apex:inputHidden id="selectedAttID" value="{!selectedAttID}"/>
               </apex:outputPanel>
              <apex:actionFunction action="{!InitEfulfillment}" 
                                    name="InitEfulfillment" 
                                    reRender="indCorDocPanel"
                                    status="loader-icon"
                                    namespace="PolicyDetailAF" 
                                    oncomplete="refreshFileNameANDDownload();"/>
               <!--efulfillment enhanced added end-->                           
                                                
              <!--Desktop Tab-->                
              <div class="bs row">
                <table class="bs bar-tab-container col-lg-12 hidden-xs">
                    <tr>
                        <td style="{!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)],'display:none','')}" id="InformationTab" class="bs {!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)] ,'inactive-bar-tab','active-bar-tab')} tab-header onclick-pointer">
                            {!$Label.Pol_Policy_Information}
                        </td>
                        <td style="{!IF(isILAS,'','display:none')}" id="FundPortfolioTab" class="bs inactive-bar-tab tab-header onclick-pointer">
                            {!$Label.Fund_Portfolio}
                        </td>
                        <td style="{!IF(fields2['group'][JSINHTMLENCODE(policyType)],'display:none','')}" id="CoverageInformationTab" class="bs inactive-bar-tab tab-header onclick-pointer">
                            {!$Label.Pol_Coverage_Information}
                        </td>
                        <td style="{!IF(fields2['group'][JSINHTMLENCODE(policyType)],'display:none','')}" id="PaymentInformationTab" class="bs inactive-bar-tab tab-header onclick-pointer" onclick="" >
                            {!$Label.Pol_Payment_Information}
                        </td>
                        <td id="ClaimHistoryTab" class="bs {!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)],'active-bar-tab','inactive-bar-tab')} tab-header onclick-pointer" onclick="" >
                            {!$Label.Pol_Claim_History}
                        </td>
                        <td style="{!IF(fields2['group'][JSINHTMLENCODE(policyType)],'display:none','')}" id="PolicyChangeHistoryTab" class="bs inactive-bar-tab tab-header  onclick-pointer" onclick="">
                            {!$Label.Pol_Policy_Change_History}
                        </td>
                        <td style="{!IF(isCustomerUser || fields2['individual'][JSINHTMLENCODE(policyType)],'display:none','')}" id="PremiumSettlementHistoryTab" class="bs inactive-bar-tab tab-header onclick-pointer" onclick="">
                            {!$Label.Pol_Premium_Settlement}
                        </td>
                        <td style="{!IF(isCustomerUser || fields2['individual'][JSINHTMLENCODE(policyType)],'display:none','')}" id="MemberListTab" class="bs inactive-bar-tab tab-header onclick-pointer" onclick="" >
                            {!$Label.Pol_Member_List}
                        </td>

                        <td style="{!IF(fields2['individual'][JSINHTMLENCODE(policyType)],'display:none','')}" id="BenefitScheduleTab" class="bs inactive-bar-tab tab-header onclick-pointer" onclick="" >
                            {!$Label.Pol_Benefit_Schedule}
                        </td>
                        
                        <td style="{!IF(isBrokerUser || fields2['individual'][JSINHTMLENCODE(policyType)],'display:none','')}" id="RemainingClinicVisitsTab" class="bs inactive-bar-tab tab-header onclick-pointer" onclick="changeTheVariable(1)">
                            {!$Label.Pol_Remaining_Clinic_Visits}
                        </td>
                        <!--JOBR24-KIRK-20220119-Separate inpatient visit counts into another tab-->
                        <td style="{!IF(isBrokerUser || fields2['individual'][JSINHTMLENCODE(policyType)],'display:none','')}" id="RemainingClinicVisitsTab" class="bs inactive-bar-tab tab-header onclick-pointer" onclick="changeTheVariable(2)">
                            {!$Label.Pol_Remaining_Inpatient_Visits}
                        </td>
                    </tr>                
                </table>
              </div>
              <script>
                   function changeTheVariable(sign){
                       if(sign == 1){
                           clinicOrInpatient = 'Clinic';
                       }else{
                           clinicOrInpatient = 'Inpatient';
                       }
                   }

              </script>
              <!--Desktop Tab End-->

              <div id="policy-detail-header" class="bs"> 

                <!-- Back Button -->
                <div class="bs row" style="padding-top:10px;">
                    <!-- <apex:outputLink value="/apex/{!IF(isCustomerUser,'CusMyPolicyVFP','BrkCustomizeSearchPolicyPageVFP')}" styleClass="bs cigna-fg-orange-medium"> -->
                    <div class="bs cigna-fg-orange-medium onclick-pointer" onclick="Cigna.PolicyDetail.backRequest()">    
                        <i class="ci-hk-arrow-29 ci-hk-sm" aria-hidden="true"></i> {!$Label.Back}
                    </div>
                    <!-- </apex:outputLink> -->
                </div>
                <!-- Back Button End -->

                <!-- Desktop button -->
                <apex:outputPanel id="desktopButtonApex" layout="block">
                  <div class="buttonWrapper">
                    <div class="bs row hidden-xs form-field"  style="{!IF(JSINHTMLENCODE(policyType) == 'ILAS','','display:none')}">
                      
                      <div class="bs col-sm-12" style="text-align: center;">
                          <!-- Rancho_PI61_20220222: disable button -->
                          <!-- align the button display logic with Make a Claim, only inactive days < 90 days policy can submit claim -->
                          <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-right {!if(over90Days, 'needDisable', '')}" onclick="Cigna.Util.navigateToVFP('MyClaimSubmitVFP')">
                              {!$Label.pol_make_a_claim_button}
                          </div>
                          <!-- align the button display logic with Policy Change, both inforce and lapsed policy could change policy -->
                          <div style="{!IF(isBrokerUser,'display:none','')}" class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-left {!if(CONTAINS(eligibleStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" onclick="Cigna.Util.navigateToVFP('PolicyChangeSubmitVFP')">
                              {!$Label.pol_Make_a_Change_in_Policy}
                          </div>

                          <div style="{!IF(isBrokerUser,'','display:none')}" class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-left {!if(CONTAINS(eligibleStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" onclick="Cigna.Util.navigateToVFP('PolicyChangeSubmitVFP?BrkPolicyChangeSubmitVFP?tab=all&phid={!holder.ssnNumber}&phname={!holder.fullName}&phemail={!holder.emailAddress}&pclist=false')">
                              {!$Label.pol_Make_a_Change_in_Policy}
                          </div>

                          <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-left-lg" onclick="Cigna.Util.navigateToVFP('FundManagementVFP?policyNumber={!JSINHTMLENCODE(policyNumber)}&type=ILAS&SHA256Key={!SHA256Key}')">
                                {!$Label.Pol_Manage_Fund_Button}
                          </div>
                      </div>

                    </div>

                    <div class="bs row hidden-xs form-field"  style="{!IF(JSINHTMLENCODE(policyType) == 'nonILAS','','display:none')}">
                        <div class="bs col-sm-12" style="text-align: center;">
                            <!-- Rancho_PI61_20220222: disable button -->
                            <!-- align the button display logic with Make a Claim, only inactive days < 90 days policy can submit claim -->
                            <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-right {!if(over90Days, 'needDisable', '')}" onclick="Cigna.Util.navigateToVFP('MyClaimSubmitVFP')">
                                {!$Label.pol_make_a_claim_button}
                            </div>

                            <!-- align the button display logic with Policy Change, both inforce and lapsed policy could change policy -->
                            <div style="{!IF(isBrokerUser,'display:none','')}" class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-left {!if(CONTAINS(eligibleStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" onclick="Cigna.Util.navigateToVFP('PolicyChangeSubmitVFP')">
                                {!$Label.pol_Make_a_Change_in_Policy}
                            </div>

                            <div style="{!IF(isBrokerUser,'','display:none')}" class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-left {!if(CONTAINS(eligibleStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" onclick="Cigna.Util.navigateToVFP('PolicyChangeSubmitVFP?BrkPolicyChangeSubmitVFP?tab=all&phid={!holder.ssnNumber}&phname={!holder.fullName}&phemail={!holder.emailAddress}&pclist=false')">
                                {!$Label.pol_Make_a_Change_in_Policy}
                            </div> 
                            <!-- only inforce IPMI policy could submit GOP -->
                            <apex:outputPanel rendered="{!showApplyForGOPBtn}" >
                              <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-left-lg {!if(CONTAINS(inforceStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" onclick="Cigna.Util.navigateToVFP('SubmitHospitalVFP?policyNo={!JSINHTMLENCODE(policyNumber)}&SHA256Key={!SHA256Key}')">
                                  {!$Label.Pol_Apply_Admission_PreApproval_Button}
                              </div>
                            </apex:outputPanel>
                        </div>
                    </div>
                    
                    <div class="bs row hidden-xs form-field"  style="{!IF(JSINHTMLENCODE(policyType) == 'Group' && !isBrokerUser,'','display:none')}">
                      <div id="back-btn-dt" class="bs col-sm-12" style="text-align: center;">
                        <!-- Rancho_JOBR376_20240612 -->
                        <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn {!if(over90Days, 'needDisable', '')}" onclick="Cigna.Util.navigateToVFP('MyClaimSubmitVFP')">
                                {!$Label.pol_make_a_claim_button}
                        </div>
                        <apex:outputPanel rendered="{!showApplyForGOPBtn}" >
                            <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn" onclick="Cigna.Util.navigateToVFP('SubmitHospitalVFP?policyNo={!JSINHTMLENCODE(policyNumber)}&SHA256Key={!SHA256Key}')">
                                {!$Label.Pol_Apply_Admission_PreApproval_Button}
                            </div>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!showDDABtn}" >
                            <div class="bs btn mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn button-margin-right" onclick="Cigna.Util.navigateToVFP('MyDDASignatureForm?backurl=PolicyDetailsPageVFP&policyNumber={!JSINHTMLENCODE(policyNumber)}&policyType={!JSINHTMLENCODE(policyType)}&SHA256Key={!SHA256Key}')" >
                                    <apex:outputText value="{!DDAFormBtnVal}"></apex:outputText>
                            </div>
                        </apex:outputPanel>
                      </div>
                    </div>
                    <script>
                        // Rancho_PI61_20220222
                        var nodeList = document.querySelectorAll(".needDisable");
                        for(var i = 0; i < nodeList.length; i++){
                            var node = nodeList[i];
                            if(typeof node !== 'undefined'){
                                node.setAttribute("disabled", "true");
                                node.style.pointerEvents = "none";
                            }
                        }
                    </script>
                  </div>
                </apex:outputPanel>
                <!-- Desktop button end -->

                <!-- Policy Title -->
                <apex:outputPanel layout="block" id="titlePanel">
                  <div class="bs row form-field policy-title">
                    <apex:outputText value="{!IF(isGroup,policy.marketingName,policy.marketingName)}"/>
                  </div>
                </apex:outputPanel>
                <!-- Policy Title End --> 

                <!-- Mobile Tab Selector -->    
                <div class="bs row hidden-lg hidden-md hidden-sm mobile-tab-selector">
                                         
                    <select id="tabSelector" class="bs form-field-style-select cigna-fg-gray-dark" style="{!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)],'display:none','')}">

                        <apex:outputPanel rendered="{!!(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)])}">
                           <option value="#Information" selected="selected">{!$Label.Pol_Policy_Information}</option>
                        </apex:outputPanel>
                       
                        <apex:outputPanel rendered="{!isILAS}">
                          <option value="#FundPortfolio">
                              {!$Label.Fund_Portfolio}
                          </option>
                        </apex:outputPanel>

                        <apex:outputPanel rendered="{!!(fields2['group'][JSINHTMLENCODE(policyType)])}">
                          <option value="#CoverageInformation" >{!$Label.Pol_Coverage_Information}</option>
                          <option value="#PaymentInformation">{!$Label.Pol_Payment_Information}</option>
                        </apex:outputPanel>

                        <option value="#ClaimHistory" >{!$Label.Pol_Claim_History}</option>

                        <apex:outputPanel rendered="{!!(fields2['group'][JSINHTMLENCODE(policyType)])}">
                          <option value="#PolicyChangeHistory">{!$Label.Pol_Policy_Change_History}</option>
                        </apex:outputPanel>

                        <apex:outputPanel rendered="{!!(isCustomerUser || fields2['individual'][JSINHTMLENCODE(policyType)])}">
                          <option value="#PremiumSettlementHistory">{!$Label.Pol_Premium_Settlement}</option>
                          <option value="#MemberList">{!$Label.Pol_Member_List}</option>
                        </apex:outputPanel>

                        <apex:outputPanel rendered="{!fields2['Benefit Schedule Tab'][JSINHTMLENCODE(policyType)]}">
                          <option value="#BenefitSchedule">{!$Label.Pol_Benefit_Schedule}</option>
                        </apex:outputPanel>

                    </select>
                   
                    <select id="tabSelector" class="bs form-field-style-select cigna-fg-gray-dark" onChange="Cigna.PolicyDetail.refresh(this)" style="{!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)],'','display:none')}">
                        <option value="#ClaimHistory" selected="selected">{!$Label.Pol_Claim_History}</option>
                        <option value="#BenefitSchedule">{!$Label.Pol_Benefit_Schedule}</option>
                        <option value="#RemainingClinicVisits">{!$Label.Pol_Remaining_Clinic_Visits}</option>
                        <!-- Rancho_PI85_20221118 - add option for mobile version -->
                        <option value="#RemainingInpatientVisits">{!$Label.Pol_Remaining_Inpatient_Visits}</option>
                    </select>
                </div>
                <!-- Mobile Tab Selector End-->   
              </div>

              <div class="bs policy-detail-tabs">
                <apex:pageMessages id="pageMessage"></apex:pageMessages>
                <div class="bs tab-content" id="pageDetail">
                  <!----Policy Information Start---->
                  <apex:outputPanel id="InformationApex" layout="block" rendered="{!!(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)])}">
                    <div id="Information" class=" bs tab-pane {!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)],'','in active')}">
                      <!-- New Table (Two-Column) -->
                      <div class="bs panel two-column-table">
                        <div id="policyInformationPanel" class="bs panel-body two-column-table-body">
                          <!-- Non Group -->
                          <apex:outputPanel layout="block" rendered="{!JSINHTMLENCODE(policyType) != 'Group'}">
                            <apex:outputPanel layout="block" rendered="{!fields2['Policy No.'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs row">
                                    <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_No}</div>
                                    <div class="bs col-xs-6 col-sm-3 field-value"> 
                                      <apex:outputText value="{!policy.policyNumber}"/>
                                    </div>
                                </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Plan Type'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Plan_Type}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.planTypeDescription}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Product Name'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Product_Name}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.marketingName}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Policy Holder'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Holder}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.holder.fullName}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Policy Effective Date'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Effective_Date}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <!--<apex:outputText value="{!policy.effDate}"/>-->
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!policy.effDateInDate}"/>
                                  </apex:OutputText>
                                </div>
                              </div>
                            </apex:outputPanel>

                            <apex:outputPanel layout="block" rendered="{!fields2['Policy Status'][JSINHTMLENCODE(policyType)] }">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Status}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.policyStatusDisplayName }"/>
                                    <!--junda add 20201202-->
                                    <!--<i class="fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="{!$Label.Policy_Tooltip}" aria-hidden="true" STYLE="{!IF(policy.isDisplayTooltip, '', 'display:none')}"></i>-->
                                    <i class="bs cigna-fg-blue-medium field-value" STYLE="{!IF(policy.isDisplayTooltip, '', 'display:none')}">*</i>
                                    <!--junda add end-->
                                </div>
                              </div>
                            </apex:outputPanel>
                              <!--junda add 20201201-->
                              <script>
                                $('[data-toggle="tooltip"]').tooltip();
                              </script>
                              <!--junda add end-->
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Payment Mode'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Payment_Mode}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!payment.paymentMode}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Currency'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Currency}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.currencyCodeDesc}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            <!-- Rancho_JOBR371_20240603 - remove next premium -->
                            <!-- <apex:outputPanel layout="block" rendered="{!fields2['Modal Premium'][JSINHTMLENCODE(policyType)] }">
                              <div class="bs informationPanelItem"> -->
                                <!-- JR1797 add last mode premium to avoid confusion to current mode premium -->
                                <!-- <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Modal_Premium}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> -->
                                  <!-- Rancho_JOBR367_20240513 - update premium display -->
                                  <!-- <apex:outputPanel rendered="{!renewalEligible && policy.renewalNoticeInd == 'Y'}">
                                    {!transField['RenewalNotice'][$Label.Header_Language_Code_Current]}
                                  </apex:outputPanel>
                                  <apex:outputPanel rendered="{!!(renewalEligible && policy.renewalNoticeInd == 'Y')}">
                                    <apex:outputText value="{!IF(policy.paymentAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                      <apex:param value="{!policy.paymentAmt}"/>
                                    </apex:outputText>
                                  </apex:outputPanel>
                                </div> 
                              </div>
                            </apex:outputPanel> -->
                                                       
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Paid to Date'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Paid_to_Date}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <!--<apex:outputText value="{!payment.paidToDate}"/>-->
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!payment.paidToDateInDate}"/>
                                  </apex:OutputText>

                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <!-- JR1797 add last mode premium to avoid confusion to current mode premium -->
                           <apex:outputPanel layout="block" rendered="{!fields2['Last Modal Premium'][JSINHTMLENCODE(policyType)] }">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Last_Modal_Premium}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!IF(policy.lastPaymentAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                    <apex:param value="{!policy.lastPaymentAmt}"/>
                                  </apex:outputText>
                                </div> 
                              </div>
                            </apex:outputPanel>
                            
                            <!-- 20200610 - minghua - levyII -->
                            <apex:outputPanel layout="block" rendered="{!contains(transKey,'~Levy_Current_Premium~')}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-7 col-sm-3 field-label">{!transField['Levy_Current_Premium'][$Label.Header_Language_Code_Current]}</div>
                                <div class="bs col-xs-5 col-sm-3 field-value">
                                  <apex:outputPanel rendered="{!policy.effectiveLevy}">
                                    <apex:outputText value="{!IF(policy.levyCurrentPremium == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                      <apex:param value="{!policy.levyCurrentPremium}"/>
                                    </apex:outputText>
                                  </apex:outputPanel>
                                  <apex:outputPanel rendered="{!!policy.effectiveLevy}">
                                    NA
                                  </apex:outputPanel>
                                  <!-- <apex:outputText value="{!IF(policy.effectiveLevy,'','NA')}"></apex:outputText> -->
                                </div> 
                              </div>
                            </apex:outputPanel>
                            <apex:outputPanel layout="block" rendered="{!contains(transKey,'~Levy_Current_Premium_Including_Levy~')}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-7 col-sm-3 field-label">{!transField['Levy_Current_Premium_Including_Levy'][$Label.Header_Language_Code_Current]}</div>
                                <div class="bs col-xs-5 col-sm-3 field-value">
                                  <apex:outputPanel rendered="{!policy.effectiveLevy}">
                                    <apex:outputText value="{!IF(policy.currentPremiumIncludeLevy == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                      <apex:param value="{!policy.currentPremiumIncludeLevy}"/>
                                    </apex:outputText>
                                  </apex:outputPanel>
                                  <apex:outputPanel rendered="{!!policy.effectiveLevy}">
                                    NA
                                  </apex:outputPanel>
                                </div> 
                              </div>
                            </apex:outputPanel>

                            <apex:outputPanel layout="block" rendered="{!fields2['Broker Company'][JSINHTMLENCODE(policyType)] && fields2['individual'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Company}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value">
                                    <apex:outputText value="{!policy.broker.organization.fullname}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                           
                            <apex:outputPanel layout="block" rendered="{!fields2['Broker Contact Person'][JSINHTMLENCODE(policyType)] && fields2['individual'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Contact_Person}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.broker.fullname}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Broker Contact No.'][JSINHTMLENCODE(policyType)] && fields2['individual'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Broker_Contact_No}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.broker.businessPhoneNo}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Policy Period'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Period}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!policy.effDateInDate}"/>
                                  </apex:OutputText>
                                  {!$Label.Pol_to}  
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!policy.termDateInDate}"/>
                                  </apex:OutputText>

                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['No. of Employees'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_No_of_Employees}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.numberofEmployees}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['No. of Spouse'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_No_of_Spouse}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.numberofSpouse}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['No. of Children'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_No_of_Children}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.numberofChildren}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <!--
                            <apex:outputPanel layout="block" rendered="{!fields2['Valid Until'][policyType]}">
                                <div class="bs col-xs-12 col-lg-6">    
                                    <label  class="bs col-xs-6 col-lg-6 field-label">{!$Label.Pol_Valid_Until}</label> <apex:outputText styleclass="col-lg-6">{!policy.validUntil}</apex:outputText>
                                </div>
                            </apex:outputPanel>
                            -->
                              <!--junda add 20201214-->
                              <div class="bs informationPanelItem" STYLE="{!IF(policy.isDisplayTooltip, '', 'display:none')}">
                                  <div class="bs col-xs-12 col-sm-12 field-value cigna-fg-blue-medium">
                                      <apex:outputText value="*{!$Label.Policy_Tooltip}"/>
                                  </div>
                              </div>
                              <!--junda add end-->
                          </apex:outputPanel>
                          <!-- Non Group End -->

                          <!-- Group -->
                          <apex:outputPanel layout="block" rendered="{!JSINHTMLENCODE(policyType) == 'Group'}">
                            <apex:outputPanel layout="block" rendered="{!fields2['Policy No.'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_No}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.policyNumber}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Plan Type'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Plan_Type}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.marketingName}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!fields2['Policy Holder'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Holder}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.holder.fullName}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            <!--
                            <apex:outputPanel layout="block" rendered="{!fields2['Valid Until'][policyType]}">
                                <div class="bs col-xs-12 col-lg-6">    
                                    <label  class="bs col-xs-6 col-lg-6 field-label">{!$Label.Pol_Valid_Until}</label> <apex:outputText styleclass="col-lg-6">{!policy.validUntil}</apex:outputText>
                                </div>
                            </apex:outputPanel> 
                            -->

                            <apex:outputPanel layout="block" rendered="{!fields2['Policy Status'][JSINHTMLENCODE(policyType)] }">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Status}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.policyStatusDisplayName }"/>
                                    <!--junda add 20201202-->
                                    <!--<i class="fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="{!$Label.Policy_Tooltip}" aria-hidden="true" STYLE="{!IF(policy.isDisplayTooltip, '', 'display:none')}"></i>-->
                                    <i class="bs cigna-fg-blue-medium field-value" STYLE="{!IF(policy.isDisplayTooltip, '', 'display:none')}">*</i>
                                    <!--junda add end-->
                                </div>
                              </div>
                            </apex:outputPanel>
                              <!--junda add 20201201-->
                              <script>
                                $('[data-toggle="tooltip"]').tooltip();
                              </script>
                              <!--junda add end-->

                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Policy Period'][JSINHTMLENCODE(policyType)]}">
                               <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Period}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!policy.effDateInDate}"/>
                                  </apex:OutputText>
                                  &nbsp;{!$Label.Pol_to}&nbsp;  
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!policy.termDateInDate}"/>
                                  </apex:OutputText>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['No. of Employees'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_No_of_Employees}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.numberofEmployees}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['No. of Spouse'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_No_of_Spouse}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.numberofSpouse}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['No. of Children'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_No_of_Children}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.numberofChildren}"/>
                                </div>
                              </div>
                            </apex:outputPanel>

                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Currency'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Currency}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.currencyCodeDesc}"/>
                                </div>
                              </div>
                            </apex:outputPanel>

                            <apex:outputPanel layout="block" rendered="{!fields2['Payment Mode'][JSINHTMLENCODE(policyType)]}">
                              <div class="bs informationPanelItem">
                                <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Payment_Mode}</div>
                                <div class="bs col-xs-6 col-sm-3 field-value"> 
                                  <apex:outputText value="{!policy.paymentMode}"/>
                                </div>
                              </div>
                            </apex:outputPanel>
                              <!--junda add 20201214-->
                              <div class="bs informationPanelItem" STYLE="{!IF(policy.isDisplayTooltip, '', 'display:none')}">
                                  <div class="bs col-xs-12 col-sm-12 field-value cigna-fg-blue-medium">
                                      <apex:outputText value="*{!$Label.Policy_Tooltip}"/>
                                  </div>
                              </div>
                              <!--junda add end-->
                          </apex:outputPanel>
                          <!-- Group End-->                               
                        </div>
                      </div>
                        
                      <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['group'][JSINHTMLENCODE(policyType)]}">
                        <div class="bs panel two-column-table minor-panel">
                          <div id="policyBrokerInformationPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                              {!$Label.Pol_Policy_broker_Information}
                             <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                          </div>
                          
                          <div id="policyBrokerInformationPanel" class="bs panel-body two-column-table-body  form-toggle-content"  style="display:none;">
                              <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Broker Name'][JSINHTMLENCODE(policyType)] && fields2['group'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs policyBrokerInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Name}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value"> 
                                    <apex:outputText value="{!policy.broker.organization.fullname}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                          
                              <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Broker Contact Person'][JSINHTMLENCODE(policyType)] && fields2['group'][JSINHTMLENCODE(policyType)]}">
                                  <div class="bs policyBrokerInformationPanelItem">
                                    <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Contact_Person}</div>
                                    <div class="bs col-xs-6 col-sm-3 field-value"> 
                                      <apex:outputText value="{!policy.broker.fullname}"/>
                                    </div>
                                  </div>
                              </apex:outputPanel>
                             
                              <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Broker Contact No.'][JSINHTMLENCODE(policyType)] && fields2['group'][JSINHTMLENCODE(policyType)]}">
                                  <div class="bs policyBrokerInformationPanelItem">
                                    <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Contact_No}</div>
                                    <div class="bs col-xs-6 col-sm-3 field-value"> 
                                      <apex:outputText value="{!policy.broker.businessPhoneNo}"/>
                                    </div>
                                  </div>
                              </apex:outputPanel>
                          
                              <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isBrokerUser) && fields2['Broker Code'][JSINHTMLENCODE(policyType)] && fields2['group'][JSINHTMLENCODE(policyType)]}">
                                 <div class="bs policyBrokerInformationPanelItem">
                                    <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Code}</div>
                                    <div class="bs col-xs-6 col-sm-3 field-value"> 
                                      <apex:outputText value="{!policy.broker.organization.orgCode}"/>
                                    </div>
                                  </div>
                              </apex:outputPanel>
                          </div>
                        </div>
                      </apex:outputPanel>
                         
                      <apex:outputPanel layout="block" rendered="{!fields2['individual'][JSINHTMLENCODE(policyType)]}">
                          <div class="bs panel two-column-table minor-panel">
                            <div id="policyHolderInformationPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                                {!$Label.Pol_Policy_holder_Information}
                               <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                            </div>

                            <div id="policyHolderInformationPanel" class="bs panel-body two-column-table-body form-toggle-content" style="display:none;">
                              <apex:outputPanel layout="block" rendered="{!fields2['Policyholder'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs policyHolderInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policy_Holder}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value"> 
                                    <apex:outputText value="{!holder.fullName}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                                 
                              <apex:outputPanel layout="block" rendered="{!fields2['Gender'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs policyHolderInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Gender}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value"> 
                                    <apex:outputText value="{!holder.gender}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                              
                              <apex:outputPanel layout="block" rendered="{!fields2['Date of Birth'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs policyHolderInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Date_of_Birth}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value"> 
                                    <!--<apex:outputText value="{!holder.birthDate}"/>-->
                                    <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!holder.birthDateInDate}"/>
                                    </apex:OutputText>
                                  </div>
                                </div>
                              </apex:outputPanel>
                              
                              <apex:outputPanel layout="block" rendered="{!fields2['Policyholder ID/Passport No'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs policyHolderInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Policyholder_ID_Passport_No}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value"> 
                                    <apex:outputText value="{!holder.ssnNumber}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>

                              <!-- 20200306 - minghua - ILAS -->
                              <apex:outputPanel layout="block" rendered="{!fields2['RPQ Status'][JSINHTMLENCODE(policyType)] && isILAS}">
                                <div class="bs policyHolderInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.ILAS_RPQ_Status}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value"> 
                                    <apex:outputText value="{!holder.rPQStatus}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                              <apex:outputPanel layout="block" rendered="{!fields2['RPQ Effective Date'][JSINHTMLENCODE(policyType)] && isILAS}">
                                <div class="bs policyHolderInformationPanelItem">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.ILAS_RPQ_Effective_Date}</div>
                                  <div class="bs col-xs-6 col-sm-3 field-value">
                                    <apex:OutputText value="{0,date,dd/MM/yyyy}" escape="false">
                                      <apex:Param value="{!holder.rPQEffectiveDate}"/>
                                    </apex:OutputText>
                                  </div>
                                </div>
                              </apex:outputPanel>

                            </div>
                          </div>
                            
                          <div class="bs panel two-column-table minor-panel">
                            <div id="contactInformationPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                                {!$Label.Pol_Contact_Information}
                               <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                            </div>

                            <div id="contactInformationPanel" class="bs panel-body two-column-table-body form-toggle-content" style="display:none;">
                              <apex:outputPanel layout="block" rendered="{!fields2['Contact Number'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs row">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Contact_Number}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value"> 
                                    <apex:outputText value="{!holder.mobilePhoneNo}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                              
                              <apex:outputPanel layout="block" rendered="{!fields2['Email'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs row ">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Email}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value">
                                    <apex:outputText value="{!holder.emailAddress}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                              <apex:outputPanel layout="block" rendered="{!fields2['Correspondence Address'][JSINHTMLENCODE(policyType)]}">
                                <div class="bs row">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Correspondence_Address}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value">
                                    <apex:outputText value="{!policy.holder.fullAddress}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                            </div>                          
                          </div>
                            
                          <div class="bs panel two-column-table minor-panel">
                            <div id="personInsuredPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                              {!$Label.Pol_Person_s_Insured}
                              <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                            </div>

                            <div id="personInsuredPanel" class="bs panel-body two-column-table-body table-panel-body form-toggle-content" style="display:none;">
                              <div class ="bs row">
                                <div class="bs col-md-12 col-sm-12 form-field">
                                  <table class="bs table" id="policyTable">
                                    <tbody class="hidden-xs">
                                      <tr class="bs table-header-row">
                                        <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Gender'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Gender}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Date of Birth'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Date_of_Birth} </td>
                                        <td class="bs field-label" style="{!IF(fields2['Package'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured_ID_Passport_No}</td>
                                      </tr>

                                      <apex:variable value="{!1}" var="rowNum" />
                                      <apex:repeat value="{!insuredList}" var="insure">
                                        <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!insure.fullName}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Gender'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!insure.gender}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Date of Birth'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!insure.birthDate}-->
                                              <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                <apex:Param value="{!insure.birthDateInDate}"/>
                                            </apex:OutputText>
                                          </td>
                                          <td class="bs field-value" style="{!IF(fields2['Person Insured ID/Passport No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!insure.ssnNumber}</td>
                                        </tr>
                                        <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                      </apex:repeat>
                                    </tbody>
                                    <tbody class="bs visible-xs hidden-sm hidden-md col-sm-12 col-xs-12">
                                      <apex:repeat value="{!insuredList}" var="insure">
                                          <apex:variable value="{!1}" var="rowNum" />
                                          <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured}</td>
                                            <td class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!insure.fullName}</td>
                                          </tr>
                                          <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs field-label" style="{!IF(fields2['Gender'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Gender}</td>
                                            <td class="bs field-value" style="{!IF(fields2['Gender'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!insure.gender}</td>
                                          </tr>
                                          <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs field-label" style="{!IF(fields2['Date of Birth'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Date_of_Birth}</td>
                                            <td class="bs field-value" style="{!IF(fields2['Date of Birth'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!insure.birthDate}-->
                                                <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                    <apex:Param value="{!insure.birthDateInDate}"/>
                                                </apex:OutputText>
                                            </td>
                                          </tr>
                                          <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs field-label" style="{!IF(fields2['Person Insured ID/Passport No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured_ID_Passport_No}</td>
                                            <td class="bs field-value" style="{!IF(fields2['Person Insured ID/Passport No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!insure.ssnNumber}</td>
                                          </tr>
                                          <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                      </apex:repeat>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                          
                          <!-- BEGIN HKITSFDC-148 -->
                          <!-- Altruist or Non Altruist-->
                          <div class="bs panel two-column-table minor-panel">
                            <div id="serviceProviderPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                                <!--{!$Label.Pol_Contact_Information}-->
                                {!$Label.Pol_Service_Provider}
                               <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                            </div>

                            <div id="serviceProviderPanel" class="bs panel-body two-column-table-body form-toggle-content" style="display:none;">
                              <apex:outputPanel layout="block">
                                <div class="bs row">
                                  <div class="bs col-xs-6 col-sm-3 field-label">
                                    <apex:outputText rendered="{!!isAltruistAdmin}" value="{!$Label.Pol_Broker_Company}"/>
                                    <apex:outputText rendered="{!isAltruistAdmin}" value="{!$Label.Pol_Servicing_Agent_Name}"/>
                                  </div>
                                  <div class="bs col-xs-6 col-sm-9 field-value"> 
                                    <apex:outputText rendered="{!!isAltruistAdmin}" value="{!policy.broker.organization.fullname}"/>
                                    <apex:outputText rendered="{!isAltruistAdmin}" value="{!policy.broker.fullName}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>
                              
                              <apex:outputPanel layout="block" rendered="{!isAltruistAdmin}">
                                <div class="bs row ">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Last_Agent}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value">
                                    <apex:outputText value="{!policy.lastAgent}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>

                              <apex:outputPanel layout="block" rendered="{!isAltruistAdmin}">
                                <div class="bs row">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Writing_Agent}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value">
                                    <apex:outputText value="{!policy.writingAgent}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>

                              <apex:outputPanel layout="block" rendered="{!!isAltruistAdmin}">
                                <div class="bs row">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Broker_Code}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value">
                                    <apex:outputText value="{!policy.broker.organization.orgCode}"/>
                                  </div>
                                </div>
                              </apex:outputPanel>

                              <apex:outputPanel layout="block">
                                <div class="bs row">
                                  <div class="bs col-xs-6 col-sm-3 field-label">{!$Label.Pol_Change_Date}</div>
                                  <div class="bs col-xs-6 col-sm-9 field-value">
                                    <apex:outputText value="{0,date,yyyy-MM-dd}" rendered="{! NOT(ISNULL(policy.brokerChangeDate))}">
                                      <apex:param value="{!policy.brokerChangeDate}"/>
                                    </apex:outputText>
                                      <apex:outputText value="{!$Label.Pol_Na}" rendered="{! ISNULL(policy.brokerChangeDate)}"/>  
                                  </div>
                                </div>
                              </apex:outputPanel>
                            </div>                          
                          </div>
                          <!-- END HKITSFDC-148 -->

                          <apex:outputPanel layout="block" rendered="{!fields2['Beneficiary'][JSINHTMLENCODE(policyType)]}">
                            <div class="bs panel two-column-table minor-panel">
                              <div id="beneficiaryPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                                  {!$Label.Pol_Beneficiary_List}
                                 <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                              </div>
                              <div id="beneficiaryPanel" class="bs panel-body table-responsive table-panel-body form-toggle-content" style="display:none;">
                                <div class ="bs row">
                                  <div class="bs col-md-12 col-sm-12 form-field">
                                    <table class="bs table">
                                      <thead>
                                        <tr class="table-header-row">
                                          <td class="bs field-label" style="{!IF(fields2['Beneficiary'][JSINHTMLENCODE(policyType)],'','display:none')}">#</td>
                                          <td class="bs field-label" style="{!IF(fields2['Beneficiary'][JSINHTMLENCODE(policyType)],'','display:none')}">{!$Label.Pol_Beneficiary}</td>
                                        </tr>
                                      </thead>
                                      <tbody>
                                          <apex:variable var="personIndex" value="{!1}" /> 
                                          <apex:repeat value="{!beneficiaryList}" var="b">
                                            <tr class="bs {!IF(MOD(personIndex,2)==1,'grey-background','')}">
                                              <td class="bs field-value" style="{!IF(fields2['Beneficiary'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!personIndex}</td>
                                              <td class="bs field-value" style="{!IF(fields2['Beneficiary'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!b.fullName}</td>
                                            </tr>
                                            <apex:variable var="personIndex" value="{!personIndex + 1}" /> 
                                          </apex:repeat>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </apex:outputPanel>
                                                       
                          <!-- 
                          <apex:outputPanel layout="block" rendered="{!policyDocList.size>0 && fields2['Policy Doc'][policyType]}">
                            <div class="bs panel panel-default col-xs-12 two-column-table">
                              
                                  <div id="policyDocumentPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer ">
                                      {!$Label.Pol_Policy_Documents}  
                                     <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                                  </div>
                                  <div id="policyDocumentPanel" class="bs collapse panel-body form-toggle-content">
                                    <apex:repeat id="policyDocList" value="{!policyDocList}" var="myList">
                                       <p style="padding: 10px 0px;">
                                          <apex:commandLink action="{!getDoc}" target="_blank">
                                              {!myList.attachmentType}
                                              <apex:param assignTo="{!TargetFileName}" id="TargetFileName" name="TargetFileName" value="{!myList.fileName}" />
                                          </apex:commandLink>
                                       </p>
                                    </apex:repeat>
                                  </div>
                            </div>
                          </apex:outputPanel>-->

                          <!-- Rancho_JOBR340_20231107 - guide customer to VAS user guild & Hospital list -->
                          <apex:outputPanel layout="block" rendered="{!displayOtherProductDoc}">
                            <div class="bs panel panel-default col-xs-12 two-column-table">
                              <div id="OtherPolicyDocPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer ">
                                {!transField['Pol_Other_Product_Doc'][$Label.Header_Language_Code_Current]}
                                <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                              </div>
                              <div id="OtherPolicyDocPanel" class="bs col-xs-12 col-sm-12 collapse panel-body form-toggle-content" style="margin-left: 15px;">
                                <div class="bs row form-field">
                                  <a class="bs btn product-doc-btn cigna-fg-white desktop-action-btn col-xs-11 col-sm-4 col-md-4" target="_blank" href="{!transField['Value_added_services_Customer_Guide_URL'][$Label.Header_Language_Code_Current]}">
                                    {!transField['Value_added_services_Customer_Guide'][$Label.Header_Language_Code_Current]}
                                  </a>
                                  <a class="bs btn product-doc-btn cigna-fg-white desktop-action-btn col-xs-11 col-sm-4 col-md-4" target="_blank" href="{!transField['List_of_Designated_Mainland_Hospital_URL'][$Label.Header_Language_Code_Current]}">
                                    {!transField['List_of_Designated_Mainland_Hospital'][$Label.Header_Language_Code_Current]}
                                  </a>
                                </div>
                              </div>
                            </div>
                          </apex:outputPanel>
                          <script>
                              $("#OtherPolicyDocPanelHeader").on("click",function() {
                                  $("#OtherPolicyDocPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                              });
                          </script> 
                                                 
                          <!-- efulfillment enhanced added start -->
                          <apex:actionFunction action="{!switchCorList}" 
                                    name="switchCorList" 
                                    namespace="PolicyDetailAF" reRender="corDocCtn" status="loader-icon" 
                                    oncomplete="refreshFileNameANDDownload();"/> 
                          <apex:actionFunction action="{!switchDocList}" 
                                    name="switchDocList" 
                                    namespace="PolicyDetailAF" reRender="docCtn" status="loader-icon" 
                                    oncomplete="refreshFileNameANDDownload();"/>                       
                          


                          


                          <!-- New Doc -->
                          <apex:outputPanel id="indDocPanel" >
                          <apex:outputPanel layout="block" rendered="{!policyDocList.size>0 && fields2['Policy Doc'][JSINHTMLENCODE(policyType)] }">
                            <div class="bs panel panel-default col-xs-12 two-column-table">
                              
                                  <div id="NewPolicyDocumentPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer ">
                                      {!$Label.Pol_Policy_Documents}
                                     <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                                  </div>
                                  <div id="NewPolicyDocumentPanel" class="bs col-xs-12 col-sm-12 collapse panel-body form-toggle-content" >
                                    <apex:outputPanel layout="block" id="docCtn">
                                          <apex:SelectList id="selectedDocYear" size="1" value="{!docSelectedYear}" styleClass="bs form-field-style-select cigna-fg-gray-dark " style="font-size:1em; height:35px; width:auto !important;" onchange="PolicyDetailAF.switchDocList();" >
                                            <apex:selectOptions value="{!docYearList}"/>            
                                          </apex:SelectList>
                                          <br/><br/>
                                          <apex:outputPanel id="polDocList">
                                          <apex:variable var="tmpIdx" value="{!0}" />  
                                            <apex:repeat id="curDocList" value="{!curDocList}" var="myList">
                                                <apex:outputPanel rendered="{!isBrokerUser}">   
                                                    <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;' onclick="showLoading();PolicyDetailAF.downloadDocument('{!myList.attachmentKey}');">    
                                                        <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}">
                                                                <div class="fw-icon">
                                                                  <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                                </div>
                                                                <div class="fw-filename">
                                                                  <span class='txt-filename'>{!myList.Description}</span><br/>
                                                                  <span style='font-size: 12px !important;color:gray'>{!myList.createdDateStrDisp}</span>    
                                                                </div>     
                                                                 
                                                        </div>                                                     
                                                   </div>
                                                </apex:outputPanel> 
                                                <apex:outputPanel rendered="{!!isBrokerUser}">     
                                                    <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;'>
                                                       <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" data-brkatt="{!indDocAttIDList[tmpIdx]}"  >
                                                                <div class="fw-icon">
                                                                  <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                                </div>
                                                                <div class="fw-filename">
                                                                  <span class='txt-filename'>{!myList.Description}</span><br/>
                                                                  <span style='font-size: 12px !important;color:gray'>{!myList.createdDateStrDisp}</span>    
                                                                </div>     
                                                                 
                                                        </div>                                                     
                                                   </div>
                                               </apex:outputPanel> 
                                           <div style='display:none;'>
                                            <apex:outputPanel rendered="{!!isBrokerUser}"><a id="dlink_{!indDocAttIDList[tmpIdx]}" href="{!downloadSitePrefix}apex/ComFileDownLoadVFP?lang={!curLang}&attID={!indDocAttIDList[tmpIdx]}&attKey={!myList.attachmentKey}&pol={!JSINHTMLENCODE(policyNumber)}&appName=CUSTOMER_PORTAL"  target="_blank"></a></apex:outputPanel>
                                            <apex:variable var="tmpIdx" value="{!tmpIdx+1}" />  
                                          </div>
                                          </apex:repeat>
                                        </apex:outputPanel>
                                        <apex:outputPanel id="polDocListNotFound" rendered="{!curDocList.size==0}">
                                          <div class='bs col-xs-12 col-sm-12 ' >
                                            {!$Label.EFM_No_documents}
                                          </div>
                                      </apex:outputPanel>
                                    </apex:outputPanel>
                                  </div>
                            </div>
                            <script>
                              //CR-56_Link_20220214
                                $("#NewPolicyDocumentPanelHeader").on("click",function() {
                                    $("#NewPolicyDocumentPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                                });                            
                                //refreshFileNameANDDownload();
                            </script> 
                          </apex:outputPanel>
                          
                          </apex:outputPanel> 


                          
                          <apex:outputPanel id="indCorDocPanel" >
                          <apex:outputPanel layout="block" rendered="{!corDocList.size>0 && fields2['Policy Correspondence'][JSINHTMLENCODE(policyType)] }">
                            <div class="bs panel panel-default col-xs-12 two-column-table">
                              
                                  <div id="CorrespondencePanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer ">
                                      {!$Label.efulfillment_policy_correspondences}
                                     <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                                  </div>
                                  <div id="CorrespondencePanel" class="bs col-xs-12 col-sm-12 collapse panel-body form-toggle-content" >
                                    <apex:outputPanel layout="block" id="corDocCtn">
                                          <apex:SelectList id="selectedCorDocYear" size="1" value="{!selectedYear}" styleClass="bs form-field-style-select cigna-fg-gray-dark " style="font-size:1em; height:35px; width:auto !important;" onchange="PolicyDetailAF.switchCorList();" >
                                            <apex:selectOptions value="{!yearList}"/>            
                                          </apex:SelectList>
                                          <br/><br/>
                                          <apex:outputPanel id="polCorList" rendered="{!curCorDocList.size>0}">
                                          <apex:variable var="tmpIdx" value="{!0}" />  
                                            <apex:repeat id="curCorDocList" value="{!curCorDocList}" var="myList">
                                                <apex:outputPanel rendered="{!isBrokerUser}">   
                                                    <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;' onclick="showLoading();PolicyDetailAF.downloadDocument('{!myList.attachmentKey}');">    
                                                        <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" >
                                                                <div class="fw-icon">
                                                                  <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                                </div>
                                                                <div class="fw-filename">
                                                                  <span class='txt-filename'>{!myList.Description}</span><br/>
                                                                  <span style='font-size: 12px !important;color:gray'>{!myList.createdDateStrDisp}</span>    
                                                                </div>     
                                                                 
                                                        </div>                                                     
                                                   </div>
                                                </apex:outputPanel> 
                                                <apex:outputPanel rendered="{!!isBrokerUser}">     
                                                    <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;'>
                                                       <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" data-brkatt="{!indCorsAttIDList[tmpIdx]}"  >
                                                                <div class="fw-icon">
                                                                  <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                                </div>
                                                                <div class="fw-filename">
                                                                  <span class='txt-filename'>{!myList.Description}</span><br/>
                                                                  <span style='font-size: 12px !important;color:gray'>{!myList.createdDateStrDisp}</span>    
                                                                </div>     
                                                                 
                                                        </div>                                                     
                                                   </div>
                                               </apex:outputPanel> 
                                           <div style='display:none;'>
                                            <apex:outputPanel rendered="{!!isBrokerUser}"><a id="dlink_{!indCorsAttIDList[tmpIdx]}" href="{!downloadSitePrefix}apex/ComFileDownLoadVFP?lang={!curLang}&attID={!indCorsAttIDList[tmpIdx]}&attKey={!myList.attachmentKey}&pol={!JSINHTMLENCODE(policyNumber)}&appName=CUSTOMER_PORTAL"  target="_blank"></a></apex:outputPanel>
                                            <apex:variable var="tmpIdx" value="{!tmpIdx+1}" />  
                                          </div>
                                          </apex:repeat>
                                        </apex:outputPanel>
                                        <apex:outputPanel id="polCorListNotFound" rendered="{!curCorDocList.size==0}">
                                          <div class='bs col-xs-12 col-sm-12 ' >
                                            {!$Label.EFM_No_documents}
                                          </div>
                                      </apex:outputPanel>
                                    </apex:outputPanel>
                                  </div>
                            </div>
                            <script>
                              // CR-56_Link_20220214
                              $("#CorrespondencePanelHeader").on("click",function() {
                                 $("#CorrespondencePanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                              });
                              //refreshFileNameANDDownload();
                              $("#CorrespondencePanelHeader").trigger('click');
                            </script> 
                          </apex:outputPanel>
                          
                          </apex:outputPanel>                                                                                                        
                          <!-- efulfillment enhanced added end -->                          
                      </apex:outputPanel>
                    </div>

                    <script>
                      // CR-56_Link_20220214
                      $("#policyBrokerInformationPanelHeader").on("click",function() {
                          $("#policyBrokerInformationPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });
                      
                      $("#policyHolderInformationPanelHeader").on("click",function() {
                          $("#policyHolderInformationPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });
                      
                      $("#contactInformationPanelHeader").on("click",function() {
                          $("#contactInformationPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });
                      //BEGIN HKITSFDC-148
                      $("#serviceProviderPanelHeader").on("click",function() {
                        $("#serviceProviderPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });
                      //END HKITSFDC-148
                      
                      $("#personInsuredPanelHeader").on("click",function() {
                          $("#personInsuredPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });
                      
                       $("#beneficiaryPanelHeader").on("click",function() {
                          $("#beneficiaryPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });
                      
                      $("#policyDocumentPanelHeader").on("click",function() {
                          $("#policyDocumentPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                      });

                      Cigna.PolicyDetail.setRow('informationPanelItem');
                      Cigna.PolicyDetail.setRow('policyBrokerInformationPanelItem');
                      Cigna.PolicyDetail.setRow('policyHolderInformationPanelItem');

                      $(".form-toggle-tab").trigger('click');

                    </script>
                  </apex:outputPanel>
                  <!----Policy Information End---->

                  <!-- Fund Porfolio Start-->
                  <div id="FundPortfolio" class="bs tab-pane">

                    <apex:outputPanel id="FundPortfolioApex" layout="block" rendered="{!isILAS}">
                      <!-- 20200306 - minghua - ILAS -->
                      <a class="onclick-pointer" onclick="showILASPanl();">{!$Label.ILAS_Cigna_Funds_Risk_Level_Table}</a>

                      <div class="bs panel two-column-table">
                        <div class="bs panel-body two-column-table-body">
                          <div id="fundPortfolioDiv" class="bs">
                            <div class="bs form-field">
                                <!-- Donut Chart -->
                                <div class="bs row" style="{!IF(hideChart,'display:none;','')}">
                                  <div class="col-xs-12 form-field" >
                                      <apex:outputPanel layout="block" styleClass="bs col-xs-12 col-sm-6 col-sm-offset-3 col-md-4 col-sm-offset-4 chart-center-div " style="padding-right: 0px;padding-left: 0px;">
                                          <canvas id="chart-fund-perf" width="200" height="200"></canvas>
                                      </apex:outputPanel>
                                  </div>
                                </div>

                                <apex:outputPanel layout="block">
                                  <div class="bs fundPortfolioItem">
                                    <div class="bs col-xs-6 col-lg-3 field-label">{!$Label.Pol_Total_Fund_Value}</div>
                                    <div class="bs col-xs-6 col-lg-3 field-value"> 
                                      <apex:outputText value="{!IF(policy.paymentAmt == null ,'','USD')} {0, Number,###,##0.00}">
                                          <apex:param value="{!fundSummary.accountValue}"/>
                                      </apex:outputText>
                                    </div>
                                  </div>
                                </apex:outputPanel>
                                
                                <apex:outputPanel layout="block">
                                  <div class="bs fundPortfolioItem">
                                    <div class="bs col-xs-6 col-lg-3 field-label">{!$Label.Pol_Valuation_Date}</div>
                                    <div class="bs col-xs-6 col-lg-3 field-value"> 
                                      <!--<apex:outputText value="{!fundSummary.valuationDate}"/>-->
                                      
                                      <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                          <apex:Param value="{!fundSummary.valuationDateInDate}"/>
                                      </apex:OutputText>
                                      
                                    </div>
                                  </div>
                                </apex:outputPanel>

                                <div class ="bs row ">
                                  <div class="col-xs-12 form-field field-label">{!$Label.Basic_Plan}</div> 
                                </div>
                                
                                <div class ="bs row hidden-xs">
                                  <!-- Sample Fund 1 -->
                                  <div class="col-md-12 col-sm-12 form-field" >

                                      <apex:repeat value="{!basicFundDetails}" var="b">
                                        <apex:outputPanel rendered="{!b.totValue != 0}">
                                          <div class="cigna-fg-blue-light fontSize14 fundName field-label">{!b.productFullName}</div> 
                                          <div class="bs form-field grey-bottom"> 
                                              <table class = "bs table borderless fundTable">
                                                  <thead>
                                                  <tr class="table-header-row" >
                                                      <th class="bs field-label">{!$Label.Unit}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Unit_Price}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Total}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Exchange_Rate}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Total}</th>
                                                  </tr>
                                                  </thead>
                                                  <tbody>
                                                    <tr class="bs grey-background">
                                                      <td class="bs field-value">
                                                        <apex:outputText value="{0, Number,###,##0.00}">
                                                            <apex:param value="{!b.currNumberUnits}"/>
                                                        </apex:outputText>
                                                      </td>

                                                      <td class="bs field-value"> 
                                                        <apex:outputText value="USD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.unitValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="USD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.totValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="{0, Number,###,##0.00}">
                                                            <apex:param value="{!b.unitValueBuyRate}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="HKD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.totalHKDValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                    </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                        </apex:outputPanel>
                                      </apex:repeat>
                                  </div>
                                </div>

                                <div class ="bs visible-xs hidden-sm hidden-md hidden-lg">
                                    
                                  <apex:repeat value="{!basicFundDetails}" var="b">
                                    <apex:outputPanel rendered="{!b.totValue != 0}">
                                      <div class="bs row cigna-fg-blue-light fontSize14 fundName field-label">
                                        {!b.productFullName}
                                      </div>
                                    
                                      <div class="bs"> 
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Unit}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="{0, Number,###,##0.00}">
                                                  <apex:param value="{!b.currNumberUnits}"/>
                                              </apex:outputText>
                                           </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Unit_Price}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="USD {0, Number,###,##0.00}">
                                                  <apex:param value="{!b.unitValue}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Total}</div>
                                           <div class="col-xs-6 field-value">
                                             <apex:outputText value="USD {0, Number,###,##0.00}">
                                                <apex:param value="{!b.totValue}"/>
                                              </apex:outputText>
                                           </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Exchange_Rate}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="{0, Number,###,##0.00}">
                                                <apex:param value="{!b.unitValueBuyRate}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                            <div class="col-xs-6 field-label">{!$Label.Pol_Total}</div>
                                            <div class="col-xs-6 field-value">
                                              <apex:outputText value="HKD {0, Number,###,##0.00}">
                                                  <apex:param value="{!b.totalHKDValue}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                      </div>
                                    </apex:outputPanel>
                                  </apex:repeat>
                                </div>

                                <hr class="visible-xs" />

                                <div class ="bs row">
                                  <div class="col-sm-12 col-xs-12 form-field field-label">{!$Label.Regular_Additional_Contribution}</div>
                                </div>
                                
                                <div class ="bs row hidden-xs">
                                  <!-- Sample Fund 1 -->
                                  <div class="col-md-12 col-sm-12 form-field" >
                                      <apex:repeat value="{!regularFundDetails}" var="b">
                                        <apex:outputPanel rendered="{!b.totValue != 0}">
                                          <div class="cigna-fg-blue-light fontSize14 fundName field-label">{!b.productFullName}</div> 
                                          <div class="bs form-field grey-bottom"> 
                                              <table class = "bs table borderless fundTable">
                                                  <thead>
                                                  <tr class="table-header-row" >
                                                      <th class="bs field-label">{!$Label.Unit}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Unit_Price}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Total}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Exchange_Rate}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Total}</th>
                                                  </tr>
                                                  </thead>
                                                  <tbody>
                                                    <tr class="bs grey-background">
                                                      <td class="bs field-value">
                                                        <apex:outputText value="{0, Number,###,##0.00}">
                                                            <apex:param value="{!b.currNumberUnits}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value"> 
                                                        <apex:outputText value="USD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.unitValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="USD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.totValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="{0, Number,###,##0.00}">
                                                            <apex:param value="{!b.unitValueBuyRate}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="HKD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.totalHKDValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                    </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                        </apex:outputPanel>
                                      </apex:repeat>
                                  </div>
                                </div>

                                <div class ="bs visible-xs hidden-sm hidden-md hidden-lg">
                                    
                                  <apex:repeat value="{!regularFundDetails}" var="b">
                                    <apex:outputPanel rendered="{!b.totValue != 0}">
                                      <div class="bs row cigna-fg-blue-light fontSize14 fundName field-label">
                                        {!b.productFullName}
                                      </div>
                                    
                                      <div class="bs"> 
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Unit}</div>
                                           <div class="col-xs-6 field-value">
                                                <apex:outputText value="{0, Number,###,##0.00}">
                                                    <apex:param value="{!b.currNumberUnits}"/>
                                                </apex:outputText>
                                           </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Unit_Price}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="USD {0, Number,###,##0.00}">
                                                  <apex:param value="{!b.unitValue}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Total}</div>
                                           <div class="col-xs-6 field-value">
                                             <apex:outputText value="USD {0, Number,###,##0.00}">
                                                <apex:param value="{!b.totValue}"/>
                                              </apex:outputText>
                                           </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Exchange_Rate}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="{0, Number,###,##0.00}">
                                                <apex:param value="{!b.unitValueBuyRate}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                            <div class="col-xs-6 field-label">{!$Label.Pol_Total}</div>
                                            <div class="col-xs-6 field-value">
                                              <apex:outputText value="HKD {0, Number,###,##0.00}">
                                                  <apex:param value="{!b.totalHKDValue}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                      </div>
                                    </apex:outputPanel>
                                  </apex:repeat>
                                </div>

                                <hr class="visible-xs" />

                                <div class ="bs row">
                                  <div class="bs col-sm-12 col-xs-12  field-label form-field ">{!$Label.Single_Additional_Contribution}</div>
                                </div> 
                                
                                <div class ="bs row hidden-xs">
                                  <!-- Sample Fund 1 -->
                                  <div class="col-md-12 col-sm-12 form-field" >
                                      <apex:repeat value="{!singleFundDetails}" var="b">
                                        <apex:outputPanel rendered="{!b.totValue != 0}">
                                          <div class="cigna-fg-blue-light fontSize14 fundName field-label">{!b.productFullName}</div> 
                                          <div class="bs form-field grey-bottom"> 
                                              <table class = "bs table borderless fundTable">
                                                  <thead>
                                                  <tr class="table-header-row" >
                                                      <th class="bs field-label">{!$Label.Unit}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Unit_Price}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Total}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Exchange_Rate}</th>
                                                      <th class="bs field-label">{!$Label.Pol_Total}</th>
                                                  </tr>
                                                  </thead>
                                                  <tbody>
                                                    <tr class="bs grey-background">
                                                      <td class="bs field-value">
                                                        <apex:outputText value="{0, Number,###,##0.00}">
                                                            <apex:param value="{!b.currNumberUnits}"/>
                                                        </apex:outputText>
                                                      </td>

                                                      <td class="bs field-value"> 
                                                        <apex:outputText value="USD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.unitValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="USD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.totValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="{0, Number,###,##0.00}">
                                                            <apex:param value="{!b.unitValueBuyRate}"/>
                                                        </apex:outputText>
                                                      </td>
                                                      <td class="bs field-value">
                                                        <apex:outputText value="HKD {0, Number,###,##0.00}">
                                                            <apex:param value="{!b.totalHKDValue}"/>
                                                        </apex:outputText>
                                                      </td>
                                                    </tr>
                                                  </tbody>
                                              </table>
                                          </div>
                                        </apex:outputPanel>
                                      </apex:repeat>
                                  </div>
                                </div>

                                <div class ="bs visible-xs hidden-sm hidden-md hidden-lg">
                                    
                                  <apex:repeat value="{!singleFundDetails}" var="b">
                                    <apex:outputPanel rendered="{!b.totValue != 0}">
                                      <div class="bs row cigna-fg-blue-light fontSize14 fundName field-label">
                                        {!b.productFullName}
                                      </div>
                                    
                                      <div class="bs"> 
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Unit}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="{0, Number,###,##0.00}">
                                                    <apex:param value="{!b.currNumberUnits}"/>
                                                </apex:outputText>
                                           </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Unit_Price}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="USD {0, Number,###,##0.00}">
                                                  <apex:param value="{!b.unitValue}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Total}</div>
                                           <div class="col-xs-6 field-value">
                                             <apex:outputText value="USD {0, Number,###,##0.00}">
                                                <apex:param value="{!b.totValue}"/>
                                              </apex:outputText>
                                           </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                           <div class="col-xs-6 field-label">{!$Label.Pol_Exchange_Rate}</div>
                                           <div class="col-xs-6 field-value">
                                              <apex:outputText value="{0, Number,###,##0.00}">
                                                <apex:param value="{!b.unitValueBuyRate}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                        <div class="bs row table-content grey-background">
                                            <div class="col-xs-6 field-label">{!$Label.Pol_Total}</div>
                                            <div class="col-xs-6 field-value">
                                              <apex:outputText value="HKD {0, Number,###,##0.00}">
                                                  <apex:param value="{!b.totalHKDValue}"/>
                                              </apex:outputText>
                                            </div>
                                        </div>
                                      </div>
                                    </apex:outputPanel>
                                  </apex:repeat>
                                </div>
                            </div>   
                          </div> 
                        </div>
                      </div>

                      <apex:outputPanel layout="block">
                        <div class="bs panel two-column-table">
                        
                          <div id="fundContributionPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                            {!$Label.Pol_Fund_Contribution}
                            <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                          </div>

                          <div id="fundContributionPanel" class="bs panel-body two-column-table-body"  style="display:none;">

                            <div class ="bs row hidden-xs">
                              <div class="col-md-12 col-sm-12 form-field" >
                                <table class = "bs table borderless fundTable">
                                  <thead>
                                    <tr class="table-header-row"> 
                                        <th class="bs field-label">{!$Label.Pol_Fund_Name}</th>
                                        <th class="bs field-label">{!$Label.Pol_Basic_Plan}</th>
                                        <th class="bs field-label break-word">{!$Label.Pol_Regular_Additional_Fund_Contribution}</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <apex:repeat value="{!fundContList}" var="b">
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                        <td class="bs field-value">{!b.fundName}</td>
                                        <td class="bs field-value">{!b.basicPercentageDisplay}</td>
                                        <td class="bs field-value">{!b.regularPercentageDisplay}</td>
                                      </tr>
                                      <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                    </apex:repeat>
                                  </tbody>
                                </table>
                              </div>
                            </div>

                            <div class ="bs visible-xs hidden-sm hidden-md hidden-lg">
                              <apex:variable value="{!1}" var="rowNum" />
                              <apex:repeat value="{!fundContList}" var="b">
                                <div class="bs">
                                  <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <div class="field-label col-xs-6">
                                        {!$Label.Pol_Fund_Name}
                                      </div>
                                      <div class="field-value col-xs-6">
                                        {!b.fundName}
                                      </div>
                                  </div>
                                  <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                     <div class="field-label col-xs-6">
                                        {!$Label.Pol_Basic_Plan}
                                      </div>
                                     <div class="field-value col-xs-6">
                                        {!b.basicPercentageDisplay}
                                      </div>
                                  </div>
                                  <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                     <div class="field-label col-xs-6">
                                        {!$Label.Pol_Regular_Additional_Fund_Contribution}
                                     </div>
                                     <div class="field-value col-xs-6">
                                        {!b.regularPercentageDisplay}
                                     </div>
                                  </div>
                                </div>
                                 <apex:variable var="rowNum" value="{!rowNum + 1}" />
                              </apex:repeat>
                            </div>
                          </div>

                        </div>
                      </apex:outputPanel>


                      <apex:outputPanel layout="block" rendered="{!fields2['Fund Transactions'][JSINHTMLENCODE(policyType)]}">

                        <apex:actionFunction action="{!fundTxprevPage}" 
                             name="fundTxprevPage" 
                             reRender="fundTxDataApex"
                             status="loader-icon" 
                             oncomplete="Cigna.PolicyDetail.scrollToPanel('fundTxDataApex');"/>

                        <apex:actionFunction action="{!fundTxnextPage}" 
                             name="fundTxnextPage" 
                             reRender="fundTxDataApex"
                             status="loader-icon"
                             oncomplete="Cigna.PolicyDetail.scrollToPanel('fundTxDataApex');"/>

                        <apex:outputPanel id="fundTxDataApex" layout="block" >

                          <div class="bs panel two-column-table">
                          
                            <div id="fundTransactionsPanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                                {!$Label.Pol_Fund_Transactions}
                               <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                            </div>
                            
                            <div id="fundTransactionsPanel" class="bs panel-body two-column-table-body"  style="display:none;">
                              <div class ="bs row hidden-xs">
                                <div class="col-md-12 col-sm-12 form-field" >
                                  <table class = "bs table borderless fundTable">
                                    <thead>
                                      <tr class="table-header-row"> 
                                          <th class="bs field-label">{!$Label.Pol_Transaction_Date}</th>
                                          <th class="bs field-label">{!$Label.Pol_Fund}</th>
                                          <th class="bs field-label break-word">{!$Label.Pol_Unit_Purchased_Redeemed}</th>
                                          <th class="bs field-label">{!$Label.Pol_Unit_Price}</th>
                                          <th class="bs field-label">{!$Label.Pol_Fund_Balance}</th>
                                          <th class="bs field-label">{!$Label.Pol_Exchange_Rate}</th>
                                          <th class="bs field-label">{!$Label.Pol_Fund_Balance}</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <apex:variable value="{!1}" var="rowNum" />
                                      <apex:repeat value="{!fundTransactionMap[fundTransactionPage]}" var="bb">
                                        <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-value"><!--{!b.initPurchaseDate}-->
                                              <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                      <apex:Param value="{!bb.initPurchaseDateInDate}"/>
                                              </apex:OutputText>
                                          </td>
                                          <td class="bs field-value">{!bb.productFullName}</td>
                                          <td class="bs field-value">
                                            <apex:outputText value="{0, Number,###,##0.00}">
                                              <apex:param value="{!bb.payoutUnitValue}"/>
                                            </apex:outputText>
                                          </td>
                                          <td class="bs field-value">
                                             <apex:outputText value="USD {0, Number,###,##0.00}">
                                                <apex:param value="{!bb.unitValue}"/>
                                              </apex:outputText>
                                          </td>
                                          <td class="bs field-value">
                                            <apex:outputText value="USD {0, Number,###,##0.00}">
                                              <apex:param value="{!bb.totValue}"/>
                                            </apex:outputText>
                                          </td>
                                          <td class="bs field-value">
                                            <apex:outputText value="{0, Number,###,##0.00}">
                                              <apex:param value="{!bb.unitValueBuyRate}"/>
                                            </apex:outputText>
                                          </td>
                                          <td class="bs field-value">
                                            <apex:outputText value="HKD {0, Number,###,##0.00}">
                                              <apex:param value="{!bb.totalHKDValue}"/>
                                            </apex:outputText>
                                          </td>
                                        </tr>
                                         <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                      </apex:repeat>
                                    </tbody>
                                  </table>
                                </div>
                              </div>

                              <div class ="bs visible-xs hidden-sm hidden-md hidden-lg">
                                <apex:variable value="{!1}" var="rowNum" />
                                <apex:repeat value="{!fundTransactionMap[fundTransactionPage]}" var="bb">
                                  <div class="bs ">
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <div class="field-label col-xs-6">{!$Label.Pol_Transaction_Date}</div>
                                       <div class="field-value col-xs-6"><!--{!b.initPurchaseDate}-->
                                           <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                          <apex:Param value="{!bb.initPurchaseDateInDate}"/>
                                           </apex:OutputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <div class="field-label col-xs-6">{!$Label.Pol_Fund}</div>
                                       <div class="field-value col-xs-6">{!bb.productFullName}</div>
                                    </div>
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <div class="field-label col-xs-6">{!$Label.Pol_Unit_Purchased_Redeemed}</div>
                                       <div class="field-value col-xs-6">
                                         <apex:outputText value="{0, Number,###,##0.00}">
                                            <apex:param value="{!bb.payoutUnitValue}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <div class="field-label col-xs-6">{!$Label.Pol_Unit_Price}</div>
                                       <div class="field-value col-xs-6">
                                          <apex:outputText value="USD {0, Number,###,##0.00}">
                                            <apex:param value="{!bb.unitValue}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <div class="field-label col-xs-6">{!$Label.Pol_Fund_Balance}</div>
                                       <div class="field-value col-xs-6">
                                          <apex:outputText value="USD {0, Number,###,##0.00}">
                                            <apex:param value="{!bb.totValue}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <div class="field-label col-xs-6">{!$Label.Pol_Exchange_Rate}</div>
                                       <div class="field-value col-xs-6">
                                         <apex:outputText value="{0, Number,###,##0.00}">
                                            <apex:param value="{!bb.unitValueBuyRate}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                        <div class="field-label col-xs-6">{!$Label.Pol_Fund_Balance}</div>
                                        <div class="field-value col-xs-6">
                                          <apex:outputText value="HKD {0, Number,###,##0.00}">
                                            <apex:param value="{!bb.totalHKDValue}"/>
                                          </apex:outputText>
                                        </div>
                                    </div>
                                  </div>
                                   <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                </apex:repeat>
                              </div>

                              <div class="bs row">
                                <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                                  <apex:outputPanel rendered="{!If(fundTransactionTotalPage>1 && fundTransactionhasPrev,true,false)}">
                                  <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="fundTxprevPage();"/>
                                  </apex:outputPanel>

                                  <apex:outputText value="{!$Label.Page_0_of_1}" >
                                    <apex:param value="{!fundTransactionPage}" />
                                    <apex:param value="{!fundTransactionTotalPage}" />
                                  </apex:outputText>

                                  <apex:outputPanel rendered="{!If(fundTransactionTotalPage>1 && fundTransactionhasNext,true,false)}">
                                    <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="fundTxnextPage()"/>
                                  </apex:outputPanel>
                                </div>
                              </div>
                            </div>
                          </div>

                          <script type="text/javascript">
                            // CR-56_Link_20220214
                            $("#fundTransactionsPanelHeader").on("click",function() {
                                $("#fundTransactionsPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                            });

                            $("#fundTransactionsPanelHeader").trigger('click');
                          </script>

                        </apex:outputPanel>
                      </apex:outputPanel>
                      <!--
                      <apex:outputPanel layout="block" rendered="{!fields2['Fund Transactions - Coverage Level'][policyType] && isBrokerUser }">
                        <div class="bs panel two-column-table">                                    
                          <div id="fundTransactionsCoveragePanelHeader" class="bs panel-heading form-toggle-tab onclick-pointer">
                              {!$Label.Pol_Fund_Transactions_Coverage_Level}
                             <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i>
                          </div>

                          <div id="fundTransactionsCoveragePanel" class="bs panel-body two-column-table-body form-toggle-content"  style="display:none;">
                            <div class ="bs row">
                              <div class="bs field-label form-group col-lg-3 col-sm-6 col-xs-6">
                                <select class="bs form-field-style-select cigna-fg-gray-dark">
                                    <option value="HC29432">HC29432</option>
                                </select>
                              </div>
                            </div>

                            <div class ="bs row hidden-xs">
                              <div class="bs col-md-12 col-sm-12 form-field" >
                                <table class = "bs table borderless fundTable" style="margin-bottom:0;">
                                  <thead>
                                    <tr class="table-header-row"> 
                                        <th class="bs field-label">{!$Label.Pol_Coverage_No}</th>
                                        <th class="bs field-label">{!$Label.Pol_Transaction_Type}</th>
                                        <th class="bs field-label">{!$Label.Pol_Valuation_Date}</th>
                                        <th class="bs field-label">{!$Label.Pol_Fund_Code}</th>
                                        <th class="bs field-label">{!$Label.Pol_No_of_Units}</th>
                                        <th class="bs field-label">{!$Label.Pol_Unit_Price}</th>
                                        <th class="bs field-label">{!$Label.Pol_Gross_Amount}</th>
                                        <th class="bs field-label">{!$Label.Pol_Net_Amount}</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td class="bs field-value">HC29432</td>
                                      <td class="bs bs field-value">FAKE</td>
                                      <td class="bs field-value">03/12/2016</td>
                                      <td class="bs field-value">F39JKE</td>
                                      <td class="bs field-value">10</td>
                                      <td class="bs field-value">USD 45</td>
                                      <td class="bs field-value">USD 450</td>
                                      <td class="bs field-value">USD 450</td>
                                    </tr>
                                    <tr>
                                      <td class="field-value">HC29432</td>
                                      <td class="field-value">FAKE</td>
                                      <td class="field-value">03/12/2016</td>
                                      <td class="field-value">F39JKE</td>
                                      <td class="field-value">10</td>
                                      <td class="field-value">USD 45</td>
                                      <td class="field-value">USD 450</td>
                                      <td class="field-value">USD 450</td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>

                            <div class ="bs visible-xs hidden-sm hidden-md hidden-lg">
                              <div>
                                <div class="bs row table-content table-header-row">
                                   <div class="field-label col-xs-6">{!$Label.Pol_Coverage_No}</div>
                                   <div class="field-value col-xs-6">HC29432</div>
                                </div>
                                <div class="bs row table-content">
                                   <div class="field-label col-xs-6">{!$Label.Pol_Transaction_Type}</div>
                                   <div class="field-value col-xs-6">FAKE</div>
                                </div>
                                <div class="bs row table-content">
                                   <div class="field-label col-xs-6">{!$Label.Pol_Valuation_Date}</div>
                                   <div class="field-value col-xs-6">03/12/2016</div>
                                </div>
                                <div class="bs row table-content">
                                   <div class="field-label col-xs-6">{!$Label.Pol_Fund_Code}</div>
                                   <div class="field-value col-xs-6">F39JKE</div>
                                </div>
                                <div class="bs row table-content">
                                   <div class="field-label col-xs-6">{!$Label.Pol_No_of_Units}</div>
                                   <div class="field-value col-xs-6">10</div>
                                </div>
                                <div class="bs row table-content">
                                   <div class="field-label col-xs-6">{!$Label.Pol_Unit_Price}</div>
                                   <div class="field-value col-xs-6">USD 45</div>
                                </div>
                                <div class="bs row table-content">
                                    <div class="field-label col-xs-6">{!$Label.Pol_Gross_Amount}</div>
                                    <div class="field-value col-xs-6">USD 450</div>
                                </div>
                                <div class="bs row table-content">
                                    <div class="field-label col-xs-6">{!$Label.Pol_Net_Amount}</div>
                                    <div class="field-value col-xs-6">USD 450</div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </apex:outputPanel>
                      -->
                      <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'zh_TW'}">
                        <p style = "font-size:0.7em">
                        Remarks:<br/><br/>
                        Please note that investment involves risks and that the value of the investments and the yield from our investment linked insurance plans may go down as well as up as a consequence of the general nature of varied investments and possible exchange or interest rate fluctuations. The fund prices shown above are not indicative of future performance of the plans. These funds are the investment options of several CIGNA Worldwide Life Insurance Company Limited investment linked insurance plans. Please read the fund information in conjunction with the CIGNA Funds brochure and the related principle brochure of related insurance plans.
                        </p>
                      </apex:outputPanel>

                      <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'en_US'}">
                        <p style = "font-size:0.7em">
                        <br/><br/>
                        
                        </p>
                      </apex:outputPanel>

                      <script>
                        

                        // CR-56_Link_20220214
                        $("#fundContributionPanelHeader").on("click",function() {
                            $("#fundContributionPanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                        });


                        $("#fundTransactionsCoveragePanelHeader").on("click",function() {
                            $("#fundTransactionsCoveragePanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                        });

                        function drawChart(){
                          var ChartLabel = new Array();
                          ChartLabel = '{!ChartLabel}';
                          var cLabel = new Array();

                          var j = 0, k = 0;

                          for (var i = 0; i < ChartLabel.length; i++) {
                              if (ChartLabel[i] == ',' || ChartLabel[i] == ']') {
                                  if(j == 0) {
                                      for (var g = 1; g < i; g++) {
                                          if (g == 1) {
                                              cLabel[k] = ChartLabel[g];
                                          }else {
                                              cLabel[k] = cLabel[k] + ChartLabel[g];
                                          }
                                      }
                                      k++; 
                                      j = i;
                                  } else {
                                      for(var g=j+1; g<i; g++){
                                          if(g==j+1) {
                                              cLabel[k] = ChartLabel[g];
                                          }else {
                                              cLabel[k]=cLabel[k]+ChartLabel[g];
                                          }
                                      }
                                      k++; 
                                      j = i;
                                  }
                              }
                          }


                          var ChartData = new Array();
                          ChartData = '{!ChartData}';
                          var cDate = new Array();
                          j = 0;
                          k = 0;

                          for(var i=0; i<ChartData.length; i++) {
                              if(ChartData[i]==',' || ChartData[i]==']'){
                                  if(j == 0) {
                                      for(var g = 1; g < i; g++){
                                          if (g==1) {
                                              cDate[k] = ChartData[g];
                                          } else {
                                              cDate[k]=cDate[k]+ChartData[g];
                                          }
                                      }
                                      k++; 
                                      j=i;
                                  } else {
                                      for(var g=j+1; g<i; g++){
                                          if(g==j+1) {
                                              cDate[k] = ChartData[g];
                                          } else {
                                              cDate[k]=cDate[k]+ChartData[g];
                                          }
                                      }
                                      k++; 
                                      j=i;

                                  } 
                              }
                          }
                          var data = {
                              labels:cLabel,
                              datasets:[{
                                  label:'Unit Price',
                                  data:cDate,
                                  backgroundColor:[
                                                  'rgba(196, 214, 0, 1)',
                                                  'rgba(0, 169, 224, 1)',
                                                  'rgba(241, 180, 52, 1)',
                                                  'rgba(57, 181, 74, 1)',
                                                  'rgba(24, 140, 204, 1)',
                                                  'rgba(246, 134, 33, 1)',
                                                  'rgba(0, 122, 62, 1)',
                                                  'rgba(0, 73, 134, 1)',
                                                  'rgba(227, 82, 5, 1)'
                                                  ],
                                  borderColor:[
                                                  'rgba(196, 214, 0, 1)',
                                                  'rgba(0, 169, 224, 1)',
                                                  'rgba(241, 180, 52, 1)',
                                                  'rgba(57, 181, 74, 1)',
                                                  'rgba(24, 140, 204, 1)',
                                                  'rgba(246, 134, 33, 1)',
                                                  'rgba(0, 122, 62, 1)',
                                                  'rgba(0, 73, 134, 1)',
                                                  'rgba(227, 82, 5, 1)'
                                              ],
                                  borderWidth:1
                              }]
                          };

                          var ctx = $("#chart-fund-perf");
                          var myChart = new Chart(ctx,{
                              type:'doughnut',
                              data:data,
                              options: {
                                  responsive: true,
                                  //scales:{yAxes:[{ticks:{beginAtZero:true}}]}
                                  legend: {
                                      position: 'bottom',
                                      labels: {
                                          fontSize : 10
                                      }
                                  },
                                  tooltips: {
                                      callbacks: {
                                          label: function(tooltipItem, data) {
                                              var dataset = data.datasets[tooltipItem.datasetIndex];
                                              var total = dataset.data.reduce(function(previousValue, currentValue, currentIndex, array) {
                                                  return parseInt(previousValue) + parseInt(currentValue);
                                              });
                                              var currentValue = dataset.data[tooltipItem.index];
                                              var precentage = Math.floor(((currentValue/total) * 100)+0.5);         
                                              return precentage + "%: " + currentValue;
                                          }
                                      }
                                  }
                              }
                          }); 
                        }

                        drawChart();

                        Cigna.PolicyDetail.setRow('fundPortfolioItem');
                        $("#fundTransactionsCoveragePanelHeader, #fundContributionPanelHeader").trigger('click');
                      </script>
                    </apex:outputPanel>
                  </div>
                  <!-- Fund Porfolio End-->

                  <!----Coverage Information Start---->
                  <div id="CoverageInformation" class="bs tab-pane">
                    <apex:outputPanel layout="block" id="CoverageInformationApex" rendered="{!!fields2['group'][JSINHTMLENCODE(policyType)]}">
                      <div class="bs row panel two-column-table">
                        <apex:actionFunction action="{!coverageprevPage}" 
                           name="coverageprevPage" 
                           reRender="coverageResult"
                           status="loader-icon"
                           oncomplete="Cigna.PolicyDetail.scrollToPanel('coverageResult');" />
                       
                        <apex:actionFunction action="{!coveragenextPage}" 
                           name="coveragenextPage" 
                           reRender="coverageResult"
                           status="loader-icon"
                           oncomplete="Cigna.PolicyDetail.scrollToPanel('coverageResult');" />
                               
                        <apex:outputPanel id="coverageResult">
                          <div class="bs panel-body two-column-table-body" >
                            <div class="bs row">
                              <div class="bs col-lg-12">
                                <table class="bs table" id="CoverageTable">
                                  <tbody class="bs hidden-xs ">
                                    <tr class="bs table-header-row">
                                        <td class="bs field-label" style="{!IF(fields2['Benefit'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Sum Insured'][JSINHTMLENCODE(policyType)] && showSumInsured,'','display:none')}" >{!$Label.Pol_Sum_Insured}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)] && showDeductible,'','display:none')}">{!$Label.Pol_Deductible_Amount}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Coverage Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Effective_Date}</td>
                                        <!-- Rancho_JOBR371_20240603 - remove next premium -->
                                        <!-- <td class="bs field-label" style="{!IF(fields2['Total Modal Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Modal_Premium}</td> -->
                                        <td class="bs field-label" style="{!IF(fields2['Additional Fund Contribution Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" >{!$Label.Pol_Additional_Fund_Contribution_Amount}</td>
                                        <!-- Rancho_JOBR381_20240722 - remove annual premium -->
                                        <!-- <td class="bs field-label" style="{!IF(fields2['Annual Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Annual_Premium}</td> -->
                                        <td class="bs field-label" style="{!IF(fields2['AdditionalF Contribution Annual Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" >{!$Label.Pol_Additional_Fund_Contribution_Annual_Amount}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured}</td>
                                        <!-- START HKITSFDC-265 -->
                                        <td class="bs field-label" style="{!IF(fields2['Plan Level'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Plan_Level}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Area Of Cover'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Area_Of_Cover}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Room Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Room_Type}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Deductible_Amount}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Loading (Amount)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Loading_Amount}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Loading (Percentage)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Loading_Percentage}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Loading (Amount Duration)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Loading_Amount_Duration}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Loading (Percentage Duration)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Loading_Percentage_Duration}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Exclusion'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Exclusion}</td>
                                        <!-- END HKITSFDC-265 -->
                                        <td class="bs field-label" style="{!IF(fields2['Maturity/Expiry Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Maturity_Expiry_Date}</td>
                                    </tr>
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <apex:repeat value="{!coverageMap[coveragePage]}" var="c">
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" >
                                          <td class="bs field-value" style="{!IF(fields2['Benefit'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.benefitMarketingName}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Sum Insured'][JSINHTMLENCODE(policyType)] && showSumInsured,'','display:none')}" ><!--{!c.sumInsured}-->
                                              {!IF(c.benefitAmountInNumber == null,'',policy.currencySymbol)}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                  <apex:param value="{!c.benefitAmountInNumber}"/>
                                              </apex:outputText>
                                          </td>
                                          
                                          <td class="bs field-value" style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)] && showDeductible,'','display:none')}">
                                              {!IF(c.deductibleAmount == null,'',policy.currencySymbol)}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                  <apex:param value="{!c.deductibleAmount}"/>
                                              </apex:outputText>
                                          </td>
                                          
                                          <td class="bs field-value" style="{!IF(fields2['Coverage Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.effectiveDate}-->
                                              <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                 <apex:Param value="{!c.effectiveDateInDate}"/>
                                              </apex:OutputText>
                                          </td>
                                          <!-- Rancho_JOBR371_20240603 - remove next premium -->
                                          <!-- <td class="bs field-value" style="{!IF(fields2['Total Modal Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" > -->
                                            <!-- Rancho_JOBR367_20240513 - update premium display -->
                                            <!-- <apex:outputPanel rendered="{!renewalEligible && c.renewalNoticeInd == 'Y'}">
                                              {!transField['RenewalNotice'][$Label.Header_Language_Code_Current]}
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!!(renewalEligible && c.renewalNoticeInd == 'Y')}">
                                              {!IF(c.modalPremium == null,'',policy.currencySymbol)} 
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                  <apex:param value="{!c.modalPremium}"/>
                                              </apex:outputText>
                                            </apex:outputPanel>
                                          </td> -->
                                          <td class="bs field-value" style="{!IF(fields2['Additional Fund Contribution Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" >
                                            <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFC')}"> <!-- Modified by Linus AH20324 --> 
                                              {!policy.currencySymbol}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                <apex:param value="{!c.additionalFundContributionAmountInNumber}"/>
                                              </apex:outputText>
                                            </apex:outputPanel>
                                            <!-- Modified by Linus AH20324 
                                            <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFCS')}">
                                              N/A
                                            </apex:outputPanel>
                                            -->
                                          </td>
                                          <!-- Rancho_JOBR381_20240722 - remove annual premium -->
                                          <!-- <td class="bs field-value" style="{!IF(fields2['Annual Premium'][JSINHTMLENCODE(policyType)],'','display:none')}"> -->
                                            <!-- Rancho_JOBR367_20240513 - update premium display -->
                                            <!-- <apex:outputPanel rendered="{!renewalEligible && c.renewalNoticeInd == 'Y'}">
                                              {!transField['RenewalNotice'][$Label.Header_Language_Code_Current]}
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!!(renewalEligible && c.renewalNoticeInd == 'Y')}">
                                              {!IF(c.annualPremium == null,'',policy.currencySymbol)}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                  <apex:param value="{!c.annualPremium}"/>
                                              </apex:outputText>
                                            </apex:outputPanel>
                                          </td>   -->
                                          <td class="bs field-value" style="{!IF(fields2['AdditionalF Contribution Annual Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" > 
                                            <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFC')}">   <!-- Modified by Linus AH20324 --> 
                                              {!policy.currencySymbol}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                <apex:param value="{!c.additionalFundContributionAnnualAmountInNumber}"/>
                                              </apex:outputText>
                                            </apex:outputPanel>
                                            <!-- Modified by Linus AH20324
                                            <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFCS')}">
                                              N/A
                                            </apex:outputPanel>
                                            -->
                                          </td>
                                          <td class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.insuredName}</td>
                                          <!-- START HKITSFDC-265 -->
                                          <td class="bs field-value" style="{!IF(fields2['Plan Level'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.planLevel}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Area Of Cover'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.AreaOfCover}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Room Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.RoomType}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.deductibleAmount}</td>
                                          <td class="bs field-label" style="{!IF(fields2['Loading (Amount)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.loadingAmount}</td>
                                          <td class="bs field-label" style="{!IF(fields2['Loading (Percentage)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.loadingPercentage}</td>
                                          <td class="bs field-label" style="{!IF(fields2['Loading (Amount Duration)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.loadingAmountDuration}</td>
                                          <td class="bs field-label" style="{!IF(fields2['Loading (Percentage Duration)'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.loadingPercentageDuration}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Exclusion'][JSINHTMLENCODE(policyType)],'','display:none')}">{!c.exclusionList}</td>
                                          <!-- END HKITSFDC-265 -->
                                          <td class="bs field-value" style="{!IF(fields2['Maturity/Expiry Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.maturityexpiryDate}-->
                                            <apex:outputPanel rendered="{!c.termDateInDate != null}">
                                              <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                 <apex:Param value="{!c.termDateInDate}"/>
                                              </apex:OutputText>
                                            </apex:outputPanel>

                                            <apex:outputPanel rendered="{!c.termDateInDate == null}">
                                            N/A
                                            </apex:outputPanel>
                                          </td>
                                      </tr>
                                      <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                    </apex:repeat>
                                  </tbody>
                                
                                  <tbody class="bs visible-xs">
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <apex:repeat value="{!coverageMap[coveragePage]}" var="c">
                                      <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-label" style="{!IF(fields2['Benefit'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Benefit'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.benefitMarketingName}</td>
                                      </tr>
                                      <tr style="{!IF(!showSumInsured,'display:none','')}" class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-label" style="{!IF(fields2['Sum Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Sum_Insured}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Sum Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                              {!IF(c.benefitAmountInNumber == null,'',policy.currencySymbol)}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                    <apex:param value="{!c.benefitAmountInNumber}"/>
                                              </apex:outputText>
                                          </td>
                                      </tr>

                                      <tr style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)] && showDeductible,'','display:none') }" class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-label" style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)] && showDeductible,'','display:none') }" >{!$Label.Pol_Deductible_Amount}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Deductible Amount'][JSINHTMLENCODE(policyType)] && showDeductible,'','display:none')}" >
                                              {!IF(c.deductibleAmount == null,'',policy.currencySymbol)} 
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                   <apex:param value="{!c.deductibleAmount}"/>
                                              </apex:outputText>
                                          </td>
                                      </tr>

                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-label" style="{!IF(fields2['Coverage Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Effective_Date}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Coverage Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                              <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                 <apex:Param value="{!c.effectiveDateInDate}"/>
                                              </apex:OutputText>
                                          </td>
                                      </tr>
                                      <!-- Rancho_JOBR371_20240603 - remove next premium -->
                                      <!-- <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Total Modal Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Modal_Premium}</td>
                                           <td class="bs field-value" style="{!IF(fields2['Total Modal Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                              {!IF(c.modalPremium == null,'',policy.currencySymbol)}
                                               <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                    <apex:param value="{!c.modalPremium}"/>
                                               </apex:outputText>
                                           </td>
                                      </tr> -->
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                          <td class="bs field-label" style="{!IF(fields2['Additional Fund Contribution Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" >{!$Label.Pol_Additional_Fund_Contribution_Amount}</td>
                                          <td class="bs field-value" style="{!IF(fields2['Additional Fund Contribution Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" >
                                            <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFC')}">   <!-- Modified by Linus AH20324 --> 
                                              {!policy.currencySymbol}
                                              <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                <apex:param value="{!c.additionalFundContributionAmountInNumber}"/>
                                              </apex:outputText>
                                            </apex:outputPanel>
                                            <!-- Modified by Linus AH20324 
                                            <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFCS')}">
                                            N/A
                                            </apex:outputPanel>
                                            -->
                                          </td>
                                      </tr>
                                      <!-- Rancho_JOBR381_20240722 - remove annual premium -->
                                      <!-- <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Annual Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Annual_Premium}</td>
                                           <td class="bs field-value" style="{!IF(fields2['Annual Premium'][JSINHTMLENCODE(policyType)],'','display:none')}" > --><!--{!c.annualPremium}-->
                                               <!-- {!IF(c.annualPremium == null,'',policy.currencySymbol)}
                                               <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                    <apex:param value="{!c.annualPremium}"/>
                                               </apex:outputText>
                                           </td>
                                      </tr> -->
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                        <td class="bs field-label" style="{!IF(fields2['AdditionalF Contribution Annual Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}">{!$Label.Pol_Additional_Fund_Contribution_Annual_Amount}</td>
                                        <td class="bs field-value" style="{!IF(fields2['AdditionalF Contribution Annual Amount'][JSINHTMLENCODE(policyType)] && showAFCcolumns,'','display:none')}" >
                                          <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFC')}">    <!-- Modified by Linus AH20324 --> 
                                            {!policy.currencySymbol} 
                                            <apex:outputText styleClass="pull-right" value="{0, Number,###,##0.00}">
                                                <apex:param value="{!c.additionalFundContributionAnnualAmountInNumber}"/>
                                            </apex:outputText>
                                          </apex:outputPanel>
                                          <!-- Modified by Linus AH20324  
                                          <apex:outputPanel rendered="{!BEGINS(c.benefitCode,'AFCS')}">
                                                N/A
                                          </apex:outputPanel>
                                          -->
                                        </td>
                                      </tr>
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured}</td>
                                           <td  class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.insuredName}</td>
                                      </tr>
                                       <!-- START HKITSFDC-265 -->
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Plan_Level}</td>
                                           <td  class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.planLevel}</td>
                                      </tr>
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Area_Of_Cover}</td>
                                           <td  class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.AreaOfCover}</td>
                                      </tr>
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Room_Type}</td>
                                           <td  class="bs field-value" style="{!IF(fields2['Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.RoomType}</td>
                                      </tr>
                                        <!-- END HKITSFDC-265 -->
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                        <td class="bs field-label" style="{!IF(fields2['Maturity/Expiry Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Maturity_Expiry_Date}</td>
                                        <td class="bs field-value" style="{!IF(fields2['Maturity/Expiry Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.maturityexpiryDate}-->
                                          <apex:outputPanel rendered="{!c.termDateInDate != null}">
                                            <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                 <apex:Param value="{!c.termDateInDate}"/>
                                            </apex:OutputText>
                                          </apex:outputPanel>

                                          <apex:outputPanel rendered="{!c.termDateInDate == null}">
                                            N/A
                                          </apex:outputPanel>
                                        </td>
                                      </tr>
                                      <apex:variable var="rowNum" value="{!rowNum + 1}" />       
                                    </apex:repeat>                                                      
                                  </tbody>
                                </table>
                              </div>
                            </div>
                            <div class="bs">
                              <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                                <apex:outputPanel rendered="{!If(coverageTotalPage>1 && coveragehasPrev,true,false)}">
                                <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="coverageprevPage();"/>
                                </apex:outputPanel>

                                <apex:outputText value="{!$Label.Page_0_of_1}" >
                                  <apex:param value="{!coveragePage}" />
                                  <apex:param value="{!coverageTotalPage}" />
                                </apex:outputText>

                                <apex:outputPanel rendered="{!If(coverageTotalPage>1 && coveragehasNext,true,false)}">
                                  <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="coveragenextPage()"/>
                                </apex:outputPanel>
                              </div>
                            </div>  
                          </div>
                        </apex:outputPanel>
                      </div>
                    </apex:outputPanel>
                  </div>
                  <!----Coverage Information End---->
                          
                  <!----Payment Information Start---->
                  <div id="PaymentInformation" class="bs tab-pane" >
                    <apex:outputPanel id="PaymentInformationApex" layout="block" rendered="{!!fields2['group'][JSINHTMLENCODE(policyType)]}">
                      <apex:actionFunction action="{!paymentprevPage}" 
                             name="paymentprevPage" 
                             reRender="transactionResult"
                             status="loader-icon"
                             oncomplete="Cigna.PolicyDetail.scrollToPanel('transactionResult');" />
                     
                      <apex:actionFunction action="{!paymentnextPage}" 
                             name="paymentnextPage" 
                             reRender="transactionResult"
                             status="loader-icon" 
                             oncomplete="Cigna.PolicyDetail.scrollToPanel('transactionResult');"/>

                      <div id="paymentInfoPanel" class="bs panel-body two-column-table-body">
                        <apex:outputPanel layout="block" rendered="{!fields2['Policy No.'][JSINHTMLENCODE(policyType)]}">
                                <div class="paymentInfoPanelItem bs">
                                    <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Policy_No}</div>
                                    <div class="bs col-xs-6 col-md-3 field-value"> 
                                      <apex:outputText value="{!policy.policyNumber}"/>
                                    </div>
                                </div>
                            </apex:outputPanel>  
                         
                        <apex:outputPanel layout="block" rendered="{!fields2['Policy No.'][JSINHTMLENCODE(policyType)]}">
                              <div class="paymentInfoPanelItem bs"> 
                                <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Paid_to_Date}</div>
                                <div class="bs col-xs-6 col-md-3 field-value"> 
                                  <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!payment.paidToDateInDate}"/>
                                  </apex:OutputText>
                                </div>
                              </div>
                            </apex:outputPanel> 
                          
                        <apex:outputPanel layout="block" rendered="{!fields2['Payment Mode'][JSINHTMLENCODE(policyType)]}">
                            <div class="paymentInfoPanelItem bs">    
                              <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Payment_Mode}</div>
                              <div class="bs col-xs-6 col-md-3 field-value">
                                <apex:outputText value="{!policy.paymentMode}"/>
                              </div>
                            </div>
                        </apex:outputPanel>
                        <!-- Rancho_JOBR371_20240603 - remove next premium -->
                        <!-- <apex:outputPanel layout="block" rendered="{!fields2['Total Modal Premium'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs"> -->
                            <!-- JR1797 add last mode premium to avoid confusion to current mode premium --> 
                            <!-- <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Modal_Premium}</div>
                            <div class="bs col-xs-6 col-md-3 field-value"> -->
                              <!-- Rancho_JOBR367_20240513 - update premium display -->
                              <!-- <apex:outputPanel rendered="{!renewalEligible && payment.renewalNoticeInd == 'Y'}">
                                {!transField['RenewalNotice'][$Label.Header_Language_Code_Current]}
                              </apex:outputPanel>
                              <apex:outputPanel rendered="{!!(renewalEligible && payment.renewalNoticeInd == 'Y')}">
                                <apex:outputText value="{!IF(payment.modalPremium == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                    <apex:param value="{!payment.modalPremium}"/>
                                </apex:outputText>
                              </apex:outputPanel>
                            </div>
                          </div>
                        </apex:outputPanel> -->
                          
                          
                         
                          
                        <apex:outputPanel layout="block" rendered="{!fields2['Additional Fund Contribution'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Additional_Fund_Contribution}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputText value="{!IF(payment.polAdditionalFundContribution == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                  <apex:param value="{!payment.polAdditionalFundContribution}"/>
                              </apex:outputText>
                            </div>
                          </div>
                        </apex:outputPanel>
                          
                        <!-- Rancho_JOBR381_20240722 - remove annual premium -->
                        <!-- <apex:outputPanel layout="block" rendered="{!fields2['Annual Premium'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Total_Annual_Premium}</div>
                            <div class="bs col-xs-6 col-md-3 field-value"> -->
                              <!-- Rancho_JOBR367_20240513 - update premium display -->
                              <!-- <apex:outputPanel rendered="{!renewalEligible && payment.renewalNoticeInd == 'Y'}">
                                {!transField['RenewalNotice'][$Label.Header_Language_Code_Current]}
                              </apex:outputPanel>
                              <apex:outputPanel rendered="{!!(renewalEligible && payment.renewalNoticeInd == 'Y')}">
                                <apex:outputText value="{!IF(payment.annualPremium == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                    <apex:param value="{!payment.annualPremium}"/>
                                </apex:outputText>
                              </apex:outputPanel>
                            </div>
                          </div>
                        </apex:outputPanel> -->
                          
                          <!-- JR1797 add last mode premium to avoid confusion to current mode premium -->  
                        <apex:outputPanel layout="block" rendered="{!fields2['Last Modal Premium'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Last_Modal_Premium}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputText value="{!IF(payment.lastModalPremium == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                  <apex:param value="{!payment.lastModalPremium}"/>
                              </apex:outputText>
                            </div>
                          </div>
                        </apex:outputPanel>                         

                        <!-- 20200610 - minghua - levyII -->
                        <apex:outputPanel layout="block" rendered="{!contains(transKey,'~Levy_Current_Premium_Including_Levy~')}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!transField['Levy_Current_Premium_Including_Levy'][$Label.Header_Language_Code_Current]}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputPanel rendered="{!payment.effectiveLevy}">
                                <apex:outputText value="{!IF(payment.currentPremiumIncludeLevy == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                    <apex:param value="{!payment.currentPremiumIncludeLevy}"/>
                                </apex:outputText>
                              </apex:outputPanel>
                              <apex:outputText value="{!IF(payment.effectiveLevy,'','NA')}"></apex:outputText>
                            </div>
                          </div>
                        </apex:outputPanel>

                        <apex:outputPanel layout="block" rendered="{!fields2['Payment Method'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Payment_Method}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                                <apex:outputText value="{!payment.paymentMethod}"/>
                            </div>
                          </div>
                        </apex:outputPanel>

                        <apex:outputPanel layout="block" rendered="{!fields2['Account No'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Account_No}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputText value="{!payment.accountNumber}"/>
                            </div>
                          </div>
                         </apex:outputPanel>
                        
                        <apex:outputPanel layout="block" rendered="{!fields2['Debit Day'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Debit_Day}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputText value="{!payment.polDebitDayDisplay}"/>
                            </div>
                          </div>
                        </apex:outputPanel>

                        <apex:outputPanel layout="block" rendered="{!fields2['Payor'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Payor}</div>
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputText value="{!payment.fullname}"/>
                            </div>
                          </div>
                        </apex:outputPanel>

                        <apex:outputPanel layout="block" rendered="{!fields2['Start Date of APP'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_Start_Date_of_Automatic_Premium_Payment}</div>
                            
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputPanel rendered="{!payment.startDateofAutomaticPremiumPaymentInDate != null}">
                                <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                   <apex:Param value="{!payment.startDateofAutomaticPremiumPaymentInDate}"/>
                                </apex:OutputText>
                              </apex:outputPanel>

                              <apex:outputPanel rendered="{!payment.startDateofAutomaticPremiumPaymentInDate == null}">
                                N/A
                              </apex:outputPanel>
                            </div>
                          </div>
                        </apex:outputPanel>
                        
                        <apex:outputPanel layout="block" rendered="{!fields2['End Date of Automatic Premium Payment'][JSINHTMLENCODE(policyType)]}">
                          <div class="paymentInfoPanelItem bs">    
                            <div class="bs col-xs-6 col-md-3 field-label">{!$Label.Pol_End_Date_of_Automatic_Premium_Payment}</div>
                            
                            <div class="bs col-xs-6 col-md-3 field-value">
                              <apex:outputPanel rendered="{!payment.endDateofAutomaticPremiumPaymentInDate != null}">
                                <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                   <apex:Param value="{!payment.endDateofAutomaticPremiumPaymentInDate}"/>
                                </apex:OutputText>
                              </apex:outputPanel>
                              
                              <apex:outputPanel rendered="{!payment.endDateofAutomaticPremiumPaymentInDate == null}">
                                N/A
                              </apex:outputPanel>
                            </div>
                            
                          </div>
                        </apex:outputPanel>
                      </div>                                                     
                    
                      <!-- BEGIN HKITSFDC-148 -->
                      <!-- <apex:outputPanel id="transactionResult" rendered="false">--> <!---rollback 20250516 rendered="{!isAltruistAdmin}"-->
                      <apex:outputPanel id="transactionResult"  >
                      <!-- END HKITSFDC-148 -->
                        <div class="bs panel two-column-table">
                          <div class="bs panel-heading">
                             {!$Label.Pol_Transaction_History}
                          </div>
                          <!-- BEGIN HKITSFDC-148 -->
                          <div class="bs panel">
                              
                              
                              
                            <apex:outputLabel style="margin-right: 2px" value="{!$Label.Pol_From_Date}:" for="fromBillDate"/>
                            <apex:input type="date" id="fromBillDate" style="margin-right: 2px" 
                               value="{!pyBillingDateFrom}" 
                               html-min="{!TEXT(fromDateMin)}" 
                               html-max="{!TEXT(fromDateMax)}"/>
                              
                            <apex:outputLabel style="margin-right: 2px" value="{!$Label.Pol_To_Date}:" for="toBillDate"/>
                            <apex:input type="date" id="toBillDate" style="margin-right: 2px" 
                               value="{!pyBillingDateTo}" 
                               html-min="{!TEXT(toDateMin)}" 
                               html-max="{!TEXT(toDateMax)}"/>
                              
                                <apex:commandButton id="filterButton" value="{!$Label.Pol_Filter}" action="{!filterBillingListBasicByDateRange}" 
                                                    reRender="transactionResult,billingErrorMsg" 
                                                    oncomplete="finishLoading();"/> 
                              <apex:actionStatus id="loadingStatus" onstart="showLoading();" onstop="finishLoading();" />
                          </div>
                            
                          <apex:outputPanel id="billingErrorMsg">
                            <span class="text-danger">{!pyBillingErrMsg}</span>
                          </apex:outputPanel>  
                          <!-- END HKITSFDC-148 -->  
                            
                          <div id ="transactionPanel" class="bs panel-body table-panel-body two-column-table-body">
                            <div class="bs row">
                              <div class="bs col-lg-12">
                                <table class="bs table">
                                  <tbody class="bs hidden-xs">
                                    <tr class="bs table-header-row">
                                        <td class="bs field-label" style="{!IF(fields2['Payment Transaction Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Transaction_Date}</td>
                                        <td class="bs field-label" style="{!IF(fields2['Description'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Description}</td>
                                        <!-- BEGIN HKITSFDC-148 -->
                                        <!--<td class="bs field-label" >{!$Label.Pol_Payment_Method}</td>-->
                                        <td class="bs field-label" >{!$Label.Pol_Bill_Amount}</td>
                                        
                                        <td class="bs field-label">{!$Label.Pol_Paid_Date}</td>
                                        <!-- END HKITSFDC-148 -->
                                        <!-- BEGIN HKITSFDC-148 -->
                                        <!--<td class="bs field-label" style="text-align: right;{!IF(fields2['Automatic Premium Payment'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Automatic_Premium_Payment}</td>-->
                                        <td class="bs field-label" >{!$Label.Pol_Currency}</td>
                                        <!-- END HKITSFDC-148 -->
                                    </tr>
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <!-- BEGIN HKITSFDC-148 -->  
                                    <!--<apex:repeat value="{!paymentTranMap[paymentTranPage]}" var="b">-->
                                    <apex:repeat value="{!pyCurrentPageRecords}" var="b">
                                    <!-- END HKITSFDC-148 -->
                                      <tr class="bs field-value {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                        <td class="bs field-value" style="{!IF(fields2['Payment Transaction Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!b.finActivityDate}-->
                                            <!-- BEGIN HKITSFDC-148 -->
                                            <!--<apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">-->
                                            <apex:OutputText value="{0,date,yyyy-MM-dd}">
                                            <!-- END HKITSFDC-148 -->
                                              <apex:Param value="{!b.finActivityDateInDate}"/>
                                            </apex:OutputText>
                                        </td>
                                        <!-- BEGIN HKITSFDC-148 -->   
                                        <!--<td class="bs field-value" style="{!IF(fields2['Description'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!b.description}</td>-->
                                        <td class="bs field-value">{!b.paymentDescription}</td>
                                        
                                        <!--<td class="bs field-value" style="{!IF(fields2['Payment Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >--><!--{!b.paymentAmt}FinActivityGrossAmt-->
                                        <!--    <apex:outputText styleClass="pull-right" value="{!IF(b.FinActivityGrossAmt == null, '', policy.currencySymbol)} {0, Number,###,##0.00}">-->
                                        <!--        <apex:param value="{!b.FinActivityGrossAmt}"/>-->
                                        <!--    </apex:outputText>-->
                                        <!--</td>-->
                                        <td class="bs field-value">
                                            <apex:outputText value="{!IF(b.FinActivityGrossAmt == null, '', policy.currencySymbol)} {0, Number,###,##0.00}">
                                                <apex:param value="{!b.FinActivityGrossAmt}"/>
                                            </apex:outputText>
                                        </td>
                                        <!-- END HKITSFDC-148 -->
                                        <!-- BEGIN HKITSFDC-148 -->
                                        <td class="bs field-value" >
                                            <apex:outputText value="{0,date,yyyy-MM-dd}">
                                                <apex:param value="{!b.PayDate}"/>
                                            </apex:outputText>
                                        </td>
                                        <td class="bs field-value">{!b.currencyTypeDesc}</td>

                                        <!--<td class="bs field-value" style="{!IF(fields2['Automatic Premium Payment'][JSINHTMLENCODE(policyType)],'','display:none')}" >--><!--{!b.automaticPremiumPayment}-->
                                        <!--    <apex:outputText styleClass="pull-right" value="{!IF(b.automaticPremiumPayment == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">-->
                                        <!--        <apex:param value="{!b.automaticPremiumPayment}"/>-->
                                        <!--    </apex:outputText>-->
                                        <!--</td>-->                                          
                                          <!-- END HKITSFDC-148 -->                                                                              
                                      </tr>
                                      <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                    </apex:repeat>
                                  </tbody>                                   
                                  <tbody class="visible-xs">
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <!-- BEGIN HKITSFDC-148-->
                                    <!--<apex:repeat value="{!paymentTranMap[paymentTranPage]}" var="b"> -->
                                    <apex:repeat value="{!pyCurrentPageRecords}" var="b">
                                    <!-- END HKITSFDC-148-->
                                      <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" style="{!IF(fields2['Payment Transaction Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Transaction_Date}</td>
                                           <!-- BEGIN HKITSFDC-148--> <td class="bs field-value" style="{!IF(fields2['Payment Transaction Date'][JSINHTMLENCODE(policyType)],'','display:none')}" > <!-- END HKITSFDC-148--> <!--{!b.finActivityDate}-->
                                              <!-- BEGIN HKITSFDC-148 -->
                                              <!--<apex:OutputText value="{0,date,yyyy-MM-dd}" escape="false">-->
                                              <apex:OutputText value="{0,date,yyyy-MM-dd}">
                                              <apex:Param value="{!b.finActivityDateInDate}"/>
                                              <!-- END HKITSFDC-148 -->
                                              </apex:OutputText>
                                           </td>
                                      </tr>
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <!-- BEGIN HKITSFDC-148 -->
                                           <td class="bs field-label" style="{!IF(fields2['Description'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Description}</td>
                                           <!--<td class="bs field-value" style="{!IF(fields2['Description'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!b.description}</td>-->
                                           <td class="bs field-value" style="{!IF(fields2['Description'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!b.paymentDescription}</td>
                                           <!-- END HKITSFDC-148 -->
                                      </tr>
                                      <!-- BEGIN HKITSFDC-148 -->  
                                      <!--<tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" >{!$Label.Pol_Payment_Method}</td>
                                           <td class="bs field-value" >{!b.paymentDescription}</td>
                                      </tr>-->  
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <!--<td class="bs field-label" style="{!IF(fields2['Payment Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Payment_Amount}</td>
                                            <td class="bs field-value" style="{!IF(fields2['Payment Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >--><!--{!b.paymentAmt}FinActivityGrossAmt-->
                                           <!--    <apex:outputText styleClass="pull-right" value="{!IF(b.FinActivityGrossAmt == null, '', policy.currencySymbol)} {0, Number,###,##0.00}">-->
                                           <!--        <apex:param value="{!b.FinActivityGrossAmt}"/>-->
                                           <!--    </apex:outputText>-->
                                           <!--</td>-->
                                           <td class="bs field-label" >{!$Label.Pol_Bill_Amount}</td>
                                           <td>
                                                <apex:outputText styleClass="pull-right" value="{!IF(b.FinActivityGrossAmt == null, '', policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!b.FinActivityGrossAmt}"/>
                                                </apex:outputText>
                                           </td>
                                      </tr>
                                      <!-- END HKITSFDC-148 -->
                                        
                                      <!-- BEGIN HKITSFDC-148 -->
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" >{!$Label.Pol_Paid_Date}</td>
                                           <td>
                                               <apex:outputText value="{0,date,yyyy-MM-dd}">
                                                   <apex:param value="{!b.PayDate}"/>
                                               </apex:outputText>
                                           </td>
                                      </tr>
                                      <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                           <td class="bs field-label" >{!$Label.Pol_Currency}</td>
                                           <td class="bs field-value" >{!b.currencyTypeDesc}</td>
                                      </tr>
                                      <!-- <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">-->
                                      <!--      <td class="bs field-label" style="{!IF(fields2['Automatic Premium Payment'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Automatic_Premium_Payment}</td>-->
                                      <!--   <td class="bs field-value" style="{!IF(fields2['Automatic Premium Payment'][JSINHTMLENCODE(policyType)],'','display:none')}" >--><!--{!b.automaticPremiumPayment}-->
                                      <!--  <apex:outputText styleClass="pull-right" value="{!IF(b.automaticPremiumPayment == null,'',policy.currencySymbol)} {0, Number,###,##0.00}">-->
                                      <!--             <apex:param value="{!b.automaticPremiumPayment}"/>-->
                                      <!--     </apex:outputText>-->
                                      <!--   </td>-->
                                      <!--</tr>-->
                                      <!-- END HKITSFDC-148 -->
                                      
                                      <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                    </apex:repeat>
                                  </tbody>                             
                                </table>
                              </div>
                            </div>
                            <div class="bs row">
                              <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                                <!-- BEGIN HKITSFDC-148 --> 
                                
                                <apex:outputPanel rendered="{!pyHasPrevious}">
                                    <apex:commandLink value="<PrevPage " action="{!pyPrevious}" reRender="transactionResult" onclick="showLoading();" oncomplete="finishLoading();"/>     
                                </apex:outputPanel>  
                                  
                                <apex:outputText value="Page "/>
                                <apex:repeat value="{!pyPageNumbers}" var="pageNum">
                                    <apex:commandLink value="{!pageNum}" action="{!gotoPage}"
                                                      reRender="transactionResult" onclick="showLoading();" oncomplete="finishLoading();" 
                                                      style="margin-right: 5px; {!IF(pageNum == pyCurrentPageNumber,'font-weight: bold;text-decoration: underline;','')}">
                                        <apex:param name="pageNumber" value="{!pageNum}" assignTo="{!pySelectedPageNum}"/>
                                    </apex:commandLink>  
                                </apex:repeat>
                                  
                                <apex:outputPanel rendered="{!pyHasNext}">
                                    <apex:commandLink value=" NextPage>" action="{!pyNext}" reRender="transactionResult" onclick="showLoading();" oncomplete="finishLoading();"/>
                                </apex:outputPanel>  
                                  
                                <!--<apex:outputPanel rendered="{!If(paymentTranTotalPage<=1 || !paymenthasPrev,false,true)}">
                                  <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="paymentprevPage();"/>
                                </apex:outputPanel>

                                <apex:outputText value="{!$Label.Page_0_of_1}" >
                                    <apex:param value="{!paymentTranPage}" />
                                    <apex:param value="{!paymentTranTotalPage}" />
                                </apex:outputText>

                                <apex:outputPanel rendered="{!If(paymentTranTotalPage>1 && paymenthasNext,true,false)}">
                                    <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="paymentnextPage()"/>
                                </apex:outputPanel>-->
                                <!-- END HKITSFDC-148 -->  
                              </div>
                            </div> 
                          </div>
                            
                        </div>
                      </apex:outputPanel>
                      <!-- END HKITSFDC-148 -->
                      <script>
                        Cigna.PolicyDetail.setRow('paymentInfoPanelItem');
                      </script>

                    </apex:outputPanel>
                  </div>
                  <!----Payment Information End---->

                  <!----Claim History Start---->
                  <div id="ClaimHistory" class="bs tab-pane {!IF(isCustomerUser && fields2['group'][JSINHTMLENCODE(policyType)],'in active','')}">
                    
                    <apex:actionFunction action="{!claimprevPage}" 
                                 name="claimprevPage" 
                                 reRender="ClaimHistoryApex,ClaimHistoryApex2"
                                 status="loader-icon" 
                                 oncomplete="Cigna.PolicyDetail.scrollToPanel('ClaimHistoryApex');"/>
                         
                    <apex:actionFunction action="{!claimnextPage}" 
                                 name="claimnextPage" 
                                 reRender="ClaimHistoryApex,ClaimHistoryApex2"
                                 status="loader-icon" 
                                 oncomplete="Cigna.PolicyDetail.scrollToPanel('ClaimHistoryApex');"
                                 />

                    <apex:actionFunction name="groupClaimSearch" status="loader-icon" action="{!groupClaimSearch}" reRender="ClaimHistoryApex2,GroupClaimErrorApex,ClaimStatusPanel"/>

                    <div class="bs row">
                      <apex:outputPanel rendered="{!isGroup && isBrokerUser}">
                        <div class="bs col-sm-12 col-xs-12" style="padding: 20px 0px 20px 0px; ">
                          <div class="bs col-sm-6 col-xs-12" style="padding-bottom:20px;">
                            <apex:SelectList id="selectedSearchOptionGroup" size="1" value="{!groupClaimSearchCriteria}" styleClass="bs form-field-style-select cigna-fg-gray-dark" style="font-size:1em; height:35px;" >
                              <apex:selectOptions value="{!groupClaimSearchType}"/>            
                            </apex:SelectList>
                          </div>   
                      
                          <div class="bs col-sm-6 col-xs-12">
                                <apex:input id="selectedSearchValueGroup" style="font-size:1em; height:35px; width:95%" styleClass="bs form-field-style cigna-fg-gray-dark" value="{!groupClaimInputText}"/><i class="fa fa-search cigna-fg-orange-dark text-center onclick-pointer" onclick="groupClaimSearchValidation()" style="width:5%" aria-hidden="true"/>
                          </div>
                        </div>
                        <div id="inputCharErrorMessage" class="bs col-sm-12 col-xs-12 text-center" style="color:red;padding-bottom:20px;display:none;">
                          {!$Label.Please_input_at_least_2_characters_to_search}
                        </div>
                        <div id="inputCharErrorMessageLong" class="bs col-sm-12 col-xs-12 text-center" style="color:red;padding-bottom:20px;display:none;">
                          {!$Label.Please_input_at_least_4_characters_to_search}
                        </div>
                        <apex:outputPanel id="GroupClaimErrorApex" layout="block">
                          <div class="bs col-sm-12 col-xs-12" style="color: red;padding-bottom: 20px;text-align: center; {!IF(showTooManyRecordError,'','display:none')}" >
                              {!$Label.Error_Too_Many_Records}
                          </div>
                        </apex:outputPanel> 
                      </apex:outputPanel>

                      <apex:outputPanel id="ClaimStatusPanel" layout="block">
                        <div class="bs form-group col-md-3 col-sm-6 col-xs-10">
                            <apex:selectList value="{!selectedClaimStatus}" multiselect="false" size="1" styleClass="bs form-field-style-select cigna-fg-gray-dark">
                                <apex:selectOptions value="{!claimStatusList}"/>
                                <apex:actionSupport event="onchange" status="loader-icon" action="{!searchClaimbyStatus}" reRender="ClaimHistoryApex, ClaimHistoryApex2"/>
                            </apex:selectList>
                        </div>
                      </apex:outputPanel>
                    </div>

                    <apex:outputPanel id="ClaimHistoryApex" layout="block" rendered="{!JSINHTMLENCODE(policyType) != 'Group'}">
                      <div class="bs row">
                        <div class="bs col-xs-12">
                          <table class="bs table" id="policy-fund-table">
                            <tbody class="bs hidden-xs">
                              <tr class="bs table-header-row">
                                <!--Individual-->
                                <td class="bs field-label" style="{!IF(fields2['Claim No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claim_No}</td>
                                <td class="bs field-label" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claim_Type}</td>
                                <td class="bs field-label" style="{!IF(fields2['Claim Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Received_Date}</td>
                                <td class="bs field-label" style="{!IF(fields2['Claim History Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured}</td>
                                <td class="bs field-label" style="{!IF(fields2['Policy Claim Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claim_Status}</td>
                                <!-- removed in sprint 3
                                <td class="bs" style="{!IF(fields2['Claim Last Update Date'][policyType],'','display:none')}" ><apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!c.lastUpdateDateInDate}"/>
                                    </apex:OutputText></td>
                                -->
                              </tr>

                              <apex:variable value="{!1}" var="rowNum" />
                              <apex:repeat value="{!claimMap[claimPage]}" var="c">
                                <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}  onclick-pointer" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')" >
                                  <!--Individual-->
                                  <td class="bs field-value" style="{!IF(fields2['Claim No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimNumber}</td>
                                  <td class="bs field-value" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)],'','display:none')}">{!c.claimTypeDisplay}</td>
                                  <td class="bs field-value" style="{!IF(fields2['Claim Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.receivedDate }-->
                                    <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                      <apex:Param value="{!c.submitDateInDate}"/>
                                    </apex:OutputText>
                                  </td>
                                  <td class="bs field-value" style="{!IF(fields2['Claim History Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.policyInsuredName}</td>
                                  <td class="bs field-value" style="{!IF(fields2['Policy Claim Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimStatusDescription}
                                    <i class="ci-hk-arrow-31 ci-hk-sm pull-right hidden-xs cigna-fg-blue-medium onclick-pointer"></i>
                                  </td>
                                  <!-- removed in sprint 3
                                  <td class="bs" style="{!IF(fields2['Claim Last Update Date'][policyType],'','display:none')}" 
                                  >{!c.lastUpdateDate}</td>
                                  -->
                                </tr>
                                <apex:variable var="rowNum" value="{!rowNum + 1}" />
                              </apex:repeat>
                            </tbody>

                            <tbody class="bs visible-xs">
                              <apex:variable value="{!1}" var="rowNum" />
                              <apex:repeat value="{!claimMap[claimPage]}" var="c">
                                <!--Individual-->
                                  <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label">{!$Label.Pol_Claim_No}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claim No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimNumber}
                                    <i class="ci-hk-arrow-31 ci-hk-sm pull-right cigna-fg-blue-medium onclick-pointer"></i>
                                    </td>
                                  </tr>

                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claim_Type}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimTypeDisplay}</td>
                                  </tr>

                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Claim Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Received_Date}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claim Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.receivedDate }-->
                                        <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                           <apex:Param value="{!c.submitDateInDate}"/>
                                        </apex:OutputText>
                                    </td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Claim History Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Person_Insured}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claim History Person Insured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.policyInsuredName}</td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Policy Claim Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claim_Status}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Policy Claim Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimStatusDescription}</td>
                                  </tr>
                                
                                  <apex:variable var="rowNum" value="{!rowNum + 1}" />
                              </apex:repeat>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="bs row">
                        <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                          <apex:outputPanel rendered="{!If(claimTotalPage>1 && claimhasPrev,true,false)}">
                            <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="claimprevPage();"/>
                          </apex:outputPanel>

                          <apex:outputText value="{!$Label.Page_0_of_1}" >
                              <apex:param value="{!claimPage}" />
                              <apex:param value="{!claimTotalPage}" />
                          </apex:outputText>

                          <apex:outputPanel rendered="{!If(claimTotalPage>1 && claimhasNext,true,false)}">
                              <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="claimnextPage()"/>
                          </apex:outputPanel>
                        </div>
                      </div>
                    </apex:outputPanel>

                    <apex:outputPanel id="ClaimHistoryApex2" layout="block" rendered="{!JSINHTMLENCODE(policyType) == 'Group'}" >
                      <div class="bs row">  
                        <div class="bs col-xs-12">
                          <table class="bs table" id="policy-fund-table">
                            <tbody class="bs hidden-xs hidden-sm">
                              <tr class="bs table-header-row">
                                <!--Group-->
                                <td class="bs field-label" style="{!IF(fields2['Claims No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claims_No}</td>
                                <td class="bs field-label" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)] && !isBrokerUser,'','display:none')}" >{!$Label.Pol_Claim_Type}</td>
                                <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isBrokerUser)&&fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Name}</td>
                                <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isBrokerUser)&&fields2['Member Cert. No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Cert_No}</td>
                                <td class="bs field-label" style="{!IF(fields2['Claim History Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                <td class="bs field-label" style="{!IF(fields2['Incurred Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Incurred_Amount}</td>
                                <td class="bs field-label" style="{!IF(fields2['Paid Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Paid_Amount}</td>
                                <td class="bs field-label" style="{!IF(fields2['Payment Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Payment_Date}</td>
                                <td class="bs field-label" style="{!IF(fields2['Claims Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claims_Status}</td>
                                <td class="bs field-label" style="{!IF(fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Branch}</td>
                                <td style="width: 5%"></td>
                              </tr>
                              
                              <apex:variable value="{!1}" var="rowNum" />
                              <apex:repeat value="{!claimMap[claimPage]}" var="c"> 
                                  <!--Group-->
                                <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')} onclick-pointer" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                  <td class="bs field-value" style="{!IF(fields2['Claims No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimNumber}</td>
                                  <td class="bs field-value" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)] && !isBrokerUser,'','display:none')}">{!c.claimTypeDisplay}</td>
                                  <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isBrokerUser)&&fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.policyInsuredName}</td>
                                  <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isBrokerUser)&&fields2['Member Cert. No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.certNumber}</td>
                                  
                                  <td class="bs field-value" style="{!IF(fields2['Claim History Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.benefitTypeDisplay}</td>
                                  <td class="bs field-value" style="{!IF(fields2['Incurred Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.incurredAmount}-->
                                    <!-- IBM KOU PEI-78 20180615 Start-->
                                    <!-- <apex:outputText value="{!policy.currencySymbol} {0, Number,###,##0.00}"> -->
                                    <!-- <apex:param value="{!c.incurredAmount}"/> -->                                    
                                    <apex:outputText value="{!IF(c.incurredAmount == null,'N/A', policy.currencySymbol)}">
                                    </apex:outputText>
                                    <apex:outputText value="  {0, Number,###,##0.00}">
                                    <apex:param value="{!c.incurredAmount}"/>
                                    </apex:outputText>
                                    <!-- IBM KOU PEI-78 20180615 End-->                                  
                                  </td>

<!--                                   <td class="bs field-value" style="{!IF(fields2['Incurred Amount'][policyType] && c.incurredAmount!=null,'','display:none')}" >


                                      <apex:outputText value="{!policy.currencySymbol} {0, Number,###,##0.00}">
                                          <apex:param value="{!IF(c.incurredAmount==null, 0, c.incurredAmount)}"/>

                                       </apex:outputText>
                                  </td> -->



                                  <td class="bs field-value" style="{!IF(fields2['Paid Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.paidAmount}-->
                                    <!-- IBM KOU PEI-78 20180615 Start-->

<!--                                       <apex:outputText value="{!policy.currencySymbol} {0, Number,###,##0.00}">
                                          <apex:param value="{!c.paidAmount}"/>
                                      </apex:outputText> -->
                                      <apex:outputText value="{!IF(c.paidAmount == null,'N/A', policy.currencySymbol)}">
                                      </apex:outputText>
                                      <apex:outputText value=" {0, Number,###,##0.00}">
                                          <apex:param value="{!c.paidAmount}"/>
                                      </apex:outputText> 
                                    <!-- IBM KOU PEI-78 20180615 End-->
                                  </td>
                                  <td class="bs field-value" style="{!IF(fields2['Payment Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.paymentDate }-->
                                          <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                               <apex:Param value="{!c.paymentDateInDate}"/>
                                          </apex:OutputText>
                                  </td>
                                  <td class="bs field-value" style="{!IF(fields2['Claims Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimStatusDescription}</td>
                                  <td class="bs field-value" style="{!IF(fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.branchDesc}
                                  </td>
                                  <td>
                                    <i class="ci-hk-arrow-31 ci-hk-sm pull-right hidden-xs cigna-fg-blue-medium onclick-pointer"></i>
                                  </td>
                                </tr>
                                <apex:variable var="rowNum" value="{!rowNum + 1}" />
                              </apex:repeat>
                            </tbody>

                            <tbody class="bs visible-xs visible-sm hidden-md">
                              <apex:variable value="{!1}" var="rowNum" />
                              <apex:repeat value="{!claimMap[claimPage]}" var="c">
                                <!--Group-->
                                  <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')" >
                                    <td class="bs field-label" style="width:55%;{!IF(fields2['Claims No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claims_No}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claims No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimNumber}
                                      <i class="ci-hk-arrow-31 ci-hk-sm pull-right cigna-fg-blue-medium onclick-pointer"></i>
                                    </td>
                                  </tr>

                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)] && !isBrokerUser,'','display:none')}" >{!$Label.Pol_Claim_Type}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claims Type'][JSINHTMLENCODE(policyType)] && !isBrokerUser,'','display:none')}">{!c.claimTypeDisplay}</td>
                                  </tr>

                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User|| isBrokerUser) && fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Name}</td>
                                    <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User|| isBrokerUser) && fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.policyInsuredName}</td>
                                  </tr>

                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isBrokerUser) && fields2['Member Cert. No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Cert_No}</td>
                                    <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isBrokerUser) && fields2['Member Cert. No'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.certNumber}</td>
                                  </tr>
                                  
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Claim History Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claim History Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.benefitTypeDisplay}</td>
                                  </tr>

                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Incurred Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Incurred_Amount}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Incurred Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.incurredAmount}-->
                                        <apex:outputText value="{!policy.currencySymbol} {0, Number,###,##0.00}">
                                            <apex:param value="{!c.incurredAmount}"/>
                                        </apex:outputText>
                                    </td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Paid Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Paid_Amount}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Paid Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.paidAmount  }-->
                                        <apex:outputText value="{!policy.currencySymbol} {0, Number,###,##0.00}">
                                            <apex:param value="{!c.paidAmount}"/>
                                        </apex:outputText>
                                    </td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Payment Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Payment_Date}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Payment Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.paymentDate }-->
                                        <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                 <apex:Param value="{!c.paymentDateInDate}"/>
                                        </apex:OutputText>
                                    </td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Claims Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Claims_Status}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Claims Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.claimStatusDescription}</td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" onclick="Cigna.PolicyDetail.viewClaimDetails('{!c.claimNumber}')">
                                    <td class="bs field-label" style="{!IF(fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Branch}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.branchDesc}</td>
                                  </tr>
                                  <apex:variable var="rowNum" value="{!rowNum + 1}" />
                              </apex:repeat>
                            </tbody>
                          </table>
                        </div>
                      </div>

                      <div class="bs row">
                          <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                            <apex:outputPanel rendered="{!If(claimTotalPage>1 && claimhasPrev,true,false)}">
                            <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="claimprevPage();"/>
                            </apex:outputPanel>

                            <apex:outputText value="{!$Label.Page_0_of_1}" >
                              <apex:param value="{!claimPage}" />
                              <apex:param value="{!claimTotalPage}" />
                            </apex:outputText>

                            <apex:outputPanel rendered="{!If(claimTotalPage>1 && claimhasNext,true,false)}">
                              <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="claimnextPage()"/>
                            </apex:outputPanel>
                          </div>
                      </div> 
                                            
                    </apex:outputPanel>
                    
                    
                  </div>
                  <!----Claim History End---->

                  <!-----Policy Change History Start---->
                  <div id="PolicyChangeHistory" class="bs tab-pane">
                    <apex:outputPanel id="PolicyChangeHistoryApex" layout="block">
                      <apex:actionFunction action="{!policyChangeprevPage}" 
                                 name="policyChangeprevPage" 
                                 reRender="PolicyChangeDataApex"
                                 status="loader-icon" 
                                 oncomplete="Cigna.PolicyDetail.scrollToPanel('PolicyChangeDataApex');"/>
                      <apex:actionFunction action="{!policyChangenextPage}" 
                                 name="policyChangenextPage" 
                                 reRender="PolicyChangeDataApex"
                                 status="loader-icon" 
                                 oncomplete="Cigna.PolicyDetail.scrollToPanel('PolicyChangeDataApex');"/>

                      <div class="bs row">
                        <div class="bs form-group col-lg-3 col-sm-6 col-xs-6">
                            <apex:selectList value="{!selectedpolicyChangeStatus}" multiselect="false" size="1" styleClass="bs form-field-style-select cigna-fg-gray-dark">
                              <apex:selectOptions value="{!policyChangeStatusList}"/>
                              <apex:actionSupport status="loader-icon" event="onchange" action="{!searchPolicyChangebyStatus}" ReRender="PolicyChangeDataApex"/>
                            </apex:selectList>
                        </div>
                      </div>

                      <apex:outputPanel id="PolicyChangeDataApex" layout="block">
                        <div class="bs row"> 
                          <div class="bs col-xs-12">
                            <table class="bs table" id="policy-fund-table">
                              <tbody class="hidden-xs">
                                <tr class="bs table-header-row">
                                  <td class="bs field-label" style="{!IF(fields2['Policy Change Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Policy_Change_Type}</td>
                                  <td class="bs field-label" style="{!IF(fields2['Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Status}</td>
                                  <td class="bs field-label" style="{!IF(fields2['Policy Change Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Received_Date}</td>
                                  <!-- removed in sprint 3
                                  <td class="bs"> {!$Label.Pol_Last_Update_Date}</td>
                                  -->                                           
                                </tr>
                                 <apex:variable value="{!1}" var="rowNum" />
                                <apex:repeat value="{!policyChangeMap[policyChangePage]}" var="c">
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                    <td class="bs field-value" style="{!IF(fields2['Policy Change Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.salesForceWorkType }</td>
                                    <td class="bs field-value" style="{!IF(fields2['Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.requestStatus}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Policy Change Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><apex:outputText value=" {0,date,yyyy/MM/dd}">
                                        <apex:param value="{!c.submittedDateTime}"/>
                                      </apex:outputText></td>
                                    <!-- removed in sprint 3
                                    <td class="bs" style="{!IF(fields2['Policy Change Last Update Date'][policyType],'','display:none')}" >{!c.statusUpdatedDateTime}</td>
                                    -->                                
                                  </tr>
                                   <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                </apex:repeat>
                              </tbody>
                              <tbody class="visible-xs">
                                <apex:variable value="{!1}" var="rowNum" />
                                <apex:repeat value="{!policyChangeMap[policyChangePage]}" var="c">
                                  <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                    <td class="bs field-label" style="{!IF(fields2['Policy Change Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Policy_Change_Type}</td>
                                    <td class="bs  field-value" style="{!IF(fields2['Policy Change Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.salesForceWorkType }</td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" >
                                    <td class="bs field-label" style="{!IF(fields2['Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Status}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.requestStatus}</td>
                                  </tr>
                                  <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                    <td class="bs field-label" style="{!IF(fields2['Policy Change Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Received_Date}</td>
                                    <td class="bs field-value" style="{!IF(fields2['Policy Change Received Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                      <apex:outputText value=" {0,date,yyyy/MM/dd}">
                                        <apex:param value="{!c.submittedDateTime}"/>
                                      </apex:outputText>
                                    </td>
                                  </tr>
                                <!-- removed in sprint 3
                                <tr class="bs" >
                                    <td class="bs" style="{!IF(fields2['Policy Change Last Update Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Last_Update_Date}</td>  
                                    <td class="bs" style="{!IF(fields2['Policy Change Last Update Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.statusUpdatedDateTime}</td>       
                                </tr>
                                --> 
                                   <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                </apex:repeat>                              
                             </tbody>
                            </table>
                          </div>
                        </div>

                        <div class="bs row">
                          <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                            <apex:outputPanel rendered="{!If(policyChangeTotalPage>1 && policyChangehasPrev,true,false)}">
                            <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="policyChangeprevPage();"/>
                            </apex:outputPanel>

                            <apex:outputText value="{!$Label.Page_0_of_1}" >
                              <apex:param value="{!policyChangePage}" />
                              <apex:param value="{!policyChangeTotalPage}" />
                            </apex:outputText>

                            <apex:outputPanel rendered="{!If(policyChangeTotalPage>1 && policyChangehasNext,true,false)}">
                              <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="policyChangenextPage()"/>
                            </apex:outputPanel>
                          </div>
                        </div>
                      </apex:outputPanel>
                    </apex:outputPanel>  
                  </div>
                  <!-----Policy Change History End---->
                 
                  <!----Premium Settlement Start---->
                  <div id="PremiumSettlementHistory" class="bs tab-pane row">
                    <apex:outputPanel layout="block" id="PremiumSettlementApex" rendered="{!!(isCustomerUser || fields2['individual'][JSINHTMLENCODE(policyType)])}">
                      <apex:actionFunction action="{!settlementprevPage}" 
                               name="settlementprevPage" 
                               reRender="settlementTable"
                               status="loader-icon" 
                               oncomplete="Cigna.PolicyDetail.scrollToPanel('settlementTable');"/>
                       
                      <apex:actionFunction action="{!settlementnextPage}" 
                               name="settlementnextPage" 
                               reRender="settlementTable"
                               status="loader-icon" 
                               oncomplete="Cigna.PolicyDetail.scrollToPanel('settlementTable');"/>

                      <div class="bs panel two-column-table">  
                        <div class="bs panel-body two-column-table-body">
                          <div class="bs row"> 
                            <div class="bs col-xs-12 search-criteria form-horizontal">
                              <div class="bs form-group">
                                  <label style="float: left;padding-left: 15px;" for="select-Branch" class="control-label">{!$Label.Pol_Branch}</label>
                                  <div class="bs col-sm-4 col-xs-8">
                                      <apex:selectList value="{!selectedPremiumBranch}" multiselect="false" size="1" styleClass="bs form-field-style-select cigna-fg-gray-dark">
                                             <apex:selectOptions value="{!branchList}"/>
                                             <apex:actionSupport event="onchange" action="{!searchPremiumSettlementbybranch}" 
                                             status="loader-icon"
                                             reRender="settlementTable"/>
                                      </apex:selectList>
                                  </div>
                              </div>
                            </div>
                          </div>                          
                          
                          <apex:outputPanel id="settlementTable">
                            <div class="bs row"> 
                              <div class="bs col-md-12 hidden-sm hidden-xs">
                                  <table class="bs table" id="policy-fund-table">
                                      <tbody>
                                        <tr class="bs table-header-row">
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Invoice No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Invoice_No}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Issue Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Issue_Date}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Invoice Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Invoice_Amount}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Settled Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Settled_Amount}</td>

                                          <!-- 20200610 - minghua - levyII -->
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Levy'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!transField['Levy'][$Label.Header_Language_Code_Current]}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Total Premium Including Levy'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!transField['Levy_Total_Premium_Including_Levy'][$Label.Header_Language_Code_Current]}</td>

                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Settled Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Settled_Date}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Unsettle Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Unsettle_Balance}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Commission Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Commission_Amount}</td>
                                          <td class="bs field-label" style="{!IF((isBrokerUser || $Permission.Customer_Service_User) && fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Branch}</td> 
                                        </tr>
                                        <apex:variable value="{!1}" var="rowNum" />
                                        <apex:repeat value="{!settlementMap[settlementPage]}" var="c">
                                          <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Invoice No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.invoiceNumber}</td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Issue Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.issueDate}-->
                                                <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                   <apex:Param value="{!c.finActivityDateInDate}"/>
                                                </apex:OutputText>
                                            </td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Invoice Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.invoiceAmount}-->
                                                <apex:outputText value="{!IF(c.FinActivityGrossAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!c.FinActivityGrossAmt}"/>
                                                </apex:outputText>
                                            </td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Settled Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.settledAmount}-->
                                                <apex:outputText value="{!IF(c.paymentAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!c.paymentAmt}"/>
                                                </apex:outputText>
                                            </td>

                                            <!-- 20200610 - minghua - levyII -->
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Levy'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                                <apex:outputText value="{!IF(c.levy == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!c.levy}"/>
                                                </apex:outputText>
                                            </td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Total Premium Including Levy'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                                <apex:outputText value="{!IF(c.totalPremiumIncludingLevy == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!c.totalPremiumIncludingLevy}"/>
                                                </apex:outputText>
                                            </td>

                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Settled Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.paymentStatusDate}-->
                                                <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                                   <apex:Param value="{!c.paymentStatusDateInDate}"/>
                                                </apex:OutputText>
                                            </td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Unsettle Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.unsettleBalance}-->
                                                <apex:outputText value="{!IF(c.unsettleBalance == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!c.unsettleBalance}"/>
                                                </apex:outputText>
                                            </td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Commission Amount'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!c.commissionAmt}-->
                                                <apex:outputText value="{!IF(c.commissionAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                                    <apex:param value="{!c.commissionAmt}"/>
                                                </apex:outputText>
                                            </td>
                                            <td class="bs field-value" style="{!IF((isBrokerUser || $Permission.Customer_Service_User)&&fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!c.branchDesc}</td> 
                                          </tr>
                                          <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                        </apex:repeat>
                                      </tbody>
                                  </table>
                              </div>

                              <div class="bs col-xs-12 visible-xs visible-sm hidden-md">
                                <apex:variable value="{!1}" var="rowNum" />
                                <apex:repeat value="{!settlementMap[settlementPage]}" var="c">
                                  <div class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Invoice_No}</div>
                                       <div class="field-value col-xs-9">{!c.invoiceNumber}</div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Issue_Date}</div>
                                       <div class="field-value col-xs-9">
                                          <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                             <apex:Param value="{!c.finActivityDateInDate}"/>
                                          </apex:OutputText>
                                        </div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Invoice_Amount}</div>
                                       <div class="field-value col-xs-9">
                                          <apex:outputText value="{!IF(c.FinActivityGrossAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                            <apex:param value="{!c.FinActivityGrossAmt}"/>
                                          </apex:outputText>
                                        </div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Settled_Amount}</div>
                                       <div class="field-value col-xs-9">
                                          <apex:outputText value="{!IF(c.paymentAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                            <apex:param value="{!c.paymentAmt}"/>
                                          </apex:outputText>
                                        </div>
                                    </div>

                                    <!-- 20200610 - minghua - levyII -->
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!transField['Levy'][$Label.Header_Language_Code_Current]}</div>
                                       <div class="field-value col-xs-9">
                                          <apex:outputText value="{!IF(c.levy == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                              <apex:param value="{!c.levy}"/>
                                          </apex:outputText>
                                        </div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!transField['Levy_Total_Premium_Including_Levy'][$Label.Header_Language_Code_Current]}</div>
                                       <div class="field-value col-xs-9">
                                          <apex:outputText value="{!IF(c.totalPremiumIncludingLevy == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                              <apex:param value="{!c.totalPremiumIncludingLevy}"/>
                                          </apex:outputText>
                                        </div>
                                    </div>
                                    
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Settled_Date}</div>
                                       <div class="field-value col-xs-9">
                                         <apex:OutputText value="{0,date,yyyy/MM/dd}" escape="false">
                                            <apex:param value="{!c.paymentStatusDateInDate}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Unsettle_Balance}</div>
                                       <div class="field-value col-xs-9">
                                         <apex:outputText value="{!IF(c.unsettleBalance == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                              <apex:param value="{!c.unsettleBalance}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Commission_Amount}</div>
                                       <div class="field-value col-xs-9">
                                         <apex:outputText value="{!IF(c.commissionAmt == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}">
                                            <apex:param value="{!c.commissionAmt}"/>
                                          </apex:outputText>
                                       </div>
                                    </div>
                                    <div class="bs row table-content">
                                       <div class="field-label col-xs-3">{!$Label.Pol_Branch}</div>
                                       <div class="field-value col-xs-9">{!c.branchDesc}</div>
                                    </div>
                                  </div>
                                  <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                </apex:repeat>
                              </div>
                            </div>

                            <div class="bs row">
                              <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                                <apex:outputPanel rendered="{!If(settlementTotalPage>1 && settlementhasPrev,true,false)}">
                                <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="settlementprevPage();"/>
                                </apex:outputPanel>

                                <apex:outputText value="{!$Label.Page_0_of_1}" >
                                  <apex:param value="{!settlementPage}" />
                                  <apex:param value="{!settlementTotalPage}" />
                                </apex:outputText>

                                <apex:outputPanel rendered="{!If(settlementTotalPage>1 && settlementhasNext,true,false)}">
                                  <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="settlementnextPage()"/>
                                </apex:outputPanel>
                              </div>
                            </div>
                          </apex:outputPanel>

                        </div>
                      </div>

                      <script type="text/javascript">
                        if ( Cigna.Util.isSalesforce1() && Cigna.Util.isBrokerPortal()) {
                          $('.field-label').css('padding-left', '15px');
                        }
                      </script>
                    </apex:outputPanel> 
                  </div>
                  <!----Premium Settlement End---->
                          
                  <!----Member List Start---->
                  <div id="MemberList" class="bs tab-pane">
                    <apex:outputPanel layout="block" id="MemberListApex" rendered="{!!(isCustomerUser || fields2['individual'][JSINHTMLENCODE(policyType)])}">
                      <apex:actionFunction action="{!memberprevPage}" 
                               name="memberprevPage" 
                               reRender="memberTable"
                               status="loader-icon" 
                               oncomplete="Cigna.PolicyDetail.scrollToPanel('memberTable');"/>
                       
                      <apex:actionFunction action="{!membernextPage}" 
                               name="membernextPage" 
                               reRender="memberTable"
                               status="loader-icon" 
                               oncomplete="Cigna.PolicyDetail.scrollToPanel('memberTable');"/>
                      
                      <apex:actionFunction action="{!memberListSearch}" 
                              name="memberListSearch" 
                              reRender="memberTable,MemberListErrorApex"
                              status="loader-icon"/>
                    
                      <div class="bs row">
                        <div class="bs col-sm-12 col-xs-12" style="padding: 20px 0px 20px 0px; ">
                          <div class="bs col-sm-6 col-xs-12" style="padding-bottom:20px;">
                            <apex:SelectList id="selectedSearchOptionMember" size="1" value="{!memberSearchCriteria}" styleClass="bs form-field-style-select cigna-fg-gray-dark" style="font-size:1em; height:35px;" >
                              <apex:selectOptions value="{!memberSearchType}"/>            
                            </apex:SelectList>
                          </div>   
                      
                          <div class="bs col-sm-6 col-xs-12">
                                <apex:input id="selectedSearchValueMember" style="font-size:1em; height:35px; width:95%" styleClass="bs form-field-style cigna-fg-gray-dark" value="{!memberSearchInputText}"/><i class="fa fa-search cigna-fg-orange-dark text-center onclick-pointer" onclick="memberListSearchValidation()" style="width:5%" aria-hidden="true"/>
                          </div>
                        </div>
                        <div id="inputCharErrorMessageMember" class="bs col-sm-12 col-xs-12 text-center" style="color:red;padding-bottom:20px;display:none;">
                          {!$Label.Please_input_at_least_2_characters_to_search}
                        </div>
                        <div id="inputCharErrorMessageLongMember" class="bs col-sm-12 col-xs-12 text-center" style="color:red;padding-bottom:20px;display:none;">
                          {!$Label.Please_input_at_least_4_characters_to_search}
                        </div>

                        <apex:outputPanel id="MemberListErrorApex" layout="block">
                          <div id="MemberListError" class="bs col-sm-12 col-xs-12" style="color: red;padding-bottom: 20px;text-align: center; {!IF(showTooManyRecordError,'','display:none;')}">
                              {!$Label.Error_Too_Many_Records}
                          </div>

                          <div class="bs col-xs-12 search-criteria form-horizontal">
                            <div class="bs form-group">
                                 <label style="float: left;padding-left: 15px;" for="select-Branch" class="control-label">{!$Label.Pol_Branch}</label>
                                <div class="bs col-sm-4">
                                    <apex:selectList value="{!selectedMemberBranch}" multiselect="false" size="1" styleClass="bs form-field-style-select cigna-fg-gray-dark">
                                       <apex:selectOptions value="{!branchList}"/>
                                       <apex:actionSupport event="onchange" 
                                                           action="{!searchMemberListbybranch}" 
                                                           status="loader-icon" 
                                                           reRender="memberTable"/>
                                    </apex:selectList>
                                </div>
                                <!--<div class="bs col-sm-2">
                                    <button type="submit" class="bs btn btn-default">{!$Label.Pol_Search}</button>
                                </div>-->
                            </div>
                        </div>
                        </apex:outputPanel> 
                      </div>

                      <apex:outputPanel id="memberTable">
                        <div class="bs row">
                          <div class="bs col-xs-12 col-lg-12">
                              <table class="bs table" id="policy-fund-table">
                                <tbody class="hidden-sm hidden-xs">
                                    <tr class="bs table-header-row">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Cert No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Cert_No}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Name}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Relation'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Relation}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Plan'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Plan}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Effective_Date}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Status}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Life Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Life_Sum_Assured}</td> 
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['TPD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_TPD_Sum_Assured}</td> 
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['AD&D Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_AD_D_Sum_Assured}</td> 
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['LTD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_LTD_Sum_Assured}</td>       
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['CIB Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_CIB_Sum_Assured}</td>    
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Branch}</td>     
                                    </tr>
                                    <!--<apex:repeat value="{!memberMap[memberPage]}" var="m">
                                      <tr>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Cert No.'][policyType],'','display:none')}" >{!m.memberCertNo}</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Name'][policyType],'','display:none')}" >{!m.memberName}</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Relation'][policyType],'','display:none')}" >{!m.relation }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Plan'][policyType],'','display:none')}" >{!m.plan }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Effective Date'][policyType],'','display:none')}" >{!m.memberEffDate }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Status'][policyType],'','display:none')}" >{!m.memberStatus }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Benefit Type'][policyType],'','display:none')}" >{!m.benefitType }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Life Sum Assured'][policyType],'','display:none')}" >{!m.lifeSumAssured }</td> 
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['TPD Sum Assured'][policyType],'','display:none')}" >{!m.TPDSumAssured }</td> 
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['AD&D Sum Assured'][policyType],'','display:none')}" >{!m.ADandDSumAssured }</td> 
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['LTD Sum Assured'][policyType],'','display:none')}" >{!m.LTDSumAssured }</td>       
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['CIB Sum Assured'][policyType],'','display:none')}" >{!m.CIBSumAssured }</td>    
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Branch'][policyType],'','display:none')}" >{!m.branch }</td>
                                      </tr>
                                    </apex:repeat>-->
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <!--efulfillment enhanced revised  row showGrpCor-->
                                    <apex:repeat value="{!memberMap[memberPage]}" var="m">
                                      <tr class="showGrpCor bs {!IF(MOD(rowNum,2)==1,'grey-background','')}" data-certno="{!m.certificateNo}" onclick="clickToPop(this);">
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Cert No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.certificateNo}</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.fullName}</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Relation'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.insurableInterestReason}</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Plan'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.planDesc}</td>  <!-- JR1904 Linus -->
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!m.CertificateEffDate }-->
                                          <apex:outputText value="{0,date,yyyy/MM/dd}" escape="false">
                                               <!--Caden fix for HKSIR4516-->
                                              <apex:param value="{!m.effDateIndate}"/>
                                          </apex:outputText>
                                        </td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.memberStatusDesc }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.GroupMedicalBenefitStr }</td>
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Life Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                          <apex:outputText value="{!IF(m.lifeSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.lifeSumAssuredInNumber}"/>
                                          </apex:outputText>
                                        </td> 
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['TPD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                          <apex:outputText value="{!IF(m.TPDSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.TPDSumAssuredInNumber}"/>
                                          </apex:outputText>
                                        </td> 
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['AD&D Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                          <apex:outputText value="{!IF(m.addSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.addSumAssuredInNumber}"/>
                                          </apex:outputText>
                                        </td> 
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['LTD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                          <apex:outputText value="{!IF(m.LTDSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.LTDSumAssuredInNumber}"/>
                                          </apex:outputText>
                                        </td>       
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['CIB Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                          <apex:outputText value="{!IF(m.CIBSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.CIBSumAssuredInNumber}"/>
                                          </apex:outputText>
                                        </td>    
                                        <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.branchDesc  }</td>
                                      </tr>
                                      <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                    </apex:repeat>
                                </tbody>
                                  
                                <tbody class="visible-xs visible-sm hidden-md">
                                  <apex:variable value="{!1}" var="rowNum" />
                                  <apex:repeat value="{!memberMap[memberPage]}" var="m">
                                  <!--efulfillment enhanced revised  row showGrpCor-->
                                  <tr><td><table class="showGrpCor" data-certno="{!m.certificateNo}" onclick="if({!fields2['Policy Correspondence'][JSINHTMLENCODE(policyType)]}){clickToPop(this);}">
                                    <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}" >
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Cert No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Cert_No}</td>
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Cert No.'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.certificateNo}</td>
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                       <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Name}</td>
                                       <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Name'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.fullName}</td>
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Relation'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Relation}</td>
                                       <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Relation'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.insurableInterestReason}</td>
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Plan'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Plan}</td>
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Plan'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.planDesc}</td>  <!-- JR1904 Linus  -->
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Effective_Date}</td>
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Effective Date'][JSINHTMLENCODE(policyType)],'','display:none')}" ><!--{!m.CertificateEffDate }-->
                                          <apex:outputText value="{0,date,yyyy/MM/dd}" escape="false">
                                               <!--Caden fix for HKSIR4516-->
                                              <apex:param value="{!m.effDateIndate}"/>
                                          </apex:outputText>
                                      </td>
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Member_Status}</td>
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Member Status'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.memberStatusDesc }</td>
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}"> 
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.GroupMedicalBenefitStr }</td> 
                                    </tr>  
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Life Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Life_Sum_Assured}</td> 
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Life Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                        <apex:outputText value="{!IF(m.lifeSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.lifeSumAssuredInNumber}"/>
                                        </apex:outputText>
                                      </td> 
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['TPD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_TPD_Sum_Assured}</td>
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['TPD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                        <apex:outputText value="{!IF(m.TPDSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.TPDSumAssuredInNumber}"/>
                                        </apex:outputText>
                                      </td> 
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['AD&D Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_AD_D_Sum_Assured}</td>  
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['AD&D Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                        <apex:outputText value="{!IF(m.addSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.addSumAssuredInNumber}"/>
                                        </apex:outputText>
                                      </td>  
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['LTD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_LTD_Sum_Assured}</td> 
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['LTD Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                        <apex:outputText value="{!IF(m.LTDSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.LTDSumAssuredInNumber}"/>
                                        </apex:outputText>
                                      </td>
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['CIB Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_CIB_Sum_Assured}</td> 
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['CIB Sum Assured'][JSINHTMLENCODE(policyType)],'','display:none')}" >
                                        <apex:outputText value="{!IF(m.CIBSumAssuredInNumber == null ,'',policy.currencySymbol)} {0, Number,###,##0.00}" escape="false">
                                            <apex:param value="{!m.CIBSumAssuredInNumber}"/>
                                        </apex:outputText>
                                      </td> 
                                    </tr>
                                    <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                      <td class="bs field-label" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Branch}</td> 
                                      <td class="bs field-value" style="{!IF((isBrokerUser||$Permission.Customer_Service_User)&&fields2['Branch'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!m.branchDesc}</td> 
                                    </tr>
                                  </table></td></tr>
                                    <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                  </apex:repeat>
                                </tbody>
                              </table>
                          </div>
                        </div>

                        <div class="bs row">
                          <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                            <apex:outputPanel rendered="{!If(memberTotalPage>1 && memberhasPrev,true,false)}">
                            <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="memberprevPage();"/>
                            </apex:outputPanel>

                            <apex:outputText value="{!$Label.Page_0_of_1}" >
                              <apex:param value="{!memberPage}" />
                              <apex:param value="{!memberTotalPage}" />
                            </apex:outputText>

                            <apex:outputPanel rendered="{!If(memberTotalPage>1 && memberhasNext,true,false)}">
                              <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="membernextPage()"/>
                            </apex:outputPanel>
                          </div>
                        </div>
                      </apex:outputPanel>
                    </apex:outputPanel>
                  </div>
                  <!----Member List End---->

                  <!----Benefit Schedule Start---->
                  <div id="BenefitSchedule" class="bs tab-pane">
                    <apex:outputPanel id="BenefitScheduleApex" layout="block" rendered="{!!(fields2['individual'][JSINHTMLENCODE(policyType)])}">
                      
                      <apex:outputPanel id="CusBenefitScheduleListApex" layout="block">
                        <div class="bs panel two-column-table">
                          <div class="bs panel-body two-column-table-body">
                            <apex:outputPanel rendered="{!isCustomerUser}">
                              <div class="bs row">
                                  <div class="bs col-xs-6 col-lg-3 field-label">
                                    {!$Label.Pol_Plan_Type}
                                  </div>
                                  <div class="col-lg-9 col-xs-6 field-value">
                                    {!benefitScheduleInfo.planTypeDesc}
                                  </div>
                              </div>

                              <div class="bs row">
                                  <div class="bs col-xs-6 col-lg-3 field-label">
                                    {!$Label.Pol_Policy_Holder}
                                  </div>
                                  <!--//By Caden start JR1753 start-->
                                  <div class="col-lg-9 col-xs-6 field-value">
                                     {!policy.holder.fullName}
                                  </div>
                                  <!--//By Caden start JR1753 end-->
                              </div>
                            </apex:outputPanel>

                            <div class="bs row">
                                <div class="bs col-xs-6 col-lg-3 field-label">
                                  {!$Label.Pol_Benefit_Currency}
                                </div>
                                <div class="col-lg-9 col-xs-6 field-value">
                                  {!policy.currencyCodeDesc}
                                </div>
                            </div>
                          </div>
                        </div>
                      </apex:outputPanel>
                    
                      <apex:outputPanel id="CusBenefitScheduleDetailApex" layout="block" rendered="{!isCustomerUser}">
                      <!--efulfillment changed-->
                        <apex:actionFunction action="{!getBenefitScheduleByCertNo}" 
                                     name="showBenefitDetailByCertNo" 
                                     reRender="targetDetailCustomer,CusBenefitScheduleListApex"
                                     status="loader-icon"
                                     oncomplete="refreshFileNameANDDownload();"
                                     >
                          <apex:param name="firstParam" assignTo="{!targetCertNo}" value="" />
                        </apex:actionFunction>
                        
                        <div class="bs panel two-column-table minor-panel">
                          <apex:variable value="{!1}" var="rowNum" />
                          <apex:repeat value="{!userPlanList}" var="key">
                              <div data-plan="{!key.certificateNo}" class="bs col-xs-12 col-lg-12 planListPanelHeader panel-heading form-toggle-tab onclick-pointer">
                                <div class="bs col-xs-8 col-lg-8" style="padding:0px;">    
                                    {!key.insurableInterestReason} : {!key.fullName}
                                </div>
                                <!--<i aria-hidden="true" class="ci-hk-arrow-27 ci-hk-sm pull-right"></i>-->
                                <div id="{!targetCertNo}-{!rowNum}-person-arrow-up" class="bs col-xs-4 col-lg-4 section-arrow" style="padding:0px;text-align:right;">
                                     <apex:image value="{!$Resource.arrow_up}" height="25px"></apex:image>
                                </div>
                                <div id="{!targetCertNo}-{!rowNum}-person-arrow-down" class="bs col-xs-4 col-lg-4" style="display:none;padding:0px;text-align:right;">
                                     <apex:image value="{!$Resource.arrow_down}" height="25px"></apex:image>
                                </div>
                              </div>   
                              <div data-plan="{!key.certificateNo}" class="bs planListPanel panel-body two-column-table-body form-toggle-content" style="display:none;">     
                              </div>
                              <apex:variable var="rowNum" value="{!rowNum + 1}" />
                          </apex:repeat>
                        </div>
                        

                        <apex:outputPanel id="targetDetailCustomer" layout="block">
                          <div id="targetPlanCustomer" style="display:none;">
                            
                            <div class="benefit-plan">
                              <div class="bs panel two-column-table">
                                <!--efulfillment enhanced added start-->
                                
                                  <!-- Add by Manuel to supplement the field -->
                                  <apex:outputPanel layout="block" rendered="{!targetCertNo!=''}">
                                      <apex:repeat value="{!effStsMap[targetCertNo]}" var="rtnObj">
                                          <div class="bs row">
                                              <div class="bs col-xs-6 col-lg-5 field-label" style="padding:5px 0px 5px 35px">{!if(rtnObj.benefitDetailItemDesc=='Member Coverage Effective Date',$Label.Pol_MebCovEfeDate,$Label.Pol_MebStatus)}</div>
                                              <div class="bs col-xs-6 col-lg-7 field-value" style="padding:5px 0px">{!rtnObj.BenefitLevelDesc}</div>
                                          </div>
                                      </apex:repeat>
                                  </apex:outputPanel>

                                  <!-- 20200706 - minghua - Cigna SME Package Plan - Vision Benefit -->
                                  <apex:outputPanel layout="block" rendered="{!targetCertNo!='' && fields2['Policy Doc'][JSINHTMLENCODE(policyType)] }">
                                    <!-- <div class="bs panel panel-default col-xs-12 two-column-table"> -->
                                    <div class="bs row">
                                        <div id="groupPolicyDocumentPanelHeader" class="bs panel-heading form-toggle-tab">
                                            {!$Label.Pol_Policy_Documents}
                                           <!-- <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i> -->
                                        </div>
                                          <div id="groupPolicyDocumentPanel" class="bs col-xs-12 col-sm-12 panel-body form-toggle-content groupDocumentPanel" > 
                                            <apex:variable var="tmpIdx" value="{!0}" />  
                                             <apex:repeat value="{!curGroupDocList}" var="myList">
                                                 <apex:outputPanel rendered="{!isBrokerUser}">     
                                                    <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;' onclick="showLoading();PolicyDetailAF.downloadDocument('{!grpDocAttIDList[tmpIdx]}','{!myList.attachmentKey}');">
                                                         <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" data-brkatt="{!grpDocAttIDList[tmpIdx]}"   >
                                                              <div class="fw-icon">
                                                                <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                              </div>
                                                              <div class="fw-filename">
                                                                <span class='txt-filename'>{!myList.Description}</span><br/>                                               
                                                              </div>                                                                
                                                         </div>                                                       
                                                    </div>
                                                 </apex:outputPanel>  
                                                 <apex:outputPanel rendered="{!!isBrokerUser}"> 
                                                    <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;'>
                                                        <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" data-brkatt="{!grpDocAttIDList[tmpIdx]}"   >
                                                              <div class="fw-icon">
                                                                <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                              </div>
                                                              <div class="fw-filename">
                                                                <span class='txt-filename'>{!myList.Description}</span><br/>                                               
                                                              </div>                                                                
                                                         </div>                                                       
                                                    </div>                                                                                                                                             
                                                </apex:outputPanel> 
                                                <div style='display:none;'>
                                                    <apex:outputPanel rendered="{!!isBrokerUser}"><a id="dlink_{!grpDocAttIDList[tmpIdx]}" href="{!downloadSitePrefix}apex/ComFileDownLoadVFP?lang={!curLang}&attID={!grpDocAttIDList[tmpIdx]}&attKey={!myList.attachmentKey}&pol={!JSINHTMLENCODE(policyNumber)}&appName=CUSTOMER_PORTAL"  target="_blank"></a></apex:outputPanel>
                                                    <apex:variable var="tmpIdx" value="{!tmpIdx+1}" />  
                                                </div>
                                            </apex:repeat>
                                        </div>
                                    </div>
                                  </apex:outputPanel>
                                
                                  <!-- 20200706 - minghua - Cigna SME Package Plan - Vision Benefit -->
                                  <apex:actionFunction action="{!switchPCorList}"  name="switchPCorList"  namespace="PolicyDetailAF" reRender="grpCorDocCtn" status="loader-icon"  oncomplete="refreshFileNameANDDownload();"/> 
                                  <apex:outputPanel layout="block" rendered="{!targetCertNo!='' && fields2['Policy Correspondence'][JSINHTMLENCODE(policyType)] && isGroup && isCustomerUser}">
                                    <div class="bs row">
                                      <div id="groupCorrespondencePanelHeader" class="bs panel-heading form-toggle-tab">
                                          {!$Label.efulfillment_policy_correspondences}
                                         <!-- <i aria-hidden="true" class="ci-hk-arrow-28 ci-hk-sm pull-right"></i> -->
                                      </div>
                                      <div id="groupCorrespondencePanel" class="bs col-xs-12 col-sm-12 panel-body form-toggle-content">
                                        <apex:outputPanel layout="block" id="grpCorDocCtn" rendered="{!pCorDocList.size>0}">
                                          <apex:SelectList size="1" value="{!grpSelectedYear}" styleClass="bs form-field-style-select cigna-fg-gray-dark " style="font-size:1em; height:35px; width:auto !important;" onchange="PolicyDetailAF.switchPCorList();" >
                                            <apex:selectOptions value="{!grpYearList}"/>            
                                          </apex:SelectList>
                                          <br/><br/>
                                          <apex:outputPanel id="groupPolCorList">
                                            <apex:variable var="tmpIdx" value="{!0}" />  
                                              <apex:repeat id="groupCurCorDocList" value="{!pCorDocList}" var="myList">
                                                <apex:outputPanel >
                                                  <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;'>
                                                    <div class="fileWrapper col-xs-12 col-sm-12" data-atk="{!myList.attachmentKey}" data-brkatt="{!grpPCDocAttIDList[tmpIdx]}">
                                                      <div class="fw-icon">
                                                        <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                      </div>
                                                      <div class="fw-filename">
                                                        <span class='txt-filename'>{!myList.Description}</span><br/>
                                                        <span style='font-size: 12px !important;color:gray'>{!myList.createdDateStrDisp}</span>    
                                                      </div>     
                                                    </div>                                                     
                                                  </div>
                                                </apex:outputPanel> 
                                              <div style='display:none;'>
                                                <apex:outputPanel ><a id="dlink_{!grpPCDocAttIDList[tmpIdx]}" href="{!downloadSitePrefix}apex/ComFileDownLoadVFP?lang={!curLang}&attID={!grpPCDocAttIDList[tmpIdx]}&attKey={!myList.attachmentKey}&pol={!JSINHTMLENCODE(policyNumber)}&appName=CUSTOMER_PORTAL&policyType={!JSINHTMLENCODE(policyType)}&SHA256Key={!SHA256Key}"  target="_blank"></a></apex:outputPanel>
                                                <apex:variable var="tmpIdx" value="{!tmpIdx+1}" />  
                                              </div>
                                            </apex:repeat>
                                          </apex:outputPanel>
                                        </apex:outputPanel>
                                          <!-- <apex:outputPanel id="polCorListNotFound" rendered="{!pCorDocList.size==0}">
                                            <div class='bs col-xs-12 col-sm-12 ' >
                                              {!$Label.EFM_No_documents}
                                            </div>
                                          </apex:outputPanel> -->

                                        <!--insurance certificate PDF , new file to do-->
                                        <apex:outputPanel rendered="{!displayInCert}">
                                          <div class='col-xs-11 col-sm-3 dy-col' style='padding:10px;'  >
                                              <div class="fileWrapper col-xs-12 col-sm-12" data-atk="Insurance_Certificate" data-brkatt="{!PDFAttachmentId}">
                                                  <div class="fw-icon">
                                                      <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                                  </div>
                                                  <div class="fw-filename">
                                                      <span class='txt-filename'><apex:outputPanel rendered="{!contains(transKey,'~InsuranceCertificate~')}">{!transField['InsuranceCertificate'][$Label.Header_Language_Code_Current]}</apex:outputPanel></span>
                                                  </div>  
                                              </div>                                                              
                                          </div> 
                                          <div >
                                              <apex:outputPanel rendered="{!!isBrokerUser}"><a id="dlink_{!PDFAttachmentId}" href="{!downloadSitePrefix}apex/ComFileDownLoadVFP?lang={!curLang}&attID={!PDFAttachmentId}&attKey=Insurance_Certificate&pol={!JSINHTMLENCODE(policyNumber)}&appName=CUSTOMER_PORTAL&policyType={!JSINHTMLENCODE(policyType)}&SHA256Key={!SHA256Key}"  target="_blank"></a></apex:outputPanel>
                                          </div>       
                                        </apex:outputPanel>
                                      </div>
                                    </div>
                                    <!-- <script>
                                      // CR-56_Link_20220214
                                      $("#groupCorrespondencePanelHeader").on("click",function() {
                                         $("#groupCorrespondencePanel").toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                                      });
                                      $("#groupCorrespondencePanelHeader").trigger('click');
                                    </script>  -->
                                  </apex:outputPanel>

                                  <!--efulfillment enhanced added end-->
                                  <!-- Added by IBM(Roy) due to PEI-156 START TEMP******
                                <apex:outputPanel layout="block" rendered="{!targetCertNo!=''}">
                                  <apex:repeat value="{!effStsMap[targetCertNo]}" var="rtnObj">
                                  <!-- Mark Start -->
<!--                                     <div class="bs row" >
                                      <div class="bs col-xs-6 col-lg-5 field-label grey-background" style="padding:5px 0px 5px 25px">
                                         {!rtnObj.benefitItemDescDtl} 
                                      </div>
                                      <div class="bs col-xs-6 col-lg-7 field-label grey-background" style="padding:5px 0px">
                                           <apex:outputLabel style="font-weight:400" value="" />
                                      </div>                             
                                    </div> 
                                    <div class="bs row">
                                      <div class="bs col-xs-6 col-lg-5 field-label" style="padding:5px 0px 5px 35px">{!rtnObj.benefitDetailItemDesc}</div>
                                      <div class="bs col-xs-6 col-lg-7 field-value" style="padding:5px 0px">{!rtnObj.BenefitLevelDesc}</div>
                                    </div>
                                  </apex:repeat>
                                </apex:outputPanel>
                                <!-- Added by IBM(Roy) due to PEI-156/PORTABLE R2 END -->
                                
                                <!--non-GS Benefit List Start-->
                                <apex:variable value="{!'new'}" var="lastCode" />
                                <apex:repeat value="{!planMap[targetCertNo]}" var="c" rendered="{!!IsGSUser}">
                                  <apex:outputPanel rendered="{!lastCode == 'new'}">
                                    <div class="bs row grey-background">
                                      <div class="bs col-lg-12" style="padding: 8px 15px;">
                                        {!c.planDescription}
                                      </div>
                                    </div>
                                  </apex:outputPanel>

                                  
                                  <apex:outputPanel rendered="{!!(c.benefitName == lastCode)}">
                                    <div class="bs row" style="padding: 20px 15px;margin-top: 15px;font-weight: bold;" >
                                        <apex:outputText value="{!c.benefitDesc}" escape="false"/>
                                    </div>
                                  </apex:outputPanel>

                                  <apex:outputPanel rendered="{!c.benefitItemIdentity != 'Y'}">
                                    <div class="bs row" >
                                      <div class="bs col-xs-6 col-lg-5 field-label grey-background" style="padding:5px 0px 5px 25px">
                                         {!c.benefitDetailItemDesc}
                                      </div>
                                      <!--Added by Terry on 2018/03/27  modified on 2018/04/11-->
<!--                                       <div class="bs col-xs-6 col-lg-7 field-label grey-background" style="{!IF(c.benefitItemCode=='Z9001','padding:5px 0px 0px 0px','padding:5px 0px')}">
                                           <apex:outputLabel style="font-weight:400" value="{!if(c.benefitItemCode=='Z9001',c.benefitLevelDesc, '')}" />
                                      </div> -->
<!--                                      <div class="bs col-xs-6 col-lg-7 field-label grey-background" style="{!IF(c.benefitItemCode=='Z9001' || c.benefitItemCode=='Z9002' || c.benefitItemCode=='Z9003','padding:5px 0px 0px 0px','padding:5px 0px')}">
                                           <apex:outputLabel style="font-weight:400" value="{!if(c.benefitItemCode=='Z9001' || c.benefitItemCode=='Z9002'|| c.benefitItemCode=='Z9003',c.benefitLevelDesc, '')}" />
                                      </div>     -->  
                                     <div class="bs col-xs-6 col-lg-7 field-label grey-background" style="{!IF(c.benefitLevelDesc != null && trim(c.benefitLevelDesc) != '','padding:5px 0px 0px 0px','padding:5px 0px')}">
                                           <apex:outputLabel style="font-weight:400" value="{!if(c.benefitLevelDesc != null && trim(c.benefitLevelDesc) != '',c.benefitLevelDesc, '')}" />
                                      </div>                                                                          
                                      <!--Added by Terry on 2018/03/27  modified on 2018/04/11-->
                                    </div>
                                  </apex:outputPanel>

                                  <apex:outputPanel rendered="{!c.benefitItemIdentity == 'Y' && c.isDisplay}">
                                    <div class="bs row">
                                      <div class="bs col-xs-6 col-lg-5 field-label" style="padding:5px 0px 5px 35px">{!c.benefitDetailItemDesc}</div> 
                                      <div class="bs col-xs-6 col-lg-7 field-value" style="padding:5px 0px">{!c.BenefitLevelDesc}</div>
                                    </div>
                                  </apex:outputPanel>

                                  <apex:variable value="{!c.benefitName}" var="lastCode" />
                                </apex:repeat>  
                                <!--non-GS Benefit List End-->
                                
                                <!--GS Benefit List Start-->
                                <apex:variable value="{!0}" var="rowNum"/>
                                <apex:repeat value="{!GSPlanMap[targetCertNo]}" var="sectionType" rendered="{!IsGSUser}">
                                        <div data-plan="{!sectionType}" class="bs col-xs-12 col-lg-12 gs-benefit-class planListPanelHeader panel-heading form-toggle-tab onclick-pointer" >
                                            <div class="bs col-xs-8 col-lg-8" style="padding:0px;">
                                                <apex:outputText value="{!transField['BasicBenefit'][$Label.Header_Language_Code_Current]}" style="font-weight: bold;width:150px;" rendered="{!sectionType==sectionType_Basic && contains(transKey, "~BasicBenefit~")}"/>
                                                <apex:outputText value="{!transField['TopUpBenefit'][$Label.Header_Language_Code_Current]}" style="font-weight: bold;width:150px;" rendered="{!sectionType==sectionType_TopUp && contains(transKey, "~TopUpBenefit~")}"/>
                                            
                                            </div>
                                            <div id="{!targetCertNo}-{!rowNum}-benefit-arrow-up" class="bs col-xs-4 col-lg-4 section-arrow" style="padding:0px;text-align:right;">
                                                <apex:image value="{!$Resource.arrow_up}" height="25px"></apex:image>
                                            </div>
                                            <div id="{!targetCertNo}-{!rowNum}-benefit-arrow-down" class="bs col-xs-4 col-lg-4" style="display:none;padding:0px;text-align:right;">
                                                <apex:image value="{!$Resource.arrow_down}" height="25px"></apex:image>
                                            </div>
                                        </div>                                        
                                        
                                        <div style="display:none;">
                                        <apex:variable value="{!'new'}" var="lastCode" />
                                        <apex:repeat value="{!GSPlanMap[targetCertNo][sectionType]}" var="benefit" >
                                            <apex:outputPanel rendered="{!!(benefit.benefitName == lastCode)}">
                                                <div class="bs row" style="padding: 20px 15px;margin-top: 15px;font-weight: bold;" >
                                                    <apex:outputText value="{!benefit.benefitDesc}" escape="false"/>
                                                </div>
                                            </apex:outputPanel>
                                            
                                            <apex:outputPanel rendered="{!benefit.benefitItemIdentity != 'Y'}">
                                                <div class="bs row" >
                                                  <div class="bs col-xs-6 col-lg-5 field-label grey-background" style="padding:5px 0px 5px 25px">
                                                     {!benefit.benefitDetailItemDesc}
                                                  </div>
                                                  
                                                 <div class="bs col-xs-6 col-lg-7 field-label grey-background" style="{!IF(benefit.benefitLevelDesc != null && trim(benefit.benefitLevelDesc) != '','padding:5px 0px 0px 0px','padding:5px 0px')}">
                                                       <apex:outputLabel style="font-weight:400" value="{!if(benefit.benefitLevelDesc != null && trim(benefit.benefitLevelDesc) != '',benefit.benefitLevelDesc, '')}" />
                                                  </div>                                                                          
                                                </div>
                                              </apex:outputPanel>

                                              <apex:outputPanel rendered="{!benefit.benefitItemIdentity == 'Y' && benefit.isDisplay}">
                                                <div class="bs row">
                                                  <div class="bs col-xs-6 col-lg-5 field-label" style="padding:5px 0px 5px 35px">{!benefit.benefitDetailItemDesc}</div> 
                                                  <div class="bs col-xs-6 col-lg-7 field-value" style="padding:5px 0px">{!benefit.BenefitLevelDesc}</div>
                                                </div>
                                              </apex:outputPanel>
                                              
                                            <apex:variable value="{!benefit.benefitName}" var="lastCode" />                                                                                        
                                        </apex:repeat> 
                                        </div>
                                        <apex:variable value="{!rowNum + 1}" var="rowNum"/>                                        
                                </apex:repeat>
                                 <script>   
                                  //CR-56_Link_20220214
                                    $('.gs-benefit-class').on("click",onChangeSection);                                    
                                    function onChangeSection(evt){
                                        console.log('onChangeSection');
                                        $(this).next().toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                                    }
                                </script>
                                <!--GS Benefit List End-->
                                
                              </div>
                            </div>
                          </div>                                                          
                          <script type="text/javascript">
                            $("#targetPlanCustomer .benefit-plan").appendTo(".planListPanel[data-plan='{!targetCertNo}']");
                          </script>
                        </apex:outputPanel>
                        
                        <script>                                  
                          //CR-56_Link_20220214                            
                          $(".planListPanelHeader").on("click",function() {
                            console.log('benefit-plan length:'+$(this).next().find('.benefit-plan').length);
                            $(this).next().toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                            if($(this).next().find('.benefit-plan').length == 0){
                              console.log('plan value:'+$(this).data('plan'));
                              //CR-56_Link_20220214
                              $('.gs-benefit-class').off('click', onChangeSection);
                              showBenefitDetailByCertNo($(this).data('plan'));
                            }
                          });

                          
                        </script>

                      </apex:outputPanel>

                      <!--broker part -->
                      <apex:outputPanel id="BrkBenefitScheduleDetailApex" layout="block" rendered="{!isBrokerUser}">

                        <apex:actionFunction action="{!getBenefitScheduleByPlanName}" 
                                     name="showBenefitDetail" 
                                     reRender="targetDetail"
                                     status="loader-icon">
                          <apex:param name="firstParam" assignTo="{!targetPlanName}" value="" />
                        </apex:actionFunction>

                        <div class="bs panel two-column-table minor-panel">
                          <apex:variable value="{!1}" var="rowNum" />
                          <apex:repeat value="{!planMap}" var="key">
                            <apex:outputPanel rendered="{! key!= FAKE_PLAN_NAME}">
                              <div data-plan="{!key}" class="bs planListPanelHeader panel-heading form-toggle-tab onclick-pointer">
                                <!--PLAN -->{!planNoMap[key]}  <!-- Linus 2021-04-28 JR1904 -->
                                <i aria-hidden="true" class="ci-hk-arrow-27 ci-hk-sm pull-right"></i>
                              </div>

                              <div data-plan="{!key}" class="bs planListPanel panel-body two-column-table-body form-toggle-content" style="display:none;">
                                  
                              </div>
                              <apex:variable var="rowNum" value="{!rowNum + 1}" />
                            </apex:outputPanel>
                          </apex:repeat>
                        </div>

                        <apex:outputPanel id="targetDetail" layout="block">
                          <div id="targetPlan" style="display:none;">
                            <div class="benefit-plan">
                              <div class="bs panel two-column-table">
                                
                                <apex:variable value="{!'new'}" var="lastCode" />
                                <apex:repeat value="{!planMap[targetPlanName]}" var="c">
                                  
                                  <apex:outputPanel rendered="{!!(c.benefitName == lastCode)}">
                                    <div class="bs row" style="padding: 20px 15px;margin-top: 15px;font-weight: bold;" >
                                        <apex:outputText value="{!c.benefitDesc}" escape="false"/>
                                    </div>
                                  </apex:outputPanel>

                                  <apex:outputPanel rendered="{!c.benefitItemIdentity != 'Y'}">
                                    <div class="bs row" >
                                      <div class="bs col-xs-12 col-lg-12 field-label grey-background" style="padding:5px 0px 5px 25px">
                                         {!c.benefitDetailItemDesc}
                                      </div>
                                    </div>
                                  </apex:outputPanel>

                                  <apex:outputPanel rendered="{!c.benefitItemIdentity == 'Y'}">
                                    <div class="bs row">
                                      <div class="bs col-xs-6 col-lg-4 field-label" style="padding:5px 0px 5px 35px">{!c.benefitDetailItemDesc}</div> 
                                      <div class="bs col-xs-6 col-lg-8 field-value" style="padding:5px 0px">{!c.BenefitLevelDesc}</div>
                                    </div>
                                  </apex:outputPanel>

                                  <apex:variable value="{!c.benefitName}" var="lastCode" />
                                </apex:repeat>  
                              </div>
                            </div>
                          </div>

                          <script type="text/javascript">
                            $("#targetPlan .benefit-plan").appendTo(".planListPanel[data-plan='{!targetPlanName}']");
                          </script>
                        </apex:outputPanel>

                        <script>
                          //CR-56_Link_20220214
                          $(".planListPanelHeader").on("click",function() {
                            console.log($(this).next().find('.benefit-plan').length);
                            $(this).next().toggle(null, null, Cigna.PolicyDetail.changeSection(this));
                            if($(this).next().find('.benefit-plan').length == 0){
                              showBenefitDetail($(this).data('plan'));
                            }
                          });
                        </script>
                      </apex:outputPanel>
                    </apex:outputPanel>
                  </div>
                  <!----Benefit Schedule End---->

                  <!--efulfillment enhanced added start -->
<div id="reallocationOverlayGrpCor" style="display:none;">
            <div id="reallocationSpecialBoxGrpCor">
              <apex:outputPanel id="popUpGrpCorPanel"  >
                <a href="#">
                    <div id="reallocationCloseOverlayGrpCor" class="glyphicon glyphicon-remove" onclick="reallocationToggleOverlayGrpCor();"></div>
                </a>
                <h4 style="font-weight:bold;"><span style='display:none;'>{!$Label.efulfillment_policy_correspondences} {!targetCertNo}:</span></h4>
                <div style="padding-bottom:10px; border-top: 1px solid #f2f2f2;"></div>
                
                    <div id="reallocationtccontentGrpCor" style="text-align:left">
                        <apex:outputPanel id="grpCorList" rendered="{!curGrpCorDocList.size>0}">
                          <apex:variable var="tmpIdx" value="{!0}" />
                            <apex:repeat id="curGrpCorDocList" value="{!curGrpCorDocList}" var="myList">
                                <apex:outputPanel rendered="{!isBrokerUser}">
                                    <div class='col-xs-11 col-sm-4 dy-col' style='padding:10px;' onclick="showLoading();PolicyDetailAF.downloadDocument('{!tempAttList[tmpIdx]}','{!myList.attachmentKey}');" >   
                                        <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" data-brkatt="{!tempAttList[tmpIdx]}"   >
                                              <div class="fw-icon">
                                                <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                              </div>
                                              <div class="fw-filename">
                                                <span class='txt-filename'>{!myList.Description}</span><br/>                             
                                              </div>                                                    
                                       </div>                                    
                                   </div>
                               </apex:outputPanel>     
                               <apex:outputPanel rendered="{!!isBrokerUser}">    
                                    <div class='col-xs-11 col-sm-4 dy-col' style='padding:10px;'>   
                                        <div class="fileWrapper col-xs-12 col-sm-12 {!if(myList.isNew,'newFile','')}" data-atk="{!myList.attachmentKey}" data-brkatt="{!tempAttList[tmpIdx]}"   >
                                              <div class="fw-icon">
                                                <img src="{!URLFOR($Resource.efulfillment, 'icon.png')}" style='width:100%'/>
                                              </div>
                                              <div class="fw-filename">
                                                <span class='txt-filename'>{!myList.Description}</span><br/>                             
                                              </div>                                                    
                                       </div>                                    
                                   </div>
                              </apex:outputPanel>
                              <div style='display:none;'>
                                  <apex:outputPanel rendered="{!!isBrokerUser}"><a id="dlink_{!tempAttList[tmpIdx]}" href="{!downloadSitePrefix}apex/ComFileDownLoadVFP?lang={!curLang}&attID={!tempAttList[tmpIdx]}&attKey={!myList.attachmentKey}&pol={!JSINHTMLENCODE(policyNumber)}&appName=CUSTOMER_PORTAL" target="_blank"></a></apex:outputPanel>
                              </div>
                              <apex:variable var="tmpIdx" value="{!tmpIdx+1}" />  
                            </apex:repeat> 
                      </apex:outputPanel>
                      <apex:outputPanel id="grpCorNotFound" rendered="{!curGrpCorDocList.size==0}">
                      <div class="bs col-sm-12 col-xs-12">
                      {!$Label.EFM_No_documents}
                    </div>
                      </apex:outputPanel>
                          
                    </div>
                </apex:outputPanel>
                
                 
            </div>
        </div>
               
        <apex:actionFunction action="{!refreshGrpCor}" 
                                     name="refreshGrpCor" 
                                     reRender="popUpGrpCorPanel"
                                     status="loader-icon"
                                     oncomplete="reallocationToggleOverlayGrpCor();refreshFileNameANDDownload();"
                                     >
                          <apex:param name="firstParam" assignTo="{!targetCertNo}" value="" />
                        </apex:actionFunction>
        <script>
          /*
          $(".showGrpCor").click (function(){
            alert('click');
             var certno = $(this).data("certno");
             refreshGrpCor(certno);
          });
          */
          function clickToPop(obj){
             var certno = $(obj).data("certno");
             refreshGrpCor(certno);
          }

      function reallocationToggleOverlayGrpCor() {
            if (!Cigna.Util.checkWebView()) {
              //  closetermsandCondition();
            }
            var overlay = document.getElementById('reallocationOverlayGrpCor');
            var specialBox = document.getElementById('reallocationSpecialBoxGrpCor');
            overlay.style.opacity = .95;
            if (overlay.style.display == "block") {
          //    $("body").removeClass('noscroll');
                overlay.style.display = "none";
                specialBox.style.display = "none";
            } else {
            //  $("body").addClass('noscroll');
                overlay.style.display = "block";
                specialBox.style.display = "block";
            }
         //   alert('ok');
        }
        </script>
        <style>
        .showGrpCor{
          cursor: pointer;
        }

        div#reallocationOverlayGrpCor {
                display: none;
                z-index: 12;
                background: #D9D9D6;
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0px;
                left: 0px;
                text-align: center;
            }


         #reallocationCloseOverlayGrpCor,
          #reallocationCloseOverlayWebGrpCor
          {
                position: absolute;
                top: 10px;
                right: 10px;
            }
        #reallocationtccontentMGM {
                padding: 10px;
                color: #000;
                font-size: 12px;
                width: 100%;
                height: 90%;
                overflow-y: auto;
                       
              }
        @media (max-width: 767px) {
            div#reallocationSpecialBoxGrpCor { 
              display: none;
              position: absolute;
              z-index: 13;
              margin: 100px auto 0px auto;
              width: 90%;
              height: 80%;
              background: #FFF;
              color: #000;
              left: 5%;
              padding: 20px;
              border-radius: 5px;
            }
        }
        @media (min-width: 768px) {
           
            div#reallocationSpecialBoxGrpCor {

             display: none;
              position: absolute;
              z-index: 13;
              margin: 150px auto 0px auto;
              width: 80%;
              height: 60%;
              background: #FFF;
              color: #000;
              left: 10%;
              padding: 20px;
              border-radius: 5px;
            }
            
           
        }
      </style>
<!--efulfillment enhanced added end -->


                  <!----Remaining Clinic Visits Tab Start---->
                  <div id="RemainingClinicVisits" class="bs tab-pane">
                    <apex:outputPanel id="RemainingClinicVisitsApex" layout="block" rendered="{!!(isBrokerUser || fields2['individual'][JSINHTMLENCODE(policyType)])}">
                      <!--apex:actionFunction action="{!benefitprevPage}" 
                                     name="benefitprevPage" 
                                     reRender="benefitTable"
                                     status="loader-icon" 
                                     oncomplete="Cigna.PolicyDetail.scrollToPanel('benefitTable');"/>
                      <apex:actionFunction action="{!benefitnextPage}" 
                                     name="benefitnextPage" 
                                     reRender="benefitTable"
                                     status="loader-icon" 
                                     oncomplete="Cigna.PolicyDetail.scrollToPanel('benefitTable');"/-->
                                    
                      <!-- Add by Manuel that customized union struct with two classes -->
                      <apex:actionFunction action="{!usBenefitCombinedprevPage}" 
                                     name="usBenefitCombinedprevPage" 
                                     reRender="benefitTable"
                                     status="loader-icon" 
                                     oncomplete="Cigna.PolicyDetail.scrollToPanel('benefitTable');"/>
                      <apex:actionFunction action="{!usBenefitCombinednextPage}" 
                                     name="usBenefitCombinednextPage" 
                                     reRender="benefitTable"
                                     status="loader-icon" 
                                     oncomplete="Cigna.PolicyDetail.scrollToPanel('benefitTable');"/>
                      <!--JOBR23-20220106-Kirk-->
                      <apex:actionFunction action="{!getClinicVisitCountByCertNo}" 
                                     name="getClinicVisitCountByCertNo" 
                                     reRender="targetClinicCustomer,prevNextPage"
                                     status="loader-icon"
                                     oncomplete="Cigna.PolicyDetail.scrollToPanel('benefitTable');"
                                     >
                          <apex:param name="firstParam" assignTo="{!targetCertNo}" value="" />
                          <!--JOBR24-KIRK-20220119-Separate inpatient visit counts into another tab-->
                          <apex:param name="secondParam" assignTo="{!clinicOrInpatient}" value="" />
                     </apex:actionFunction>               
                          
                      <!-- Add by Manuel that comment out to make it hidden from the page -->
                      <!--<div class="bs panel two-column-table">
                        <div class="bs panel-body two-column-table-body">
                          <div class="bs row">
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isCustomerUser)&&fields2['Overall Outpatient Max No. Visits'][policyType]}">
                              <div class="bs col-xs-9 col-md-6 field-label">
                                {!$Label.Pol_Overall_Outpatient_Maximum_No_of_Visits_Per_Policy_Year}
                              </div>
                              <div class="bs col-xs-3 col-md-6 field-value"> 
                                <apex:outputText value="{!clinicVisitSummary.overallOutpatientMaximumNo}"/>
                              </div>
                            </apex:outputPanel>
                          </div>
                          <div class="bs row">
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isCustomerUser)&&fields2['Total Visited'][policyType]}">
                              <div class="bs col-xs-9 col-md-6 field-label">
                                {!$Label.Pol_Total_Visited}
                              </div>
                              <div class="bs col-xs-3 col-md-6 field-value"> 
                                <apex:outputText value="{!clinicVisitSummary.totalVisitedCount}"/>
                              </div>
                            </apex:outputPanel>
                          </div>
                          <div class="bs row">
                            <apex:outputPanel layout="block" rendered="{!($Permission.Customer_Service_User || isCustomerUser)&&fields2['Total Remaining Visit Balance'][policyType]}">
                                <div class="bs col-xs-9 col-md-6 field-label">
                                  {!$Label.Pol_Total_Remaining_Visit_Balance}
                                </div>
                                <div class="bs col-xs-3 col-md-6 field-value">
                                  <apex:outputText value="{!clinicVisitSummary.totalRemainingVisitBalance}" />
                                </div>
                            </apex:outputPanel>
                          </div>
                        </div>
                      </div>-->

                      <div class="hidden-xs" style="padding-bottom: 50px;"/>

                      <apex:outputPanel id="benefitTable" layout="block">
                          <div class="bs panel two-column-table">
                          <!--JOBR26-20220110-Kirk-->
                          <div>
                            <span style="color:red">{!$Label.Pol_Benefit_Caveat}</span>
                          </div>
                          <br/>
                          <div class="bs panel-heading">
                            {!$Label.Pol_Benefit_Details}
                          </div>
                          <!--JOBR23-20220106-Kirk-->
                          <div class="bs panel two-column-table minor-panel">
                          <apex:variable value="{!1}" var="rowNum" />
                          <apex:repeat value="{!effStatusPList}" var="key">
                              <div data-plan="{!key.certificateNo}" class="bs col-xs-12 col-lg-12 clinicListPanelHeader panel-heading form-toggle-tab onclick-pointer">
                                <div class="bs col-xs-8 col-lg-8" style="padding:0px;">    
                                    {!key.insurableInterestReason} : {!key.fullName}
                                </div>
                                <!--<i aria-hidden="true" class="ci-hk-arrow-27 ci-hk-sm pull-right"></i>-->
                                <div id="{!targetCertNo}-{!rowNum}-person-arrow-up" class="bs col-xs-4 col-lg-4 section-arrow" style="padding:0px;text-align:right;">
                                     <apex:image value="{!$Resource.arrow_up}" height="25px"></apex:image>
                                </div>
                                <div id="{!targetCertNo}-{!rowNum}-person-arrow-down" class="bs col-xs-4 col-lg-4" style="display:none;padding:0px;text-align:right;">
                                     <apex:image value="{!$Resource.arrow_down}" height="25px"></apex:image>
                                </div>
                              </div>
                              <div data-plan="{!key.certificateNo}" class="bs clinicListPanel panel-body two-column-table-body form-toggle-content" style="display:none;">
                              </div>
                              <apex:variable var="rowNum" value="{!rowNum + 1}" />
                          </apex:repeat>
                        </div>
                       <apex:outputPanel id="targetClinicCustomer" layout="block">
                        <div id ="benefitPanel" class="bs panel-body table-panel-body two-column-table-body" style="display:none" >
                          <div class="benefitPanel">
                            <table class="bs table">
                              <tbody class="hidden-xs">
                                <tr class="bs table-header-row">
                                  <!--<td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Code'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Code}</td>-->
                                  <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                  <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Maximum_No_of_Visits_Per_Policy_Year}</td>
                                  <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Visited}</td>
                                  <td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Visit_Balance}</td>
                                </tr>
                                        
                                <apex:variable value="{!1}" var="rowNum" />
                                <!--apex:repeat value="{!benefitMap[benefitPage]}" var="b"-->
                                  <!-- Add by Manuel that customized union struct with two classes -->
                                  <!--Non-GS Clinic Visit Destop Table Start-->
                                  <apex:repeat value="{!cBenefitMap[usBenefitCombinedPage]}" var="category" rendered="{!!IsGSUser}">
                                    <apex:repeat value="{!category.benefitList}" var="b">
                                          <tr class="bs {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Code'][policyType],'','display:none')}" >{!b.benefitDetailItemCode}</td>-->
                                            <!--JOBR25-Kirk-20210110-->
                                            <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][policyType],'','display:none')}" >
                                            <p style="{!IF(b.IsCombinedBenefit,'','display:none')}"><b>{!$Label.Combined_Limit_For}</b></p>
                                            {!b.benefitDetailItemDescription}</td>
                                            <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][policyType],'','display:none')}" >
                                            <br style="{!IF(b.IsCombinedBenefit,'','display:none')}"/>
                                            {!b.maxNoofVisitPerYear}</td>
                                            <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][policyType],'','display:none')}" >
                                            <br style="{!IF(b.IsCombinedBenefit,'','display:none')}"/>{!b.visitedCount}</td>
                                            <td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][policyType],'','display:none')}" >
                                            <br style="{!IF(b.IsCombinedBenefit,'','display:none')}"/>{!b.benefitVisitBalance }</td>
        
                                            <!-- Add by Manuel that customized union struct with two classes -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Code'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.benefitItemCodeList,b.usBenefitDetailItem.benefitDetailItemCode)}</td>-->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.benefitItemDescList,b.usBenefitDetailItem.benefitDetailItemDescription)}</td> -->
                                            <!-- Modified by Caden -- display unlimited -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.overallOutpatientMaximumNoStr,b.usBenefitDetailItem.maxNoofVisitPerYearStr)}</td> -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.totalVisitedCount,b.usBenefitDetailItem.visitedCount)}</td> -->
                                            <!-- Modified by Caden -- display unlimited -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.totalRemainingVisitBalanceStr,b.usBenefitDetailItem.visitBalance)}</td> -->
                                          </tr>
                                          <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                      </apex:repeat>
                                  </apex:repeat>
                                </tbody>
                                  <!--Non-GS Clinic Visit Destop Table End-->
                                  
                                  <!--GS Clinic Visit Destop Table Start-->
                                  <apex:repeat value="{!benefitCategoryList}" var="category" rendered="{!IsGSUser}">
                                    <tbody class="hidden-xs" style="border-top:0px;">
                                      <tr>
                                        <td colspan="4">
                                          <div class="bs col-xs-12 col-lg-12 panel-heading gs-clinic-class form-toggle-tab onclick-pointer" sequence="{!category.Sequence}" >
                                            <div class="bs col-xs-8 col-lg-8" style="padding:0px;font-weight:900;">    
                                                <apex:outputText value="{!transField['BasicBenefit'][$Label.Header_Language_Code_Current]}" style="font-weight: bold;width:150px;" rendered="{!category.categoryCode==categoryCode_Basic && contains(transKey, "~BasicBenefit~")}"/>
                                                <apex:outputText value="{!transField['TopUpBenefit'][$Label.Header_Language_Code_Current]}" style="font-weight: bold;width:150px;" rendered="{!category.categoryCode==categoryCode_TopUp && contains(transKey, "~TopUpBenefit~")}"/>
                                            
                                            </div>
                                            <div id="{!category.Sequence}-clinic-arrow-up" class="bs col-xs-4 col-lg-4 section-arrow" style="padding:0px;text-align:right;">
                                              <apex:image value="{!$Resource.arrow_up}" height="25px"></apex:image>
                                            </div>
                                            <div id="{!category.Sequence}-clinic-arrow-down" class="bs col-xs-4 col-lg-4" style="display:none;padding:0px;text-align:right;">
                                              <apex:image value="{!$Resource.arrow_down}" height="25px"></apex:image>
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                    <tbody class="{!category.Sequence}-gs-clinic-content hidden-xs" style="border-top:0px;">
                                      <apex:repeat value="{!category.benefitList}" var="b">
                                        <!--JOBR94-Kirk-20220328-->
                                          <tr class="bs" style="{!IF(b.benefitSectionCode != '2HS' && b.benefitSectionCode != '1HS', '', 'display:none')}">
                                            <td class="" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][policyType],'','display:none')}" >
                                             <p style="{!IF(b.IsCombinedBenefit,'','display:none')}"><b>{!$Label.Combined_Limit_For}</b></p>
                                              <apex:repeat value="{!b.RemarkList}" var="remark" rendered="{!b.IsCombinedBenefit}">
                                                {!remark}
                                              </apex:repeat> 
                                              {!b.benefitDetailItemDescription}
                                              <apex:repeat value="{!b.RemarkList}" var="remark" rendered="{!!b.IsCombinedBenefit}">
                                                {!remark}
                                              </apex:repeat>
                                            </td>
                                            <td class="" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][policyType],'','display:none')}" >
                                                <br style="{!IF(b.IsCombinedBenefit,'','display:none')}"/>
                                              {!b.maxNoofVisitPerYear}
                                            </td>
                                            <td class="" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][policyType],'','display:none')}" >
                                                <br style="{!IF(b.IsCombinedBenefit,'','display:none')}"/>
                                              {!b.visitedCount}
                                            </td>
                                            <td class="" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][policyType],'','display:none')}" >
                                                <br style="{!IF(b.IsCombinedBenefit,'','display:none')}"/>
                                              {!b.benefitVisitBalance }
                                            </td>
                                          </tr>
                                      </apex:repeat>
                                    </tbody>
                                  </apex:repeat>
                                  <!--GS Clinic Visit Destop Table End-->
                              <tbody class="visible-xs">
                                <apex:variable value="{!1}" var="rowNum" />
                                <!--apex:repeat value="{!benefitMap[benefitPage]}" var="b"-->
                                
                                
                                <!-- Add by Manuel that customized union struct with two classes -->
                                <apex:repeat value="{!cBenefitMap[usBenefitCombinedPage]}" var="category" rendered="{!!IsGSUser}">>
                                    <apex:repeat value="{!category.benefitList}" var="b">
                                        <tr class="bs table-header-row {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <!--<td class="bs field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Code'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Code}</td>-->
                                            <!--td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Code'][policyType],'','display:none')}" >{!b.benefitDetailItemCode}</td-->
        
        
                                            <!-- Add by Manuel that customized union struct with two classes -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Code'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.benefitItemCodeList,b.usBenefitDetailItem.benefitDetailItemCode)}</td>-->
                                          </tr>
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][policyType],'','display:none')}" >{!b.benefitDetailItemDescription }</td>
        
        
                                            <!-- Add by Manuel that customized union struct with two classes
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.benefitItemDescList,b.usBenefitDetailItem.benefitDetailItemDescription)}</td>-->
                                          </tr>
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Maximum_No_of_Visits_Per_Policy_Year}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][policyType],'','display:none')}" >{!b.maxNoofVisitPerYear}</td>
        
        
                                            <!-- Add by Manuel that customized union struct with two classes -->
                                            <!-- Modified by Caden -- display unlimited -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.overallOutpatientMaximumNoStr,b.usBenefitDetailItem.maxNoofVisitPerYearStr)}</td>-->
                                          </tr>
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Visited}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][policyType],'','display:none')}" >{!b.visitedCount}</td>
        
        
                                            <!-- Add by Manuel that customized union struct with two classes -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.totalVisitedCount,b.usBenefitDetailItem.visitedCount)}</td>-->
                                          </tr>
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Visit_Balance}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][policyType],'','display:none')}" >{!b.benefitVisitBalance }</td>
        
        
                                            <!-- Add by Manuel that customized union struct with two classes -->
                                            <!-- Modified by Caden -- display unlimited -->
                                            <!--<td class="bs field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!if(b.usCombinedBenefit!=null,b.usCombinedBenefit.totalRemainingVisitBalanceStr,b.usBenefitDetailItem.visitBalance)}</td>-->
                                          </tr>
                                          <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                      </apex:repeat>
                                  </apex:repeat>

                                  <!--GS Clinic Visit Destop Table Start-->
                                  <apex:repeat value="{!benefitCategoryList}" var="category" rendered="{!IsGSUser}">
                                    <tbody class="visible-xs" style="border-top:0px;">
                                      <tr>
                                        <td colspan="4">
                                          <div class="bs col-xs-12 col-lg-12 panel-heading mobile-gs-clinic-class form-toggle-tab onclick-pointer" sequence="{!category.Sequence}" >
                                            <div class="bs col-xs-8 col-lg-8" style="padding:0px;font-weight:900;">    
                                               <apex:outputText value="{!transField['BasicBenefit'][$Label.Header_Language_Code_Current]}" style="font-weight: bold;width:150px;" rendered="{!category.categoryCode==categoryCode_Basic && contains(transKey, "~BasicBenefit~")}"/>
                                               <apex:outputText value="{!transField['TopUpBenefit'][$Label.Header_Language_Code_Current]}" style="font-weight: bold;width:150px;" rendered="{!category.categoryCode==categoryCode_TopUp && contains(transKey, "~TopUpBenefit~")}"/>
                                            </div>
                                            <div id="{!category.Sequence}-mobile-clinic-arrow-up" class="bs col-xs-4 col-lg-4 section-arrow" style="padding:0px;text-align:right;">
                                              <apex:image value="{!$Resource.arrow_up}" height="25px"></apex:image>
                                            </div>
                                            <div id="{!category.Sequence}-mobile-clinic-arrow-down" class="bs col-xs-4 col-lg-4" style="display:none;padding:0px;text-align:right;">
                                              <apex:image value="{!$Resource.arrow_down}" height="25px"></apex:image>
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                    <tbody class="{!category.Sequence}-mobile-gs-clinic-content visible-xs" style="border-top:0px;">
                                      <apex:repeat value="{!category.benefitList}" var="b">
                                          <!-- Rancho_PI85_20221118 - display remaining hospital in mobile version -->
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}" style="{!IF(b.benefitSectionCode != '2HS' && b.benefitSectionCode != '1HS', '', 'display:none')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Type}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Type'][policyType],'','display:none')}" >
                                              <apex:repeat value="{!b.RemarkList}" var="remark" rendered="{!b.IsCombinedBenefit}">
                                                {!remark}
                                              </apex:repeat>
                                              {!b.benefitDetailItemDescription}
                                              <apex:repeat value="{!b.RemarkList}" var="remark" rendered="{!!b.IsCombinedBenefit}">
                                                {!remark}
                                              </apex:repeat>
                                            </td>
                                          </tr>
                                          <!-- Rancho_PI85_20221118 - display remaining hospital in mobile version -->
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}" style="{!IF(b.benefitSectionCode != '2HS' && b.benefitSectionCode != '1HS', '', 'display:none')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Maximum_No_of_Visits_Per_Policy_Year}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Maximum No. of Visits Per Policy Year'][policyType],'','display:none')}" >
                                              {!b.maxNoofVisitPerYear}
                                            </td>
                                          </tr>
                                          <!-- Rancho_PI85_20221118 - display remaining hospital in mobile version -->
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}" style="{!IF(b.benefitSectionCode != '2HS' && b.benefitSectionCode != '1HS', '', 'display:none')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Visited}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Visited'][policyType],'','display:none')}" >
                                              {!b.visitedCount}
                                            </td>
                                          </tr>
                                          <!-- Rancho_PI85_20221118 - display remaining hospital in mobile version -->
                                          <tr class="bs table-container {!IF(MOD(rowNum,2)==1,'grey-background','')}" style="{!IF(b.benefitSectionCode != '2HS' && b.benefitSectionCode != '1HS', '', 'display:none')}">
                                            <td class="bs table-cell field-label" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][JSINHTMLENCODE(policyType)],'','display:none')}" >{!$Label.Pol_Benefit_Visit_Balance}</td>
                                            <td class="bs table-cell field-value" style="{!IF(($Permission.Customer_Service_User || isCustomerUser)&&fields2['Benefit Visit Balance'][policyType],'','display:none')}" >
                                              {!b.benefitVisitBalance }
                                            </td>
                                          </tr>
                                          <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                      </apex:repeat>
                                    </tbody>
                                  </apex:repeat>
                                  <!--GS Clinic Visit Destop Table End-->
                              </tbody>
                            </table>        
                            </div>
                          </div>
                          <script type="text/javascript">
                            $("#benefitPanel .benefitPanel").appendTo(".clinicListPanel[data-plan='{!targetCertNo}']");
                          </script>
                      </apex:outputPanel>
                          <!--Kirk-JOBR23-20220106-->
                          <script>                                  
                            //CR-56_Link_20220214                       
                          $(".clinicListPanelHeader").on("click",function() {
                            console.log('clinicListPanel ID:'+$(this).next().data('plan'));
                            console.log('benefitPanel length:'+$(this).next().find('.benefitPanel').length);
                            $(this).next().toggle(null, null, Cigna.PolicyDetail.changeSection_arrow(this));
                            if(oldTab != clinicOrInpatient){
                                $(".clinicListPanel").empty();
                                oldTab = clinicOrInpatient;
                            }
                            if($(this).next().find('.benefitPanel').length == 0){
                              console.log('plan value:'+$(this).data('plan'));
                              getClinicVisitCountByCertNo($(this).data('plan'),clinicOrInpatient);
                              //$(".benefitPanel").appendTo(".clinicListPanel[data-plan='{!targetCertNo}']");
                              //PolicyDetailAF.getClinicVisitCount();
                            }
                          });

                          
                        </script>

                          <apex:outputText rendered="{!IsGSUser}">
                            <div class="bs field-value">
                                <apex:outputText value="{!transField['starDescForClinic'][$Label.Header_Language_Code_Current]}" rendered="{!IF(contains(transKey, "~starDescForClinic~"), true,false)}" />
                            </div>
                          </apex:outputText>

                          <apex:outputPanel rendered="{!!IsGSUser}">
                          <!--JOBR24-KIRK-20220119-Separate inpatient visit counts into another tab-->
                          <div id="prevNextPage" class="bs row">
                            <div style="padding:20px;" class="bs col-sm-12 col-xs-12 text-center">
                              <!--apex:outputPanel rendered="{!If(benefitTotalPage>1 && benefithasPrev,true,false)}">
                              <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="benefitprevPage();"/>
                              </apex:outputPanel>
                              <apex:outputText value="{!$Label.Page_0_of_1}" >
                                <apex:param value="{!benefitPage}" />
                                <apex:param value="{!benefitTotalPage}" />
                              </apex:outputText>
                              <apex:outputPanel rendered="{!If(benefitTotalPage>1 && benefithasNext,true,false)}">
                                <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="benefitnextPage()"/>
                              </apex:outputPanel-->
                              
                              
                              <!-- Add by Manuel that customized union struct with two classes -->
                              <apex:outputPanel rendered="{!If(usBenefitCombinedTotalPage>1 && usBenefitCombinedhasPrev,true,false)}">
                                  <div class="ci-hk-arrow-29 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-right:10px;" aria-hidden="true" onclick="usBenefitCombinedprevPage();"/>
                              </apex:outputPanel>
                              <apex:outputText value="{!$Label.Page_0_of_1}" >
                                <apex:param value="{!usBenefitCombinedPage}" />
                                <apex:param value="{!usBenefitCombinedTotalPage}" />
                              </apex:outputText>
                              <apex:outputPanel rendered="{!If(usBenefitCombinedTotalPage>1 && usBenefitCombinedhasNext,true,false)}">
                                <div class="ci-hk-arrow-31 ci-hk-sm onclick-pointer cigna-fg-orange-dark" style="padding-left:10px;" aria-hidden="true" onclick="usBenefitCombinednextPage()"/>
                              </apex:outputPanel>
                            </div>
                          </div>
                          </apex:outputPanel>
                        </div>
                      
                      </apex:outputPanel>
                    </apex:outputPanel>   
                  </div>
                  <!----Remaining Clinic Visits Tab End---->

                  <div id="mobile-app-padding" class="bs row hidden-lg hidden-sm hidden-md" style="padding-bottom: 100px;">
                      <div class="bs col-xs-12"></div>
                  </div>

                  <!-- Mobile Button-->
                  <apex:outputPanel id="mobileButtonApex" layout="block" rendered="{!isCustomerUser}"> 
                    <div class="bs cigna-floating-bottom-panel hidden-lg hidden-sm hidden-md">
                        <div class="bs cigna-action-btn-group cigna-fg-white cigna-bg-orange-dark" style="/*font-size:0.625em !important*/">
                            <!-- Rancho_PI61_20220222: disable button -->
                            <!-- align the button display logic with Make a Claim, only inactive days < 90 days policy can submit claim -->
                            <a href="#" onclick="Cigna.Util.navigateToVFP('MyClaimSubmitVFP')" class="action-btn cigna-fg-white rancho-test {!if(over90Days, 'needDisable', '')}" role="button" style="{!IF(isGroup && isBrokerUser,'display:none','')}">
                                <span class="ci-hk-clipboard" aria-hidden="true" style="padding-right:10px;"></span><br/>
                                {!$Label.pol_make_a_claim_button}
                            </a>
                            <!-- align the button display logic with Policy Change, both inforce and lapsed policy could change policy -->
                            <a href="#" style="{!IF(isGroup || isBrokerUser,'display:none','')}" onclick="Cigna.Util.navigateToVFP('PolicyChangeSubmitVFP')" class="action-btn cigna-fg-white {!if(CONTAINS(eligibleStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" role="button">
                                <span class="ci-hk-fix" aria-hidden="true" style="padding-right:10px;"></span><br/>
                                {!$Label.pol_Make_a_Change_in_Policy}
                            </a>

                            <a href="#" style="{!IF(!isGroup && isBrokerUser,'','display:none')}" onclick="Cigna.Util.navigateToVFP('PolicyChangeSubmitVFP?BrkPolicyChangeSubmitVFP?tab=all&phid={!holder.ssnNumber}&phname={!holder.fullName}&phemail={!holder.emailAddress}&pclist=false')" class="action-btn cigna-fg-white" role="button">
                                <span class="ci-hk-fix" aria-hidden="true" style="padding-right:10px;"></span><br/>
                                {!$Label.pol_Make_a_Change_in_Policy}
                            </a>
                            
                            <!-- only inforce IPMI policy could submit GOP -->
                            <a href="#" style="{!IF(isGroup || isILAS || !showApplyForGOPBtn,'display:none','')}" onclick="Cigna.Util.navigateToVFP('SubmitHospitalVFP?policyNo={!JSINHTMLENCODE(policyNumber)}&SHA256Key={!SHA256Key}')" class="action-btn cigna-fg-white {!if(CONTAINS(inforceStatusStr,policy.policyStatusDisplayName), '', 'needDisable')}" role="button">
                                <span class="ci-hk-clipboard" aria-hidden="true" style="padding-right:10px;"></span><br/>
                                {!$Label.Pol_Apply_Admission_PreApproval_Button}
                            </a>
                            
                            <a href="#" style="{!IF(isILAS,'','display:none')}" onclick="Cigna.Util.navigateToVFP('FundManagementVFP?policyNumber={!JSINHTMLENCODE(policyNumber)}&type=ILAS&SHA256Key={!SHA256Key}')" class="action-btn cigna-fg-white" role="button">
                                <span class="ci-hk-linegraph" aria-hidden="true" style="padding-right:10px;"></span><br/>
                                {!$Label.Pol_Manage_Fund_Button}
                            </a>
                            <a href="#" style="{!IF(isGroup && !isBrokerUser && showDDABtn, '', 'display:none')}" onclick="Cigna.Util.navigateToVFP('MyDDASignatureForm?backurl=PolicyDetailsPageVFP&policyNumber={!JSINHTMLENCODE(policyNumber)}&policyType={!JSINHTMLENCODE(policyType)}&SHA256Key={!SHA256Key}')" class="action-btn cigna-fg-white" role="button">
                                <span class="ci-hk-clipboard" aria-hidden="true" style="padding-right:10px;"></span><br/>
                                <apex:outputText value="{!DDAFormBtnVal}"></apex:outputText>
                            </a>
                        </div>
                    </div>

                    <script>
                        // Rancho_PI61_20220222
                        var nodeList = document.querySelectorAll(".needDisable");
                        for(var i = 0; i < nodeList.length; i++){
                            var node = nodeList[i];
                            if(typeof node !== 'undefined'){
                                node.setAttribute("disabled", "true");
                                node.style.pointerEvents = "none";
                                node.style.backgroundColor = "#ED8F5D";
                            }
                        }
                    </script>
                  </apex:outputPanel>
                  <!-- Mobile Button End-->
                </div>
              </div>
            </apex:form>
            
          </apex:define>
        </div>

            
        <!-- End of the main body -->
        <script>
          if (Cigna.Util.isIOS() && Cigna.Util.isSalesforce1() && Cigna.Util.isBrokerPortal()) {
            //Ray's Updates
            $('html').css('position', 'fixed').css('overflow', 'auto').css('width', '100%').css('height', '100%');
            $('body').css('position', 'fixed').css('overflow-y', 'scroll').css('width', '100%').css('height', '100%');

          }
            
    // Parse fields2 map from Apex into JSON
    var fields2 = JSON.parse('{!JSENCODE(fields2Json)}');
    console.log('fields2:', fields2);

    // Log the policyType used in the style check
    var policyType = '{!JSINHTMLENCODE(policyType)}';
    console.log('policyType:', policyType);

    // Optional: check if "Plan Level" for this policyType is available
    if (fields2['Plan Level'] && fields2['Plan Level'][policyType] !== undefined) {
        console.log('Plan Level visibility for ' + policyType + ':', fields2['Plan Level'][policyType]);
    } else {
        console.warn('Plan Level not found in fields2 for policyType:', policyType);
    }
            
        </script>


    </apex:page>