<apex:page Controller="DoctorListCtrl" sidebar="false" showHeader="false">

    <head>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, viewport-fit=cover" />
        <!--additional css, bootstrap, jquery,js libraries-->
        <apex:includeScript value="{!URLFOR($Resource.signature_pad_1_5)}" />
        <apex:includeScript value="{!$Resource.modernizr}" />
        <apex:stylesheet value="{!URLFOR($Resource.Cigna_HK_Icons, 'Cigna-HK-Icons.css')}"/>
        <link rel="stylesheet" href="{!URLFOR($Resource.jQuery_ui, 'jquery-ui/jquery-ui.min.css')}" />
        <!--CR-56_Link_20220214-->
        <script type="text/javascript" src="{!URLFOR($Resource.jQuery_ui, 'jquery-ui/jquery-ui-1.13.min.js')}"></script>
        <script type="text/javascript" src="{!URLFOR($Resource.jQuery_ui, 'jquery-ui/datepicker-zh-TW.js')}"></script>
        <!--
        <apex:includeScript value="{!$Resource.Google_Map_JS}" />
        <script type="text/javascript" src="https://ditu.google.cn/maps/api/js"></script>
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
        -->
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?key={!$Label.Doctor_List_Google_Key}"></script>
        <!-- CR-56_Link_20220214 -->
        <script type="text/javascript" src="{!URLFOR($Resource.jQuery_Validation, 'jquery.validate_new.min.js')}"/>

        <script type="text/javascript" src="{!URLFOR($Resource.jQuery_Validation, 'additional-methods.min.js')}" />
        <script type="text/javascript" src="{!URLFOR($Resource.App_Link_JS, 'js/applink.js')}"></script>
        <apex:outputPanel rendered="{!lang == 'zh'}" layout="none">
            <script type="text/javascript" src="{!URLFOR($Resource.jQuery_Validation, '/localization/messages_zh_TW.min.js')}" />
        </apex:outputPanel>
        <style>

            select::-ms-expand {
                display: none;
            }

            /* hide input */
            .cigna-radio input.radio:empty {
                margin-left: -999px;
            }

            .cigna-radio label {
                width: 120px;
                font-size: 1em;
                font-weight: normal;
            }

            /* style label */
            .cigna-radio input.radio:empty ~ label {
                position: relative;
                float: left;
                line-height: 32px;
                text-indent: 3.25em;
                cursor: pointer;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }

            .cigna-radio input.radio:empty ~ label:before {
                position: absolute;
                display: block;
                top: 2px;
                bottom: 0;
                left: 0;
                content: '';
            }

            /* toggle on */
            .cigna-radio input.radio:checked:not(:disabled) ~ label:before {
                content:"\f058";
                text-indent: 0.4em;
                color: #39B54A;
                font: normal normal normal 24px/1 FontAwesome;
            }

            .cigna-radio input.radio:not(checked):not(:disabled) ~ label:before {
                content:"\f058";
                text-indent: 0.4em;
                color: #C8C9C7;
                font: normal normal normal 24px/1 FontAwesome;
            }

            .cigna-radio input.radio:disabled ~ label {
                color: #bdb6d6;
            }

            .cigna-radio input.radio:disabled ~ label:before {
                content:"\f058";
                text-indent: 0.4em;
                color: #bdb6d6;
                font: normal normal normal 24px/1 FontAwesome;
            }



            .bs .form-field-style-select:disabled {
                background: none !important;
                border-color: #bdb6d6 !important;
                color: #bdb6b6 !important;
            }
            .bs .value-row {
                padding-bottom: 5px;
            }

            .bs .card-content {
                font-weight: bold;
                font-size: 0.8em;
            }

            .bs .dl-font {
                font-size: 0.9em;
                line-height: 18px;
            }

            .bs .doctor-card {
                margin-left: -10px;
                margin-right: -10px;
                padding-left: 10px;
                padding-top: 10px;
                padding-bottom: 5px;
                border-top: rgba(207,207,207,1) solid 1px;
                border-bottom: rgba(207,207,207,1) solid 1px
            }

            .bs .table-font{
                font-size: 0.7em;
                word-break: break-all;
            }

            .modal-body {
                height: 400px;
                overflow-y: auto;
                overflow-x: hidden;
            }

            #HKList {
                padding: 0 60px;
                padding-bottom: 10px;
            }

            #WWList {
                padding: 0 75px
            }


            .bs .content-label {
                padding-left: 20px;
            }

            .bs .table-row {
                padding-bottom: 10px;
            }

            .bs .even-row {
                background-color: rgb(242, 242, 242);
            }

            @media screen and (min-width: 768px) {
                #wwSearchPanel {
                    padding-top: 10px;
                }

                #mapPanel {
                    padding: 0 60px;
                }

                .modal:before {
                    display: inline-block;
                    vertical-align: middle;
                    height: 100%;
                }
                .modal-dialog {
                    display: inline-block;
                    text-align: left;
                    vertical-align: middle;
                }
                #map {
                    font-family: Arial;
                    font-size: 12px;
                    line-height: normal !important;
                    height: 400px;
                //width: 100%;
                    background: transparent;
                }
                #ListView {
                    max-height: 400px;
                    min-height: 400px;
                    margin-bottom: 50px;
                    overflow: auto;
                }
                #map-wrapper {
                    margin-bottom: 50px;
                }
                #clinic-done {
                    margin-bottom: 50px;
                }
                .bs .detail-font {
                    font-size: 0.9em;
                }
                div#VCIntroMessage {
                    display: none;
                    position: absolute;
                    z-index: 11;
                    margin: 150px auto 0px auto;
                    width: 80%;
                    height: 60%;
                    background: #FFF;
                    color: #000;
                    left: 10%;
                    padding: 20px;
                    border-radius: 5px;
                }
            }

            @media (min-width: 768px) and (max-width: 991px) {
                #map {
                    height: 500px !important;
                }
                #ListView {
                    max-height: 500px !important;
                }
                #mapPanel {
                    padding: 0 0;
                }
                #HKList {
                    padding: 0 0;
                    padding-bottom: 10px;
                }

                #WWList {
                    padding: 0 15px;
                    padding-bottom: 10px;
                }
            }

            @media (max-width: 767px) {

                .dl-mobile-padding {
                    padding-bottom: 20px;
                }

                #wwSearchPanel {
                    padding-top: 30px;
                }

                #map-wrapper {
                    position: fixed;
                    top: 50px;
                    width: 100%;
                    right: 0px;
                    margin-left: -15px;
                    padding: 0px;
                }
                #map {
                    height: 200px;
                }
                #ListView {
                    padding-top: 80px;
                }
                #HKList, #WWList {
                    padding: 0 20px
                }

                .bs .detail-font {
                    font-size: 0.8em;
                }

                .bs #list-back {
                    position: fixed;
                    top: 200px;
                    width: 100%;
                    z-index: 7;
                    background: white;
                }

                div#VCIntroMessage {
                    display: none;
                    position: absolute;
                    z-index: 11;
                    margin: 100px auto 0px auto;
                    width: 90%;
                    height: 80%;
                    background: #FFF;
                    color: #000;
                    left: 5%;
                    padding: 20px;
                    border-radius: 5px;
                }

            }

            .bs .mobile-version-button {
                height: 30px;
                font-size: 0.8em;
                padding: 8px;
            }

            .bs .no-border-input {
                padding: 0;
                border: none;
                background: none;
            }

            .bs .no-dpicon {
                -webkit-appearance: none;
                -webkit-border-radius: 0px;
                -moz-appearance: none;
                appearance: none;
            }

            .bs .all-page-width {
                margin-left: -15px;
                padding: 0px;
            }

            .bs td {
                /* Rancho_HKITSFDC264_20250903 - replace "Gotham SSm A", "Gotham SSm B" */
                font-family: "ValueSansRegular", Arial, Helvetica, sans-serif;
            }


            .disPanel select {
                border: 0px;
                border-bottom: 1px solid #58595B;
                background: url({!$Resource.select_arrow_style}) no-repeat 98% 50% !important;
                background-size: 7px 7px !important;
                padding-right: 20px;
                padding-left: 12px;
                -moz-appearance: none;
                -webkit-appearance: none;
                appearance: none;
                width: 100%;
                border-radius: 0px;
                height: 34px !important;
            }

            .disPanel-mb select {
                border: 0px;
                border-bottom: 1px solid #58595B;
                background: url({!$Resource.select_arrow_style}) no-repeat 98% 50% !important;
                background-size: 7px 7px !important;
                padding-right: 20px;
                padding-left: 12px;
                -moz-appearance: none;
                -webkit-appearance: none;
                appearance: none;
                width: 100%;
                border-radius: 0px;
                height: 34px !important;
            }

            div#VCIntroOverlay {
                display: none;
                z-index: 10;
                background: #D9D9D6;
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0px;
                left: 0px;
                text-align: center;
            }

            #VCIntroCloseOverlay
            {
                position: absolute;
                top: 10px;
                right: 10px;
            }

            #VCIntroContent {
                padding: 10px;
                color: #000;
                font-size: 12px;
                width: 100%;
                height: 95%;
                overflow-y: auto;
                overflow-x: hidden;
            }

        </style>
        <script type="text/javascript">
            var changeLanguageWarningRequired = true;
            var tempScrollTop;
            var Cigna = Cigna || {};
            Cigna.DrList = function() {

                function showLabelLoading() {
                    tempScrollTop = $('#ListView').scrollTop();
                    $('#loadMore-label').hide();
                    $('#loadMore-icon').fadeIn(100);
                }

                function hideLabelLoading() {
                    $('#ListView').scrollTop(tempScrollTop);
                    $('#loadMore-icon').hide();
                    $('#loadMore-label').fadeIn(100);
                }

                var myOptions = {
                    center:new google.maps.LatLng(22.2775459,114.1684373),
                    zoom: 15,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    mapTypeControl: false,
                    scrollwheel: true
                };

                var myPositon = {
                    lat: 22.2775459,
                    lng: 114.1684373,
                    dummy: true
                };

                var map;
                var validator;
                var infowindow = new google.maps.InfoWindow({
                    content: "Google Map"
                });

                var markers = [];


                //Functions for Loading
                function showLoading() {
                    $('#login-loading').fadeIn(100);
                }

                function finishSubmission() {
                    $('#login-loading').fadeOut(100);
                }

                function loadList(page){
                    showLabelLoading();
                    DrListAF.loadMore(page);
                }

                //Fuctions for Google Map
                function updateGeoLocation() {

                    var timer = setTimeout( function() {handleLocationError();}, 5000);
                    if (navigator.geolocation && Modernizr.geolocation) {
                        navigator.geolocation.getCurrentPosition(
                                function(position) {
                                    clearTimeout(timer);

                                    myPositon.lat = position.coords.latitude;
                                    myPositon.lng = position.coords.longitude;
                                    myPositon.dummy = false;
                                    $('#warning-box').hide();


                                    $('#location-param input[id$="long"]').val(position.coords.longitude);
                                    $('#location-param input[id$="lat"]').val(position.coords.latitude);

                                    handleMapRefresh();

                                },
                                function(err) {
                                    clearTimeout(timer);

                                    console.warn('ERROR(' + err.code + '): ' + err.message);
                                    $('#warning-box').show();

                                    handleLocationError();
                                }
                        );
                    } else {
                        clearTimeout(timer);
                        console.warn("Your browser is not updated");
                        handleLocationError();
                    }
                }

                function handleLocationError() {
                    //$('#location-param input[id$="long"]').val('NULL');
                    //$('#location-param input[id$="lat"]').val('NULL');
                    // Use Cigna building as the center
                    $('#location-param input[id$="long"]').val(Cigna.DrList.myPositon.lng);
                    $('#location-param input[id$="lat"]').val(Cigna.DrList.myPositon.lat);
                    console.log(`detect failed: ${Cigna.DrList.myPositon.lng}`);
                    console.log('test: '+"{!currentLong}");
                    handleMapRefresh();
                }

                function handleMapRefresh() {
                    if ($(window).width() < 768) {
                        DrListAF.findMe(true);
                    } else {
                        DrListAF.findMe(false);
                    }

                }

                function resizeIframe() {
                    var me = window.name;
                    if (me) {
                        var iframes = parent.document.getElementsByName(me);
                        if (iframes && iframes.length == 1) {
                            height = document.body.offsetHeight;
                            iframes[0].style.height = height + "px";
                        }
                    }
                }

                function openDetail(rowNum) {
                    $('.header-bar').css('position', 'relative');
                    if ($(window).width() <= 767) {
                        $('#clinic-detail-panel').html($('#clinic-' + rowNum + '-detail').html());
                        $('#clinic-detail-panel #appointment-date').attr("id","appointment-date-target");
                        Cigna.DatepickerUtil.init('#appointment-date-target');
                        $( "#appointment-date-target" ).datepicker("option", { minDate: 0});
                        $("#ListView").hide();
                        $("#clinic-detail-panel").show();
                        $("#map").hide();
                        $("#detail-back").show();
                        $("#searchPanel").hide();

                        $('#location-param input[id$="appointed-doctor"]').val($('#clinic-detail-panel #appointment-doctor').val());
                        $('#location-param input[id$="appointed-time"]').val($('#clinic-detail-panel #appointment-time').val());

                    } else {
                        $('#modal-clinic-detail').html($('#clinic-' + rowNum + '-detail').html());
                        $('#modal-clinic-detail #appointment-date').attr("id","appointment-date-target")
                        Cigna.DatepickerUtil.init('#appointment-date-target');
                        $( "#appointment-date-target" ).datepicker("option", { minDate: 0});
                        $('#myModal').modal('show');

                        $('#location-param input[id$="appointed-doctor"]').val($('.modal-content #appointment-doctor').val());
                        $('#location-param input[id$="appointed-time"]').val($('.modal-content #appointment-time').val());
                    }


                    $("#clinic-appointment").show();

                    $("#list-back-panel").hide();
                }

                function toggleVCIntro() {
                    var overlay = document.getElementById('VCIntroOverlay');
                    var specialBox = document.getElementById('VCIntroMessage');

                    $('#VCIntroContent').scrollTop(0);
                    if (overlay.style.display == "block") {
                        overlay.style.display = "none";
                        specialBox.style.display = "none";
                    } else {
                        overlay.style.display = "block";
                        specialBox.style.display = "block";
                    }
                }

                //Functions for navigation
                function goBack() {
                    DrListAF.back();

                    $("#mapPanel").hide();
                    $("#searchPanel").hide();
                    $('#myModal').modal('hide');

                }

                function backToSearch() {

                    DrListAF.back();
                    if ("{!currentLong}" == "" || "{!currentLong}" == "NULL") {
                        updateGeoLocation();
                    }
                    $('.header-bar').css('position', 'relative');
                    $('#ListView').css("padding-top", "20px");

                }

                //Validation
                function submitAppointment() {
                    if ($("form[id*='myform']").validate().form()) {
                        DrListAF.submit();
                    } else {
                        if ($(window).width() >= 768) {
                            $("form[id*='myform']").validate().focusInvalid();
                        } else {
                            $('html').animate({
                                scrollTop: $("input[id*='appointment-date']").offset().top - 50
                            }, 100);
                        }
                    }
                }

                function removeMarkers(){
                    for (var i = 0; i < Cigna.DrList.markers.length; i++) {
                        Cigna.DrList.markers[i].setMap(null);
                    }
                    Cigna.DrList.markers = [];
                }

                function updateDoctor(sel) {
                    $('#location-param input[id$="appointed-doctor"]').val(sel.value);
                }

                function updateDate(sel) {
                    $('#location-param input[id$="appointed-date"]').val(sel.value);
                }

                function updateTime(sel) {
                    $('#location-param input[id$="appointed-time"]').val(sel.value);
                }

                function updateRemark(sel) {
                    $('#location-param input[id$="appointed-remark"]').val(sel.value);
                }

                return {
                    showLoading: showLoading,
                    finishSubmission: finishSubmission,
                    updateGeoLocation: updateGeoLocation,
                    handleLocationError: handleLocationError,
                    handleMapRefresh: handleMapRefresh,
                    resizeIframe: resizeIframe,
                    openDetail: openDetail,
                    toggleVCIntro: toggleVCIntro,
                    goBack: goBack,
                    backToSearch: backToSearch,
                    submitAppointment: submitAppointment,
                    myPositon: myPositon,
                    map: map,
                    myOptions: myOptions,
                    infowindow: infowindow,
                    markers: markers,
                    removeMarkers: removeMarkers,
                    updateDoctor: updateDoctor,
                    updateDate: updateDate,
                    updateTime: updateTime,
                    updateRemark: updateRemark,
                    showLabelLoading: showLabelLoading,
                    hideLabelLoading: hideLabelLoading,
                    loadList: loadList
                }
            }();

            Cigna.DrList.showLoading();

            //junda add for JR1858
            function clinicDetail(id,name){
                console.log('id'+id);
                console.log('name'+name);
                DoctorListCtrl.clinicDetailLog(id,name,function (result,event){

                })
            }

            //SMT-86_Tovid_20210803 start
            function pushHistory() {
                var state = {
                    title: "title",
                    url: "#"
                };
                var mapDiv =$("#mapPanel");
                var spDiv =$("#searchPanel");
                var domainUrl = document.domain;
                var previousUrl = document.referrer;
                if(mapDiv==null ||  !mapDiv.is(":hidden")){
                    if(previousUrl.indexOf("CusDoctorListVFP?tag=search" > 0)){
                        window.history.pushState(state, "title", "https://" + domainUrl + "/customer/apex/CustomerLandingPage");
                    }else{
                        window.history.pushState(state, "title", "https://" + domainUrl + "/customer/apex/CusDoctorListVFP?tag=map");
                    }
                }else if(spDiv==null ||  !spDiv.is(":hidden")){
                    window.history.pushState(state, "title", "https://" + domainUrl + "/customer/apex/CusDoctorListVFP?tag=search");
                }
            }
            //SMT-86_Tovid_20210803 end

            $(document).ready(function() {
                //SMT-86_Tovid_20210803 start
                if(Cigna.Util.isMobile()){
                    pushHistory();
                }   
                //SMT-86_Tovid_20210803 end           
                // JOBR-140_Link_20220728
                console.log('areaName:{!areaName}');
                if ("{!areaName}"=="DRList") {
                    initializeGoogleMap();
                }else{
                    Cigna.DrList.finishSubmission();
                }
            });

            // JOBR-140_Link_20220728
            function initializeGoogleMap(){
                Cigna.DrList.showLoading();
                //create map
                Cigna.DrList.map = new google.maps.Map(document.getElementById("map"), Cigna.DrList.myOptions);
                //Initialize jQuery Validation
                $("form[id*='myform']").validate({});
                $("select[id*='appointment-time']").rules("add", {
                    required: true
                });
                $("input[id*='appointment-date']").rules("add", {
                    required: true
                });
                $("input[id*='appointment-doctor']").rules("add", {
                    required: true
                });

                //Binding Button
                $("#detail-back-btn").on("click",function() {
                    $("#ListView").show();
                    $("#clinic-detail-panel").hide();
                    $("#map").show();
                    $("#clinic-appointment").hide();
                    $("#detail-back").hide();
                    $("#list-back-panel").show();
                    $("#searchPanel").show();

                    if(!$('#map').is(':visible')){
                        $('.header-bar').css("position", "fixed");
                    }
                });
                $(".tab-header").on("click",function(event) {
                    $(".tab-pane").hide();
                    $("#"+(this.id).substring(0,this.id.length-3)).show();
                    $(".active-bar-tab").addClass("inactive-bar-tab").removeClass("active-bar-tab");
                    $(this).addClass("active-bar-tab").removeClass("inactive-bar-tab");
                    console.log('this.id'+this.id);

                    if(this.id == 'WWListTab'){
                        DrListAF.wwInitTab();
                    } else {
                        DrListAF.initTab();
                    }
                });
                
                if('{!isVirtualTD}'!=''&&'{!isVirtualTD}'!=null&&'{!isVirtualTD}'.toUpperCase()=='TRUE'){ $(".tab-header").off('click'); }

                //Initialize Google Map
                console.log('currentLong:{!currentLong}');
                if ("{!currentLong}" == "" || "{!currentLong}" == "NULL") {
                    Cigna.DrList.updateGeoLocation();
                } else {
                    Cigna.DrList.myPositon.lat = parseFloat("{!currentLat}");
                    Cigna.DrList.myPositon.lng = parseFloat("{!currentLong}");
                    Cigna.DrList.myPositon.dummy = false;
                    if ($(window).width() < 768) {
                        DrListAF.findMe(true);
                    } else {
                        DrListAF.findMe(false);
                    }

                }
                $('#myModal').on('shown.bs.modal', function () {
                    $('#modal-clinic-detail').scrollTop(0);
                });

                $('a[data-applink]').applink();

                if(!Cigna.Util.isMobile()){
                    $('a[data-applink]').attr('target','_blank');
                }

                //Render app store links
                if(Cigna.Util.isMobile()){
                    $('#desktop-store-div').hide();
                    if(Cigna.Util.isIOS()){
                        $('#android-store').hide();
                    } else {
                        $('#ios-store').hide();
                    }
                } else {
                    $('#mobile-store-div').hide();
                }
            }
        </script>
    </head>
    <apex:form id="myform">
        <div id="location-param" style="display: none;">
            <apex:inputHidden value="{!currentLong}" id="long" />
            <apex:inputHidden value="{!currentLat}" id="lat" />
            <apex:inputHidden value="{!wwSelectedType}" id="wwType" />
            <apex:inputHidden value="{!appointedDoctor}" id="appointed-doctor"/>
            <apex:inputHidden value="{!appointedDate}" id="appointed-date"/>
            <apex:inputHidden value="{!appointedTime}" id="appointed-time"/>
            <apex:inputHidden value="{!remark}" id="appointed-remark"/>
        </div>
        <div class="bs">
            <apex:pageMessages ></apex:pageMessages>
            <!-- For HK List-->
            <apex:actionFunction name="searchKeyWord" action="{!searchClinicByKeyWord}" reRender="TopPanel" namespace="DrListAF" status="loader-icon">
                <apex:param name="firstParam" assignTo="{!currentpage}" value="1" />
            </apex:actionFunction>

            <apex:actionFunction name="loadMore" action="{!loadMore}" namespace="DrListAF" reRender="TopPanel" oncomplete="
                Cigna.DrList.hideLabelLoading();">
                <apex:param name="firstParam" assignTo="{!currentpage}" value="" />
            </apex:actionFunction>
            <apex:actionFunction name="searchKeyWordDT" action="{!searchClinicByKeyWord}" namespace="DrListAF" status="loader-icon"/>
            <apex:actionFunction name="refreshList" action="{!refreshList}" namespace="DrListAF" reRender="searchApexPanel2,searchApexPanel" />
            <apex:actionFunction name="back" action="{!backToSearch}" namespace="DrListAF"/>
            <apex:actionFunction name="backRefresh" action="{!backToSearchRefresh}" namespace="DrListAF" />
            <apex:actionFunction name="findMe" action="{!iFoundYou}" namespace="DrListAF" reRender="searchPanel,TopPanel">
                <apex:param name="firstParam" assignTo="{!isMobile}" value="" />
            </apex:actionFunction>
            <apex:actionFunction name="submit" action="{!saveAppointment}" namespace="DrListAF" />
            <apex:actionFunction name="initTab" action="{!initHKTab}" namespace="DrListAF" reRender="TopPanel" status="loader-icon"/>
            <apex:actionFunction name="checkAppointmentAvail" action="{!checkAppointmentAvail}" namespace="DrListAF" reRender="TopPanel" status="loader-icon"/>
            <!-- End for HK List-->

            <!-- For WW List -->
            <apex:actionFunction name="wwInitTab" action="{!wwInitWorldWideTab}" namespace="DrListAF" reRender="wwSearchPanelApex,TopPanel" status="loader-icon"/>
            <apex:actionFunction name="wwTriggerCity" action="{!wwTriggerCityList}" namespace="DrListAF" reRender="wwCityListApex,wwStateListApex1,wwStateListApex2" status="loader-icon"/>
            <apex:actionFunction name="wwTriggerCityByState" action="{!wwTriggerCityByState}" namespace="DrListAF" reRender="wwCityListApex" status="loader-icon"/>
            <apex:actionFunction name="wwTriggerSpec" action="{!dummyAction}" namespace="DrListAF" reRender="wwSpecListApex" status="loader-icon"/>

            <apex:actionFunction name="wwSearchProviderList" action="{!wwSearchDoctorList}" reRender="TopPanel" namespace="DrListAF" status="loader-icon">
                <apex:param name="firstParam" assignTo="{!currentpage}" value="1" />
            </apex:actionFunction>

            <apex:actionFunction name="wwSearchProviderListDT" action="{!wwSearchDoctorList}" namespace="DrListAF" status="loader-icon">
                <apex:param name="firstParam" assignTo="{!currentpage}" value="1" />
            </apex:actionFunction>
            <!-- JOBR-140_Link_20220728-->
            <apex:actionFunction name="nextStep" action="{!checkForNext}" namespace="DrListAF" reRender="area" status="loader-icon" oncomplete="initializeGoogleMap();" />
            <apex:actionFunction name="changePlan" action="{!changePlan}" namespace="DrListAF" reRender="nextButton"/>
            <!-- End for WW List -->

            <div class="bs" id="doctor-container">
                <div id="detail-back" class="bs row" style="padding-top: 10px;display:none">
                    <div class="bs col-xs-12">
                        <p><a id="detail-back-btn" href="#" class="bs cigna-fg-orange-medium"><i class="ci-hk-arrow-29" aria-hidden="true"></i>
                                {!$Label.Back}</a>
                        </p>
                    </div>
                </div>
                <div id="list-back-panel" style="{!IF(currentPanel == 'L','','display:none;')}">
                    <div id="list-back" class="bs row visible-xs-block">
                        <div style="font-family: sans-serif;font-style: italic;font-size: 14px; padding:0px 0px 1px 12px;margin-bottom: 0px;">
                            <apex:outputText rendered="{!isDIYPolicy}" value="{!$Label.DoctorList_eg}" escape="false"/><br/>
                        </div>
                        <div class="bs col-xs-12" style="padding-top: 10px;">
                            <p><a onclick="Cigna.DrList.backToSearch();"  href="#" class="bs cigna-fg-orange-medium"><i class="ci-hk-arrow-29" aria-hidden="true"></i> {!$Label.Back}</a>
                            </p>
                        </div>
                    </div>
                </div>

                <apex:outputPanel id="area">
                    <!-- JOBR-140_Link_20220728:area of Choose Plan-->
                    <apex:outputPanel rendered="{!areaName=='ChoosePlan'}">
                        <div class="bs row cigna-question-list">
                            <div class="bs col-xs-12 col-sm-12 col-lg-12" style="padding-top: 50px;padding-right: 50px">
                                <apex:outputPanel layout="block" styleClass="bs cigna-quote-question cigna-fg-gray-dark  col-xs-12" >
                                    <div class="bs col-sm-12 col-xs-12 cigna-fg-orange-medium">
                                        <div class="bs ci-hk-clipboard ci-hk-lg">
                                        </div>
                                        <b>
                                            {!transField['BrkDoctorList_Select'][$Label.Header_Language_Code_Current]}
                                        </b>
                                    </div>
                                    <br/>
                                    <br/>
                                    <div id="selectProduct" class="bs col-xs-12 col-sm-6 col-md-4">
                                        <apex:selectList style="height:34px;" value="{!policyNumber}" size="1" styleClass="bs form-field-style-select" onchange="DrListAF.changePlan();">
                                            <apex:selectOptions value="{!doctorInfoList}" />
                                        </apex:selectList>
                                    </div>
                                </apex:outputPanel>
                            </div>
                        </div>
                        <apex:outputPanel id="nextButton">
                            <div class="bs row nextStepBtnIn3" style="padding-top: 20px; padding-bottom: 20px;">
                                <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-3 "></div>
                                <div class="bs col-sm-6 col-md-6 col-xs-6 col-lg-6 onclick-pointer mobile-version-button cigna-fg-white {!IF(enableNextBtn,'cigna-bg-orange-dark','cigna-bg-gray-dark')} desktop-action-btn" onclick="DrListAF.nextStep();" STYLE="{!IF(enableNextBtn,'','pointer-events: none;')}">
                                        {!$Label.Next}
                                </div>
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>
    

                    <!-- JOBR-140_Link_20220728:area of DIY Plan-->
                    <apex:outputPanel rendered="{!BEGINS(areaName, 'MessageSection-')}">
                        <div class="bs col-sm-6 col-md-6 col-xs-6 col-lg-6 col-sm-offset-3 col-md-offset-3 col-xs-offset-3 col-lg-offset-3" style="padding-top: 80px;">
                            <apex:outputText value="{!$Label.To_locate_a_doctor}" escape="false" style="{!IF(areaName=='MessageSection-DIYPlanMessage','','display:none;')}"/>
                            <span style="{!IF(areaName=='MessageSection-8in1ClinicPlanMessage','','display:none;')}">
                            {!$Label.Doctor_List_Click_Here_Previous}&nbsp; <div style="font-weight: bold;display:inline;">{!$Label.Doctor_List_Click_Here_Plan}</div>{!$Label.Doctor_List_Click_Here_Please}&nbsp;<a href="{!CLICK_HERE_URL}" target="_blank" rel="noopener">{!$Label.Doctor_List_Click_Here}</a>&nbsp;{!$Label.Doctor_List_Click_Here_Behaviour}</span>
                        </div>
                    </apex:outputPanel>


                    <!-- JOBR-140_Link_20220728:area of normal Plan-->
                    <apex:outputPanel style="{!IF(areaName=='DRList','','display:none;')}">
    
                        <apex:outputPanel rendered="{!showWWList}">
                            <div style="{!IF(currentPanel == 'F','display:none;','')}" class="bs row {!IF(currentPanel == 'S','','hidden-xs')}">
                                <table class="bs bar-tab-container col-lg-12">
                                    <tr>
                                        <td id="HKListTab" class="bs {!IF(showWWTab,'inactive-bar-tab','active-bar-tab')} tab-header onclick-pointer">
                                                {!$Label.Doctor_List_HK_Tab}
                                        </td>
                                        <!--Nicole_SMT_20210517-->
                                        <td id="WWListTab" class="bs {!IF(showWWTab,'active-bar-tab','inactive-bar-tab')} tab-header onclick-pointer" style="{!IF(isVirtualTD,'display:none;','')}">
                                                {!$Label.Doctor_List_WW_Tab}
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </apex:outputPanel>
    
                        <apex:outputPanel id="searchPanel" layout="block">
        
                            <div id="HKList" class="tab-pane bs" style="{!IF(showWWTab,'display: none','')};">
                                <div id="searchPanel" style="{!IF(currentPanel == 'F','display:none;','')}" class="bs {!IF(currentPanel == 'S','','hidden-xs')}">
                                    <div class="bs visible-xs" style="padding: 0px 15px;">
                                        <!-- removed in 21061213 design
                                        <div class="bs row visible-xs-block" style="padding-top:10px;">
                                            <div class="bs dl-font col-sm-12 col-md-12 col-xs-12 col-lg-12">
                                                {!$Label.Doctor_List_Search_General}
                                            </div>
                                        </div>
                                        -->
                                        <!-- removed in 21061213 design
                                        <div class="bs row" style="padding-bottom: 20px;">
                                            <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-5 "></div>
                                            <div id="seach-all-button" onclick="showLoading();myFunction.searchKeyWord()" class="bs col-sm-6 col-md-6 col-xs-6 col-lg-2 onclick-pointer mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn">
                                                {!$Label.Doctor_List_Search_Button}
                                            </div>
                                            <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-5"></div>
                                        </div>
                                        
                                        
                                        <div class="bs row" style="padding: 20px 0px;">
                                            <div class="bs col-sm-12 dl-font col-md-12 col-xs-12 col-lg-12">
                                                {!$Label.Doctor_List_Search_Dropdown}
                                            </div>
                                        </div>
                                        -->
                                        <div id="moreOption" style="padding-top: 50px;">
                                            <div class="bs row " style="padding-bottom: 20px;">
                                                <div class="bs col-sm-2 col-md-2 col-xs-12 col-lg-2" style="padding: 0px;">
                                                    <apex:selectList style="height:34px;" value="{!selectedPolicyMB}" size="1" styleClass="bs form-field-style-select" disabled="{!policyTypeReadOnly}">
                                                        <apex:selectOptions value="{!myAvailablePolicys}" />
                                                    </apex:selectList>
                                                </div>
                                            </div>
                                            <div class="bs row" style="padding-bottom: 20px;">
                                                <div class="bs col-sm-2 col-md-2 col-xs-12 col-lg-2" style="padding: 0px;">
                                                    <apex:inputField value="{!searchCriteria.Area__c}" styleClass="bs form-field-style-select" onchange="DrListAF.refreshList()" />
                                                </div>
                                            </div>
                                            <apex:outputPanel id="searchApexPanel2">
                                                <div class="bs row disPanel-mb" style="padding-bottom: 20px;">
                                                    <div class="bs col-sm-2 col-md-2 col-xs-12 col-lg-2" style="padding: 0px;">
                                                        <apex:inputField id="districtList" styleClass="bs form-field-style-select" value="{!searchCriteria.District__c}" />
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <div class="bs row" style="padding-bottom: 20px;">
                                                <div class="bs col-sm-2 col-md-2 col-xs-12 col-lg-2" style="padding: 0px;">
                                                    <apex:selectList style="height:34px;" value="{!selectedSpecialtyMB}" size="1" styleClass="bs form-field-style-select">
                                                        <apex:selectOptions value="{!doctorSpecialtyList}" />
                                                    </apex:selectList>
                                                </div>
                                            </div>
                                            <div class="bs row" style="padding-bottom: 20px;">
                                                <div class="bs col-sm-2 col-md-2 col-xs-12 col-lg-2" style="padding: 0px;">
                                                    <apex:selectList style="height:34px;" value="{!selectedConsultTypeMB}" size="1" styleClass="bs form-field-style-select" disabled="{!consultTypeReadOnly}">
                                                        <apex:selectOptions value="{!doctorConsultType}" />
                                                    </apex:selectList>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bs row" style="padding-top: 20px;">
                                            <div class="bs col-sm-2 col-md-2 col-xs-12 col-lg-2" style="padding: 0px;">
                                                <apex:inputText style="font-size: 0.75em;" id="address" styleClass="bs form-field-style" value="{!theAddress_mb}" html-placeholder="{!$Label.Doctor_List_Search_General_PH}" />
                                            </div>
                                            <!-- removed in 21061213 design
                                            <div class="bs col-sm-1 col-md-1 col-xs-1 col-lg-1" style="padding: 10px;">
                                                <span class="bs glyphicon glyphicon-search" />
                                            </div>
                                            -->
                                        </div>
                                        <div class="bs row" style="padding-top: 50px;">
                                            <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-5"></div>
                                            <div id="seach-button" onclick="GTMonClickPush('{!SMTDpctorListSearchTag}','{!$Setup.Portal_Settings__c.Customer_Portal_URL__c}/apex/CusDoctorListVFP','{!IF(isTDUser,cusPartSMT,'')}');Cigna.DrList.showLoading();DrListAF.searchKeyWordDT();" class="bs col-sm-6 col-md-6 col-xs-6 col-lg-2 onclick-pointer mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn">
                                                    {!$Label.Doctor_List_Search_Button}
                                            </div>
                                            <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-5"></div>
        
                                        </div>
                                        <div style="font-family: sans-serif;font-style: italic;font-size: 14px; padding:1px 0px 1px 5px;margin-bottom: 0px;">
                                            <!--Nicole_SMT_20210531-->
                                            <apex:outputPanel rendered="{!isVirtualTD}">{!$Label.Doctor_TD_Note}<br/></apex:outputPanel>
                                            <!-- JOBR-140_Link_20220728 -->
                                            <apex:outputText rendered="{!isDIYPolicy}" value="{!$Label.DoctorList_eg}" escape="false"/><br/>
                                        </div>
                                    </div>
                                    <div class="bs hidden-xs" style="padding: 0px 15px;">
                                        <div class="bs row" style="padding: 10px 15px 0px 15px;" >
                                            <div class="bs col-sm-2 col-md-2 col-lg-2 " style="padding: 0px;">
                                                <apex:selectList style="height:34px;" value="{!selectedPolicy}" size="1" styleClass="bs form-field-style-select" disabled="{!policyTypeReadOnly}">
                                                    <apex:selectOptions value="{!myAvailablePolicys}" />
                                                </apex:selectList>
                                            </div>
        
                                            <div class="bs col-sm-2 col-md-2 col-lg-2" style="padding-right: 5px;padding-left: 15px;">
                                                <apex:inputField value="{!searchCriteriaDesktop.Area__c}" styleClass="bs form-field-style-select" onchange="DrListAF.refreshList()" />
                                            </div>
        
                                            <apex:outputPanel id="searchApexPanel" layout="block">
                                                <div class="bs col-sm-2 col-md-2 col-lg-2 disPanel" style="padding: 0px 5px;">
                                                    <apex:inputField id="districtList_mb" styleClass="bs form-field-style-select" value="{!searchCriteriaDesktop.District__c}" />
                                                </div>
                                            </apex:outputPanel>
        
                                            <div class="bs col-sm-3 col-md-3 col-lg-3" style="padding: 0px 5px;">
                                                <apex:selectList style="height:34px;" value="{!selectedSpecialty}" size="1" styleClass="bs form-field-style-select">
                                                    <apex:selectOptions value="{!doctorSpecialtyList}" />
                                                </apex:selectList>
                                            </div>
        
                                            <div class="bs col-sm-3 col-md-3 col-lg-3" style="padding: 0px 5px;">
                                                <apex:selectList style="height:34px;" value="{!selectedConsultType}" size="1" styleClass="bs form-field-style-select" disabled="{!consultTypeReadOnly}">
                                                    <apex:selectOptions value="{!doctorConsultType}" />
                                                </apex:selectList>
                                            </div>
        
                                        </div>
        
                                        <div class="bs row" style="padding: 5px 0px;">
                                            <div class="bs col-sm-10 col-md-10 col-lg-10" style="padding: 0px 15px;">
                                                <apex:inputText id="address_mb" styleClass="bs form-field-style" value="{!theAddress}" html-placeholder="{!$Label.Doctor_List_Search_General_PH}" />
                                            </div>
                                            <div class="bs col-sm-2 col-md-2 col-lg-2" style="padding: 0px 5px">
                                                <div id="seach-button" onclick="GTMonClickPush('{!SMTDpctorListSearchTag}','{!$Setup.Portal_Settings__c.Customer_Portal_URL__c}/apex/CusDoctorListVFP','{!IF(isTDUser,cusPartSMT,'')}');DrListAF.searchKeyWord()" class="bs mobile-version-button onclick-pointer cigna-fg-white cigna-bg-orange-dark desktop-action-btn" style="width: 90%;">
                                                        {!$Label.Doctor_List_Search_Button}
                                                </div>
                                            </div>
                                        </div>
                                        <div style="font-family: sans-serif;font-style: italic;font-size: 16px; padding:1px 0px 1px 5px;margin-bottom: 0px;">
                                            <!--Nicole_SMT_20210531-->
                                            <apex:outputPanel rendered="{!isVirtualTD}">{!$Label.Doctor_TD_Note}<br/></apex:outputPanel>
                                            <!-- JOBR-140_Link_20220728 -->
                                            <apex:outputText rendered="{!isDIYPolicy}" value="{!$Label.DoctorList_eg}" escape="false"/><br/>
                                        </div>
                                    </div>
                                </div>
                            </div>
        
                            <div id="WWList" class="tab-pane bs" style="{!IF(showWWTab,'','display: none')};">
                                <div id="wwSearchPanel" style="{!IF(currentPanel == 'F','display:none;','')}" class="bs {!IF(currentPanel == 'S','','hidden-xs')}">
                                    <apex:outputPanel layout="block" id="wwSearchPanelApex">
                                        <div class="bs row ">
                                            <div class="bs col-sm-4 col-xs-12 dl-mobile-padding" >
                                                <apex:inputField value="{!wwSearchCriteriaDesktop.Country_pl__c}" styleClass="bs form-field-style-select cigna-fg-gray-dark" onchange="DrListAF.wwTriggerCity();"/>
                                            </div>
                                            <apex:outputPanel layout="block" id="wwStateListApex1">
                                                <div class="bs col-sm-4 col-xs-12 dl-mobile-padding" >
                                                    <apex:inputField rendered="{!wwShowState}" id="state-list" value="{!wwSearchCriteriaDesktop.State_pl__c}" styleClass="bs form-field-style-select cigna-fg-gray-dark" onchange="DrListAF.wwTriggerCityByState();"/>
        
                                                    <apex:selectList disabled="true" rendered="{!!wwShowState}" value="{!wwFakeSelectedState}" size="1" styleClass="bs form-field-style-select cigna-fg-gray-dark">
                                                        <apex:selectOptions value="{!wwFakeStateList}" />
                                                    </apex:selectList>
                                                </div>
                                            </apex:outputPanel>
        
        
                                            <apex:outputPanel layout="block" id="wwCityListApex">
                                                <div class="bs col-sm-4 col-xs-12 dl-mobile-padding" >
                                                    <apex:selectList value="{!wwSearchCriteria.City__c}" size="1" styleClass="bs form-field-style-select cigna-fg-gray-dark">
                                                        <apex:selectOptions value="{!wwCityList}" />
                                                    </apex:selectList>
                                                </div>
                                            </apex:outputPanel>
        
                                        </div>
        
                                        <div class="bs row" style="padding: 5px 0px;">
        
                                            <div class="bs hidden-xs col-sm-10 col-xs-12" >
                                                <apex:inputText id="wwAddress" styleClass="bs form-field-style" value="{!wwKeyword}" html-placeholder="{!$Label.Doctor_List_Search_General_PH}" />
                                            </div>
        
                                            <div class="bs hidden-xs col-sm-2 col-md-2 col-lg-2 col-xs-12" style="padding: 0px 5px">
                                                <div id="seach-button" onclick="GTMonClickPush('{!SMTDpctorListSearchTag}','{!$Setup.Portal_Settings__c.Customer_Portal_URL__c}/apex/CusDoctorListVFP','{!IF(isTDUser,cusPartSMT,'')}');DrListAF.wwSearchProviderList()" class="bs mobile-version-button onclick-pointer cigna-fg-white cigna-bg-orange-dark desktop-action-btn" style="width: 90%;">
                                                        {!$Label.Doctor_List_Search_Button}
                                                </div>
                                            </div>
                                        </div>
        
                                        <div class="bs row visible-xs dl-mobile-padding">
                                            <div class="bs form-group col-sm-7 col-md-7 col-xs-12 col-lg-7" >
                                                <apex:inputText style="font-size: 0.75em;" id="wwAddress_mb" styleClass="bs form-field-style" value="{!wwKeywordMB}" html-placeholder="{!$Label.Doctor_List_Search_General_PH}" />
                                            </div>
                                        </div>
        
                                        <div class="bs row visible-xs" >
                                            <div class="bs col-xs-offset-3 col-xs-6" style="padding: 0px 5px">
                                                <div id="seach-button" onclick="GTMonClickPush('{!SMTDpctorListSearchTag}','{!$Setup.Portal_Settings__c.Customer_Portal_URL__c}/apex/CusDoctorListVFP','{!IF(isTDUser,cusPartSMT,'')}');DrListAF.wwSearchProviderListDT()" class="bs mobile-version-button onclick-pointer cigna-fg-white cigna-bg-orange-dark desktop-action-btn" style="width: 90%;">
                                                        {!$Label.Doctor_List_Search_Button}
                                                </div>
                                            </div>
                                        </div>
                                        <div style="font-family: sans-serif;font-style: italic;font-size: 16px; padding:1px 0px 1px 5px;margin-bottom: 0px;">
                                            <apex:outputText rendered="{!isDIYPolicy}" value="{!$Label.DoctorList_eg}" escape="false"/><br/>
                                        </div>
                                    </apex:outputPanel>
                                </div>
                            </div>
                        </apex:outputPanel>
        
                        <apex:outputPanel id="mapPanel" layout="block">
                            <div id="mapPanel" style="{!IF(currentPanel == 'F','display:none;','')}" class="bs {!IF(currentPanel == 'L','','hidden-xs')}">
                                <apex:outputPanel id="TopPanel" layout="block">
                                    <apex:variable value="{!1}" var="rowNum" />
                                    <div id="ListView" class="bs col-sm-5 col-md-5 col-xs-12 col-lg-5" style="padding-right:0px;-webkit-transform: translate3d(0, 0, 0);">
                                        <div class='bs'>
                                            <apex:outputPanel layout="block" rendered="{!availableClinicList.size == 0}">
                                                <div style="text-align: center;padding-top: 20px;">
                                                    <p>{!$Label.Doctor_List_No_Record_Found}</p>
                                                </div>
                                            </apex:outputPanel>
                                            <apex:repeat value="{!availableClinicList}" var="currentClinic">
                                                <div id="clinic-{!currentClinic.id}">
                                                    <!--junda update JR1858-->
                                                    <div class="bs {!IF(isForWW,'','onclick-pointer')}" onclick="if('{!isForWW}' == 'false'){if($(window).width() < 768){$(document).scrollTop(0)};Cigna.DrList.openDetail({!rowNum});clinicDetail('{!currentClinic.id}','{!currentClinic.Network_Clinic_Name__c}')}">
                                                        <!--junda update end-->
                                                        <!--<td class='Centre_num'>{!rowNum}</td> -->
                                                        <span class="mark" style="display:none" />
                                                        <div class='bs col-sm-12 col-md-12 col-lg-12 col-xs-12 list-content' style="padding: 10px;border-bottom: 1px solid grey;">
                                                            <div style="font-size: 0.9em;margin-bottom: 5px;">
                                                                <apex:outputText escape="false" value="{!currentClinic.Network_Clinic_Name__c}"/>
        
                                                                <apex:outputPanel rendered="{!currentClinic.Virtual__c}" style="color:#00A9E0;font-size:10px;">
                                                                    <apex:image url="{!$Resource.DoctorNowIcon}" style="height: 16px;padding-left: 8px;padding-right: 5px"/>
                                                                        {!$Label.Doctor_List_VC}
                                                                </apex:outputPanel>
        
        
                                                                <apex:outputPanel rendered="{!!isForWW}">
                                                                    <i class="ci-hk-arrow-31" aria-hidden="true" style="float:right;color: #134688;"></i>
                                                                </apex:outputPanel>
                                                            </div>
                                                            <div style="font-size: 0.7em;line-height: 1.5em;">
                                                                <apex:outputText escape="false" value="{!currentClinic.Address_Display__c}"/>
                                                            </div>
                                                            <!--BEGIN HKITSFDC-55-->
                                                            <div style="font-size: 0.7em;line-height: 1.5em;">
                                                                <apex:outputText escape="false" value="{!currentClinic.Service_Provided__c}"/>
                                                            </div>
                                                            <!--END HKITSFDC-55-->
                                                            <p style="font-size: 0.7em;line-height: 1.5em;color: #E35205">
                                                                <apex:outputPanel id="VCIntroLabel" style="cursor: pointer;" rendered="{!currentClinic.Virtual__c}" onclick="Cigna.DrList.toggleVCIntro();event.stopPropagation()">
                                                                        {!$Label.Doctor_List_How_VC_Work}
                                                                </apex:outputPanel>
                                                            </p>
        
                                                            <p style="font-size: 0.7em;color: #134688;margin-bottom: 0px;">
                                                                <apex:outputPanel rendered="{!!currentClinic.Virtual__c}">
                                                                    <i class="fa fa-circle" aria-hidden="true" />&nbsp; {!IF(noUserLocation || !currentClinic.Coordinate_Available__c,$Label.Doctor_List_Unknown, TEXT(currentClinic.distanceToMe__c)&" KM")} &nbsp;&nbsp;
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!showMakeAnAppointment&& currentClinic.BookOnline__c}">
                                                                    <i class="ci-hk-calendar-check" aria-hidden="true" />&nbsp;{!$Label.Doctor_List_Online_Appointment}
                                                                </apex:outputPanel>
                                                            </p>
        
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Detail List -->
                                                <div id="clinic-{!rowNum}-detail" class="bs panel-body" style="display:none;">
                                                    <div class="bs row">
                                                        <div class="bs col-lg-12 hidden-xs" style="font-size: 1em;margin-bottom: 5px;">
                                                            <apex:outputText escape="false" value="{!currentClinic.Network_Clinic_Name__c}"/>
        
                                                            <apex:outputPanel rendered="{!currentClinic.Virtual__c}" style="color:#00A9E0;font-size:10px;">
                                                                <apex:image url="{!$Resource.DoctorNowIcon}" style="height: 16px;padding-left:5px;width:auto;padding-right: 8px;"/>{!$Label.Doctor_List_VC}
                                                            </apex:outputPanel>
        
                                                        </div>
        
                                                        <div class="bs col-xs-12 visible-xs" style="font-size: 1em;margin-bottom: 5px;">
                                                            <apex:outputText escape="false" value="{!currentClinic.Network_Clinic_Name__c}"/>
        
                                                            <apex:outputPanel rendered="{!currentClinic.Virtual__c}" style="color:#00A9E0;font-size:10px;">
                                                                <apex:image url="{!$Resource.DoctorNowIcon}" style="height: 16px;padding-left:5px;width:auto;padding-right: 8px;"/>{!$Label.Doctor_List_VC}
                                                            </apex:outputPanel>
                                                        </div>
        
                                                        <div class="bs col-xs-12 col-lg-12" style="font-size: 1em;margin-bottom: 5px;">
                                                            <apex:outputPanel rendered="{!currentClinic.Virtual__c}"  >
                                                                <p style="font-size: 0.7em;line-height: 1.5em;color: #E35205;cursor: pointer;" onclick="Cigna.DrList.toggleVCIntro();">{!$Label.Doctor_List_How_VC_Work}
                                                                </p>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="bs row " style="padding-bottom:30px">
                                                        <div class="bs col-lg-12 col-xs-12">
                                                            <!-- Bug fix of AH19185 Linus 2020-May-20 -->
                                                            <apex:outputText escape="false" value="{!currentClinic.Address__c}"/>
                                                            
                                                            <!-- Removed in 20161213 design
                                                                <span style="float:right;">
                                                                    {!IF(noUserLocation,'Unknown', currentClinic.distanceToMe__c)}&nbsp;KM
                                                                </span>
                                                                -->
                                                        </div>
                                                        <!--BEGIN HKITSFDC-55-->
                                                        <div class="bs col-lg-12 col-xs-12">
                                                            <apex:outputText value="{!currentClinic.Service_Provided__c}"/>
                                                        </div>
                                                        <!--END HKITSFDC-55-->
                                                        <!--
                                                        <div class="bs detail-font col-lg-1 col-xs-1" style="font-size: 1.5em;text-align: right;padding-right: 0px; display:none;">
                                                            <i class="fa fa-map-marker" aria-hidden="true"></i>
                                                        </div>
                                                        -->
                                                    </div>
                                                    <!-- <div class="bs col-lg-12 col-xs-12">{!currentClinic.DistanceToMe__c}&nbsp;KM</div> -->
                                                    <!-- Removed in 20161213 design
                                                        <div class="bs row" style="padding-bottom:5px">
                                                            <div class="bs detail-font col-lg-5 col-xs-5">{!$Label.Doctor_List_Specialty}</div>
                                                            <div class="bs detail-font col-lg-5 col-xs-5">
                                                                {!currentClinic.Specialty__c}
                                                            </div>
                                                            <div class="bs detail-font col-lg-2 col-xs-2"></div>
                                                        </div>
                                                        
                                                        <div class="bs row" style="padding-bottom:5px">
                                                            <div class="bs detail-font col-lg-5 col-xs-5">{!$Label.Doctor_List_District_Area}</div>
                                                            <div class="bs detail-font col-lg-5 col-xs-5">{!IF((currentClinic.District__c !='' && currentClinic.Area__c !=''), currentClinic.District__c+'/'+currentClinic.Area__c,currentClinic.District__c + currentClinic.Area__c)}</div>
                                                            <div class="bs detail-font col-lg-2 col-xs-2"></div>
                                                        </div>
                                                        -->
                                                    <!-- 20231113 - minghua - JOBR-339 Elite 360 - Doctor list -->
                                                    <div class="bs row hidden-xs" style="padding-bottom:10px">
                                                        <div class="bs detail-font col-sm-3 col-xs-12">{!$Label.Doctor_List_Tel}</div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12">{!$Label.Doctor_List_Appointment}</div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12">{!$Label.Doctor_List_Whatsapp}</div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12">
                                                            {!$Label.Doctor_List_Office_Hours}
                                                        </div>
                                                    </div>
                                                    <div class="bs row hidden-xs" style="padding-bottom:20px">
                                                        <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                            {!currentClinic.Telephone__C}
                                                        </div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                            {!currentClinic.Appointment_Hotline__c}
                                                        </div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                            <apex:image value="{!$Resource.whatapp}" height="25px"></apex:image>
                                                            {!currentClinic.Appointment_Whatsapp__c}
                                                        </div>
                                                        <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'zh_TW'}">
                                                            <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                                <apex:outputText value="{!SUBSTITUTE(SUBSTITUTE(JSENCODE(currentClinic.Opening_Hours_en__c),'\\r\\n','<br/>'),'\\n','<br/>')}" escape="false"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'en_US'}" >
                                                            <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                                <apex:outputText value="{!SUBSTITUTE(SUBSTITUTE(JSENCODE(currentClinic.Opening_Hours_zh__c),'\\r\\n','<br/>'),'\\n','<br/>')}" escape="false"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>

                                                    <!-- 20231113 - minghua - JOBR-339 Elite 360 - Doctor list -->
                                                    <div class="bs row visible-xs" style="padding-bottom:10px">
                                                        <div class="bs detail-font col-sm-3 col-xs-12">{!$Label.Doctor_List_Tel}</div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                            {!currentClinic.Telephone__C}
                                                        </div>
                                                    </div>
                                                    <div class="bs row visible-xs" style="padding-bottom:10px">
                                                        <div class="bs detail-font col-sm-3 col-xs-12">{!$Label.Doctor_List_Appointment}</div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                            {!currentClinic.Appointment_Hotline__c}
                                                        </div>
                                                    </div>
                                                    <div class="bs row visible-xs" style="padding-bottom:10px">
                                                        <div class="bs detail-font col-sm-3 col-xs-12">{!$Label.Doctor_List_Whatsapp}</div>
                                                        <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                            <apex:outputPanel rendered="{!currentClinic.Appointment_Whatsapp__c!='-'}">
                                                                <a href="https://wa.me/{!currentClinic.Appointment_Whatsapp__c}">
                                                                    <apex:image value="{!$Resource.whatapp}" height="25px"></apex:image>
                                                                    {!currentClinic.Appointment_Whatsapp__c}
                                                                </a>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!currentClinic.Appointment_Whatsapp__c=='-'}">
                                                                <apex:image value="{!$Resource.whatapp}" height="25px"></apex:image>
                                                                {!currentClinic.Appointment_Whatsapp__c}
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="bs row visible-xs" style="padding-bottom:20px">
                                                        <div class="bs detail-font col-sm-3 col-xs-12" >
                                                            {!$Label.Doctor_List_Office_Hours}
                                                        </div>
                                                        <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'zh_TW'}">
                                                            <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                                <apex:outputText value="{!SUBSTITUTE(SUBSTITUTE(JSENCODE(currentClinic.Opening_Hours_en__c),'\\r\\n','<br/>'),'\\n','<br/>')}" escape="false"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'en_US'}" >
                                                            <div class="bs detail-font col-sm-3 col-xs-12" style="font-weight: bold">
                                                                <apex:outputText value="{!SUBSTITUTE(SUBSTITUTE(JSENCODE(currentClinic.Opening_Hours_zh__c),'\\r\\n','<br/>'),'\\n','<br/>')}" escape="false"/>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <!--
                                                        <apex:variable value="{!1}" var="nameNum" />
                                                        <apex:repeat value="{!currentClinic.Network_doctors__r}" var="currentdocList">
                                                            <div class="bs row" style="padding-bottom:5px">
                                                                <div class="bs detail-font col-lg-5 col-xs-5">{!IF(nameNum != 1,'',$Label.Doctor_List_Doctor_Name)}</div>
                                                                <div class="bs detail-font col-lg-5 col-xs-5">{!currentdocList.Network_Doctor_Name__c}</div>
                                                                <div class="bs detail-font col-lg-2 col-xs-2"></div>
                                                            </div>
                                                            <apex:variable var="nameNum" value="{!nameNum + 1}" />
                                                        </apex:repeat>
                                                        -->
                                                    <div id="doctorDetailInfo">
                                                        <table id="hd1" class="bs table" style="margin-bottom:0px;display:{!IF((currentClinic.Network_doctors__r!=null&&currentClinic.Network_doctors__r.size > 0), '','none')}">
                                                            <tbody class="hidden-xs visible-sm visible-md visible-lg col-sm-12">
                                                            <tr>
                                                                <th style="font-weight: bold" class="bs table-font">{!$Label.Doctor_List_Doctor_Name}</th>
                                                                <th style="font-weight: bold" class="bs table-font">{!$Label.Doctor_List_Specialty}</th>
                                                                <th style="font-weight: bold" class="bs table-font">{!$Label.Doctor_List_Qualification}</th>
                                                                <th style="font-weight: bold" class="bs table-font"></th>
                                                                <!--
                                                                        <th style="font-weight: bold" class="bs table-font">{!$Label.Doctor_List_Tel}</th>
                                                                        <th style="font-weight: bold" class="bs table-font">{!$Label.Doctor_List_Office_Hours}</th>
                                                                        -->
                                                            </tr>
                                                            <apex:variable value="{!1}" var="doctorNum" />
                                                            <apex:repeat value="{!currentClinic.Network_doctors__r}" var="currentdocList">
                                                                <tr style="{!IF(MOD(doctorNum,2)==0,'','background-color:rgb(242,242,242)')}">
                                                                    <td class="bs table-font">{!currentdocList.Network_Doctor_Name__c}</td>
                                                                    <td class="bs table-font">{!currentdocList.Specialty__c}</td>
                                                                    <td class="bs table-font">{!currentdocList.Qualification__c}</td>
                                                                    <td class="bs table-font">
                                                                        <apex:outputPanel rendered="{!currentdocList.Virtual__c}" style="color:#00A9E0;font-size:10px;">
                                                                            <apex:image url="{!$Resource.DoctorNowIcon}" style="height: 16px;padding-left: 8px;padding-right: 5px"/>
                                                                        </apex:outputPanel>
                                                                    </td>
                                                                    <!--
                                                                            <td class="bs table-font" style="white-space: nowrap;">{!currentdocList.Telephone__c}</td>
                                                                            <td class="bs table-font">
                                                                                <apex:outputText value="{!SUBSTITUTE(SUBSTITUTE(JSENCODE(currentdocList.Opening_Hours__c),'\\r\\n','<br/>'),'\\n','<br/>')}" style="white-space:pre;" escape="false"/>
                                                                            </td>
                                                                            -->
                                                                </tr>
                                                                <apex:variable var="doctorNum" value="{!doctorNum + 1}" />
                                                            </apex:repeat>
                                                            </tbody>
        
                                                        </table>
        
                                                        <div class="doctor-card-wrapper visible-xs hidden-sm hidden-lg hidden-md col-xs-12" style="padding :0px">
                                                            <apex:variable value="{!1}" var="doctorNum" />
                                                            <apex:repeat value="{!currentClinic.Network_doctors__r}" var="currentdocList">
        
                                                                <div class="doctor-card" style="{!IF(MOD(doctorNum,2)==0,'','background-color:rgb(242,242,242)')}">
                                                                    <div class="bs row">
                                                                        <div class="bs col-xs-12 table-font" >
                                                                                {!$Label.Doctor_List_Doctor_Name}
                                                                        </div>
                                                                    </div>
        
                                                                    <div class="bs row value-row">
                                                                        <div class="bs col-xs-12 card-content">
                                                                        {!currentdocList.Network_Doctor_Name__c}
                                                                            <apex:outputPanel rendered="{!currentdocList.Virtual__c}" style="color:#00A9E0;font-size:10px;">
                                                                                <apex:image url="{!$Resource.DoctorNowIcon}" style="height: 16px;padding-left: 8px;padding-right: 5px;vertical-align: top;"/>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </div>
        
                                                                    <div class="bs row">
                                                                        <div class="bs col-xs-12 table-font" >
                                                                                {!$Label.Doctor_List_Specialty}
                                                                        </div>
                                                                    </div>
        
                                                                    <div class="bs row value-row">
                                                                        <div class="bs col-xs-12 card-content">
                                                                                {!currentdocList.Specialty__c}
                                                                        </div>
                                                                    </div>
        
                                                                    <div class="bs row">
                                                                        <div class="bs col-xs-12 table-font" >
                                                                                {!$Label.Doctor_List_Qualification}
                                                                        </div>
                                                                    </div>
        
                                                                    <div class="bs row value-row ">
                                                                        <div class="bs col-xs-12 card-content">
                                                                                {!currentdocList.Qualification__c}
                                                                        </div>
                                                                    </div>
        
                                                                    <!--
                                                                         <div class="bs row">    
                                                                            <div class="bs col-xs-12 table-font" >
                                                                                {!$Label.Doctor_List_Tel}
                                                                            </div>
                                                                        </div>
        
                                                                        <div class="bs row value-row">    
                                                                           <div class="bs col-xs-12 card-content">
                                                                                {!currentdocList.Telephone__c}
                                                                            </div>
                                                                        </div>
        
                                                                        <div class="bs row">    
                                                                            <div class="bs col-xs-12 table-font">
                                                                                {!$Label.Doctor_List_Office_Hours}
                                                                            </div>
                                                                        </div>
        
                                                                        <div class="bs row value-row">    
                                                                           <div class="bs col-xs-12 card-content">
                                                                                <apex:outputText value="{!SUBSTITUTE(SUBSTITUTE(JSENCODE(currentdocList.Opening_Hours__c),'\\r\\n','<br/>'),'\\n','<br/>')}" style="white-space:pre;" escape="false"/>
                                                                            </div>
                                                                        </div>
                                                                        -->
                                                                </div>
                                                                <apex:variable var="doctorNum" value="{!doctorNum + 1}" />
                                                            </apex:repeat>
                                                        </div>
                                                    </div>
        
                                                    <apex:outputPanel rendered="{!showMakeAnAppointment && currentClinic.BookOnline__c}" layout="block" style="display:inline-block;width:100%;padding-top: 20px;">
                                                        <hr class="hidden-xs" />
                                                        <div class="bs row">
                                                            <div class="bs col-sm-12 col-lg-12" style="font-size: 0.9em;margin-bottom: 20px;">
                                                                    {!$Label.Doctor_List_Make_Appointment}
                                                            </div>
                                                        </div>
                                                        <div class="bs row">
                                                            <div class="bs col-sm-12 col-lg-12" style="font-size: 0.8em;margin-bottom: 10px;">
                                                                    {!$Label.Doctor_List_Preferred_Doctor}
                                                            </div>
                                                        </div>
                                                        <div class="bs row" style="margin-bottom: 20px;">
                                                            <div class="bs col-sm-12 col-lg-12">
                                                                <i class="ci-hk-doctor ci-hk-lg" aria-hidden="true" style="padding-right: 20px"></i>
        
                                                                <select id="appointment-doctor" style="width:80%;border-bottom:1px solid black;font-size:0.8em;" name="preferDoc" class="bs form-field-style-select" required="required" onchange="Cigna.DrList.updateDoctor(this);">
                                                                    <apex:repeat value="{!currentClinic.Network_doctors__r}" var="currentdocList">
                                                                        <option value="{!currentdocList.id}" style="{!IF(currentdocList.IsBookable__c,'display:none','')}">
                                                                                {!currentdocList.Network_Doctor_Name__c}
                                                                        </option>
                                                                    </apex:repeat>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="bs row">
                                                            <div class="bs col-sm-12 col-lg-12" style="font-size: 0.8em;margin-bottom: 10px;">
                                                                    {!$Label.Doctor_List_Appointment_Date}
                                                            </div>
                                                        </div>
                                                        <div class="bs row" style="margin-bottom: 20px;">
        
                                                            <div class="bs col-sm-12 col-lg-12">
                                                                <i class="ci-hk-calendar-day ci-hk-lg" aria-hidden="true" style="padding-right: 20px"></i>
                                                                <input type="text" id="appointment-date" disabled="true" data-altField-id="appointed-date" data-date-yyyy-mm-dd="{!appointedDate}" required="required" onchange="Cigna.DrList.updateDate(this);"/>
                                                            </div>
        
                                                        </div>
                                                        <div class="bs row">
                                                            <div class="bs col-sm-12 col-lg-12" style="font-size: 0.8em;margin-bottom: 10px;">
                                                                    {!$Label.Doctor_List_Search_Preferred_Appointment_Time}
                                                            </div>
                                                        </div>
                                                        <div class="bs row" style="margin-bottom:20px;">
        
                                                            <div class="bs col-sm-12 col-lg-12">
                                                                <i class="ci-hk-midnight ci-hk-lg" aria-hidden="true" style="padding-right: 20px"></i>
                                                                <select id="appointment-time" style="width: 80%;border-bottom: 1px solid black;font-size: 0.8em;" name="preferTime" class="bs form-field-style-select" required="required" onchange="Cigna.DrList.updateTime(this);">
                                                                    <option value="AM">AM</option>
                                                                    <option value="PM">PM</option>
                                                                </select>
                                                            </div>
        
                                                        </div>
                                                        <div class="bs row">
                                                            <div class="bs col-sm-12 col-lg-12" style="font-size: 0.8em;margin-bottom: 10px;">
                                                            {!$Label.Doctor_List_Description}:
                                                            </div>
                                                        </div>
                                                        <div class="bs row" style="padding-bottom:62px;">
                                                            <div class="bs col-sm-12 col-lg-12" style="font-size: 0.8em;margin-bottom: 10px;">
                                                                <textarea id="appointment-remark" rows="4" class="bs form-control" name="myMessage" type="text" maxlength="200" style="height: 100px;" onchange="Cigna.DrList.updateRemark(this);"/>
                                                            </div>
                                                        </div>
                                                        <div id="action-bar" class="bs visible-xs cigna-floating-bottom-panel" style="left:0px;">
                                                            <div id="submit-btn" onclick="Cigna.DrList.submitAppointment();" class="bs cigna-action-btn-group cigna-fg-white cigna-bg-orange-dark">
                                                                <a class="action-btn cigna-fg-white" role="button"><span class="ci-hk-calendar-check" aria-hidden="true"></span><br/>{!$Label.Doctor_List_Make_Appointment}</a>
                                                            </div>
                                                        </div>
                                                        <div class="bs row hidden-xs" style="padding-bottom: 20px;">
                                                            <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-3 "></div>
                                                            <div id="submit-btn-mb" onclick="Cigna.DrList.submitAppointment();" class="bs col-sm-6 col-md-6 col-xs-6 col-lg-6 onclick-pointer mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn">
                                                                    {!$Label.Doctor_List_Make_Appointment}
                                                            </div>
                                                            <div class="bs col-sm-3 col-md-3 col-xs-3 col-lg-3"></div>
                                                        </div>
                                                        <!--
                                                        <script type="text/javascript">
                                                            $('#location-param input[id$="appointed-doctor"]').val($('#appointment-doctor').val());
                                                            $('#location-param input[id$="appointed-time"]').val($('#appointment-time').val());
                                                        </script>
                                                        -->
                                                    </apex:outputPanel>
                                                </div>
                                                <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                            </apex:repeat>
                                            <!-- Load More -->
                                            <apex:outputPanel layout="block" rendered="{!renderShowMore}">
                                                <div class="bs">
                                                    <label id="loadMore-label" class="cigna-fg-white cigna-bg-blue-dark onclick-pointer"  onclick="Cigna.DrList.loadList({!currentpage+1});" style="padding: 5px;margin: 10px;margin-bottom: 20px;">
                                                            {!$Label.Doctor_List_Load_More}
                                                    </label>
                                                    <i id="loadMore-icon" style="display: none;color:#004986;font-size: 1.5em;margin: 10px;" class="bs spinner-icon fa fa-spinner fa-pulse fa-fw"></i>
                                                </div>
                                            </apex:outputPanel>
                                            <script>
                                                var isIE = /(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent);
                                                if(isIE){
                                                    $('#ListView').css('max-height','360px');
                                                    $('#ListView').css('min-height','360px');
                                                }
                                            </script>
                                        </div>
                                    </div>
        
                                    <div id="clinic-detail-panel" style="display:none;" class="bs col-sm-12 col-md-12 col-xs-12 col-lg-12">
                                    </div>
                                    <apex:outputPanel rendered="{!showMap}" >
                                        <script>
                                            function initMakers() {
                                                if($('#map').is(':visible')){
                                                    Cigna.DrList.removeMarkers();
                                                    var bounds = new google.maps.LatLngBounds();
        
                                                    var myMakerLabel = Cigna.DrList.myPositon.dummy?"Cigna Hong Kong":"Me";
        
                                                    var loc = new google.maps.LatLng(Cigna.DrList.myPositon.lat,Cigna.DrList.myPositon.lng);
        
                                                    //center map
                                                    Cigna.DrList.map.setCenter(loc);
        
                                                    //create marker
                                                    var currentMarker = new google.maps.Marker({
                                                        position: loc,
                                                        icon: "{!URLFOR($Resource.MyLocationMarker)}",
                                                        map: Cigna.DrList.map,
                                                        title: myMakerLabel
                                                    });
        
        
                                                    currentMarker.addListener('click', function() {
                                                        Cigna.DrList.infowindow.setContent('<div><strong>' + myMakerLabel + '</strong>' + '</div>');
                                                        Cigna.DrList.infowindow.open(Cigna.DrList.map, this);
                                                    });
        
                                                    bounds.extend(loc);
                                                    Cigna.DrList.markers.push(currentMarker);
        
                                                    var lats = new Array();
                                                    var lngs = new Array();
                                                    //var allNames = new Array();
                                                    //var markerList = new Array();
                                                    //Prepare Data
        
                                                    var clinicList = [];
        
        
                                                <apex:repeat value="{!allLat}" var="Lat">
                                                    lats.push("{!Lat}");
                                                </apex:repeat>
        
                                                    <apex:repeat value="{!allLng}" var="Lng">
                                                    lngs.push("{!Lng}");
                                                </apex:repeat>
        
                                                    <apex:repeat value="{!availableClinicList}" var="clinic">
                                                    var c = {};
                                                    c.name = "{!JSENCODE(clinic.Network_Clinic_Name__c)}";
                                                    c.hasCoordinate = {!clinic.Coordinate_Available__c};
                                                    c.id = "{!clinic.id}";
                                                    if(c.hasCoordinate){
                                                        clinicList.push(c);
                                                    }
                                                </apex:repeat>
        
        
                                                    for (var i in lats) {
                                                        if (!(isNaN(parseFloat(lats[i])) || isNaN(parseFloat(lngs[i])))) {
        
                                                            var loc = new google.maps.LatLng(parseFloat(lats[i]), parseFloat(lngs[i]));
        
                                                            var marker = new google.maps.Marker({
                                                                position: loc,
                                                                map: Cigna.DrList.map,
                                                                title: String(clinicList[i].name)
                                                            });
        
                                                            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                                                                return function() {
        
                                                                    $('.list-content').removeClass('cigna-bg-orange-light');
                                                                    $('#clinic-' + clinicList[i].id + ' .list-content').addClass('cigna-bg-orange-light');
        
        
                                                                    if( $(window).width() < 768){
                                                                        $('body').animate({
                                                                            scrollTop: $('#clinic-' + clinicList[i].id + ' .list-content').offset().top - $('#ListView').offset().top - 100
                                                                        }, 100);
                                                                    } else {
                                                                        $('#ListView').animate({
                                                                            scrollTop: $('#clinic-' + clinicList[i].id + ' .list-content').offset().top - $('#ListView').offset().top + $('#ListView').scrollTop()
                                                                        }, 100);
                                                                    }
        
                                                                    Cigna.DrList.infowindow.setContent('<div><strong>' + clinicList[i].name + '</strong>' + '</div>');
                                                                    Cigna.DrList.infowindow.open(Cigna.DrList.map, marker);
                                                                }
                                                            })(marker, i));
        
        
                                                            bounds.extend(loc);
                                                            Cigna.DrList.markers.push(marker);
                                                        }
        
                                                    }
        
        
                                                    //auto center
                                                    Cigna.DrList.map.fitBounds(bounds);
                                                    ///Cigna.DrList.map.panToBounds(bounds);
                                                }
                                            }
        
                                            if({!hideVCMap}){
                                                $('#map-wrapper').hide();
                                                $('#ListView').css('width','100%');
                                                if ($(window).width() < 768) {
                                                    $('#list-back').css("top", "200px");
                                                    $('#ListView').css("padding-top", "180px");
                                                    $('.header-bar').css("position", "fixed");
                                                    $('.header-bar').css("width", "100%");
                                                    $('.header-bar').css("z-index", "7");
                                                }
                                                Cigna.DrList.finishSubmission();
                                            } else {
                                                $('#map-wrapper').show();
                                                initMakers();
                                                Cigna.DrList.finishSubmission();
                                            }
        
                                        </script>
        
                                    </apex:outputPanel>
                                </apex:outputPanel>
        
                                <div id="map-wrapper" class="bs col-sm-7 col-md-7 col-xs-12 col-lg-7" style="display: none">
                                    <div id="map"></div>
                                </div>
                            </div>
                        </apex:outputPanel>
        
        
        
                        <div id="clinic-done" class="bs col-sm-12 col-md-12 col-xs-12 col-lg-12" style="{!IF(currentPanel == 'F','','display:none;')}">
                            <div class="bs row">
                                <div class="bs col-sm-12 col-lg-12 cigna-fg-green-medium" style="font-size: 3.8em;margin-bottom: 10px;text-align: center;padding: 10px 0;">
                                    <i class="fa fa-check-circle-o" aria-hidden="true"></i>
                                </div>
                            </div>
                            <div class="bs row">
                                <div class="bs col-md-4 col-xs-0  col-sm-3 col-lg-4"></div>
                                <div class="bs col-md-4 col-xs-12  col-sm-6 col-lg-4" style="text-align: center;font-size: 1em;">
                                    <p>{!$Label.Doctor_List_Booking_Done}</p>
                                </div>
                                <div class="bs col-md-4 col-xs-0  col-sm-3 col-lg-4"></div>
                            </div>
                            <div id="action-bar" class="bs visible-xs cigna-floating-bottom-panel" style="left:0px;">
                                <div id="back-btn" class="bs cigna-action-btn-group cigna-fg-white cigna-bg-orange-dark" onclick="DrListAF.backRefresh()">
                                    <a class="action-btn cigna-fg-white" role="button">
                                        <i class="ci-hk-doctor" aria-hidden="true"></i>
                                        <br/>{!$Label.Doctor_List_Back_To_List_Button}
                                    </a>
                                </div>
                            </div>
                            <div class="bs row hidden-xs" style="padding-bottom: 20px;">
                                <div class="bs col-sm-4 col-md-4 col-xs-3 col-lg-4 "></div>
                                <div id="back-btn-dt" onclick="DrListAF.backRefresh()" class="bs col-sm-4 col-md-4 onclick-pointer col-xs-6 col-lg-4 mobile-version-button cigna-fg-white cigna-bg-orange-dark desktop-action-btn">
                                        {!$Label.Doctor_List_Back_To_List_Button}
                                </div>
                                <div class="bs col-sm-4 col-md-4 col-xs-3 col-lg-4"></div>
                            </div>
                        </div>
                        <!-- Modal -->
                        <div class="modal fade" id="myModal" role="dialog" style="text-align: center;z-index: 8;">
                            <span class="bs loading-helper"></span>
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header" style="padding: 0px;border: none;">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    </div>
                                    <div id="modal-clinic-detail" class="modal-body" style="padding-top: 0px;">
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- Virtual Introduction Modal -->
                        <div id="VCIntroOverlay" style="display:none;">
                            <div id="VCIntroMessage">
                                <a href="#">
                                    <div id="VCIntroCloseOverlay" class="glyphicon glyphicon-remove" onclick="Cigna.DrList.toggleVCIntro();"></div>
                                </a>
                                <div style="padding-bottom:10px; border-top: 1px solid #f2f2f2;"></div>
                                <div id="VCIntroContent" style="text-align:left">
                                    <p>{!$Label.Doctor_List_VC_Steps}</p>
                                    <div class="bs row" id="desktop-store-div">
                                        <div class="bs col-sm-2 col-md-2 col-xs-5 col-lg-2">
                                            <a href="https://itunes.apple.com/us/app/doctornow/id1072001813?mt=8" data-applink="doctornow://">
                                                <apex:image url="{!URLFOR($Resource.appstore, 'apple.jpg')}" style="max-width: 100%;cursor: pointer;"/>
                                            </a>
                                        </div>
                                        <div class="bs col-sm-1 col-md-1 col-xs-1 col-lg-1">
                                        </div>
                                        <div class="bs col-sm-2 col-md-2 col-xs-5 col-lg-2">
                                            <a href="https://play.google.com/store/apps/details?id=com.doctornow.hk" data-applink="doctornow://deeplink">
                                                <apex:image url="{!URLFOR($Resource.appstore, 'google.jpg')}" style="max-width: 100%;cursor: pointer;"/>
                                            </a>
                                        </div>
                                    </div>
        
                                    <div class="bs row" id="mobile-store-div">
                                        <div class="bs col-sm-2 col-md-2 col-xs-5 col-lg-2">
                                            <a id="android-store" href="https://play.google.com/store/apps/details?id=com.doctornow.hk" data-applink="doctornow://deeplink">
                                                <apex:image url="{!URLFOR($Resource.appstore, 'google.jpg')}" style="max-width: 100%;cursor: pointer;"/>
                                            </a>
                                            <a id="ios-store" href="https://itunes.apple.com/us/app/doctornow/id1072001813?mt=8" data-applink="doctornow://">
                                                <apex:image url="{!URLFOR($Resource.appstore, 'apple.jpg')}" style="max-width: 100%;cursor: pointer;"/>
                                            </a>
                                        </div>
                                    </div>
        
                                    <p style="padding-top: 20px;">{!$Label.Doctor_List_VC_Intro_Video_Label} <a href="{!$Label.Doctor_List_VC_Intro_Video}" target="_blank">   {!$Label.Doctor_List_Step_Click_Here}</a></p>
        
                                    <apex:repeat value="{!stepNos}" var="step">
                                        <p style="padding-top: 20px;">{!$Label['Doctor_List_Step_'+TEXT(step)]}</p>
        
                                        <div class="bs row">
                                            <div class="bs visible-xs col-xs-12">
                                                <apex:image url="{!URLFOR(If(lang == 'zh',$Resource.VCIntroScreenCapCh,$Resource.VCIntroScreenCapEn), TEXT(step)+'.png')}" style="max-width: 100%;"/>
                                            </div>
                                        </div>
        
                                        <div class="bs row">
                                            <div class="bs hidden-xs col-lg-12">
                                                <apex:image url="{!URLFOR(If(lang == 'zh',$Resource.VCIntroScreenCapCh,$Resource.VCIntroScreenCapEn), TEXT(step)+'.png')}" style="width: 300px;"/>
                                            </div>
                                        </div>
                                    </apex:repeat>
        
                                </div>
                            </div>
        
                        </div>
                    </apex:outputPanel>
                </apex:outputPanel>
            </div>
        </div>
    </apex:form>
</apex:page>