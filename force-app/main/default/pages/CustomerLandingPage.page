<!-- Page: page -->
<apex:page controller="CustomerLandingPageCtrl" docType="html-5.0" title="{!$Label.Cigna_Customer_Portal_Home}" showHeader="false" sidebar="false" applyBodyTag="false" standardStylesheets="false">
    <head>
        <title>{!$Label.Cigna_Customer_Portal_Home}</title>

        <!-- 20210723 - minghua - SMT-83 109297 - Top Page Margin on IOS, add viewport-fit-->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width,viewport-fit=cover"/>

        <style>
            body { overflow: hidden; }
            .bs .cigna-message-bar {
                position: absolute;
                left: 0;
                top: 51px;
                width: 100%;
                padding: 5px;
                color: #fff;
            }

            body,html {
                overflow-y: hidden;
            }

            .bs .cigna-message-panel {
                width: 100%;
                background-color: rgba(240, 240, 240, 0.9);
                position: absolute;
                left: 0;
                padding: 10px 5px 10px 5px;
                z-index: 9;
                overflow-y: auto;
                max-height: 90%;
            }

            .bs .cigna-message-panel-msg {
                line-height: 1.5;
                margin-right: 0 !important;
                margin-left: 0px !important;
                margin-bottom: 20px;
            }

            /**
            .cigna-message-panel-msg div i {
                cursor: pointer;
                cursor: hand;
            }
            */

            .cigna-message-panel-msg{
                cursor: pointer;
                cursor: hand;
            }

            .fa {
                line-height: inherit !important;
            }

            .bs .cigna-message-panel .message-highlight {
                font-weight: bold;
            }

            @media (max-width: 767px) {

                /*20210723 - minghua - SMT-83 109297 - Top Page Margin on IOS*/
                html,body{
                    height: calc(100% + 10px);
                }

                /*20201030 - minghua - PendingMemo*/
                .customerLandingDiv{
                    margin-top:0px;
                }

                .bs .floating-button-container {
                    position: relative;
                }

                .bs .floating-button-panel {
                    position: fixed;
                    bottom: 0px;
                    width: 100%;
                    left: 0;
                    padding-top:10px;
                    padding-bottom: 10px; /*20210803 - minghua - SMT-99 116677 - IPhone 12 pro max UI issue*/
                    font-size: 12px;
                    text-align: center;
                }
                .bs .floating-button-panel > div {
                    padding-left: 10px !important;
                    padding-right: 10px !important;
                }
                .bs .floating-button {
                    margin-bottom: 5px;
                    font-size: 0.8em;
                    text-transform: uppercase;
                    margin-top: 5px;
                }

                .bs .carousel-wrapper {
                    margin-top:0px;
                }

                #template-templateBody{
                    position: fixed !important;
                    top: 51px;
                    right: 0px;
                    left: 0px;
                    bottom: 0px;
                }
                .bs .cigna-message-bar {
                    position: relative;
                    top: 0px;
                }
            }

            .owl-pagination {
                position: absolute;
                top: 0;
                left: 50%;
            }

            .owl-pagination .owl-page {
                position: relative;
                left: -50%;
            }

            .owl-buttons {
                position: absolute;
                top: 0;
                left: 50%;
            }
            .owl-buttons > div {
                left: -50%;
                position: relative;
            }

            .owl-theme .owl-controls .owl-page span {
                background-color: #eee;
            }

            .owl-banner-desc {
                position: absolute;
                color: #fff;
                top: 0;
                width: 100%;
                margin-top: 25px;
                text-align: center;
            }

            .owl-banner-desc > div {
                width: 70%;
                margin: 0 auto;
                padding-top: 10px;
            }
            .owl-banner-desc > div > h3 {
                font-family: "Gotham SSm A", "Gotham SSm B", "Microsoft Jhenghei", "LiHei Pro", "Heiti TC", Arial, Helvetica, sans-serif;
                font-style: normal;
                font-weight: 500;
            }

            .bs .cigna-message-bar {
                padding-top:10px;
                padding-bottom: 10px;
            }

            @media (min-width: 768px) and (max-width: 991px) {
                /*20201030 - minghua - PendingMemo*/
                .customerLandingDiv{
                    margin-top:108px;
                }

                .bs .cigna-message-bar {
                    padding-top:12px;
                    height: 84px;
                }
                .bs .carousel-wrapper {
                    margin-top:84px;
                }
            }

            @media (max-width: 767px) {
                .bs .cigna-message-bar {
                    padding-top:10px !important;
                    padding-bottom:10px !important;
                }
            }

            @media (min-width: 992px) {
                /*20201030 - minghua - PendingMemo*/
                .customerLandingDiv{
                    margin-top:51px;
                }

                .bs .carousel-wrapper {
                    margin-top:84px;
                }

                .bs .cigna-message-bar div {
                    padding: 5px;

                }

                .bs .cigna-message-bar {
                    height: 84px;
                }
            }

            .bs .owl-item img {
                -webkit-filter: brightness(0.8);
                filter: brightness(0.8);
            }

            .breakAWord {
            //word-break: break-all;
                word-wrap: break-word;
            }

            /* PI-114 20230731, commented by Owen to remove chubb 1*/
            /* ChubbNewFlow_Link_20220512 */
            /*Chubb Login flow: user type =3, click X to login 2022-06-18 Zane*/
            /*20221205 - minghua - JOBR-280, only popup message*/
            /*#chubbLogout, #chubbCloseButton{
                position: absolute;
                top: 6px;
                right: 6px;
                font-size: large;
                font-weight: 500;
                text-decoration: none;
                padding: 1px 4px;
            }

            #loginPageOverlay{
                display: none;
                z-index: 1200;
                background: #D9D9D6;
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0px;
                left: 0px;
                text-align: center;
            }
            @media (max-width: 767px) {
                div#loginPagePop {
                    display: none;
                    position: absolute;
                    z-index: 1211;
                    margin: 100px auto 0px auto; 
                    width: 80%;
                    max-height: 70%;
                    overflow-y: auto;
                    background: #ffff;
                    color: #000;
                    left: 5%;
                    padding: 20px;
                    border-radius: 5px;
                }
            }
            @media (min-width: 768px) {
                div#loginPagePop {
                    display: none;
                    position: absolute;
                    z-index: 1211;
                    margin: 124px auto;
                    width: 40%;
                    max-height: 70%;
                    overflow-y: auto;
                    background: #ffff;
                    color: #000;
                    left: 30%;
                    padding: 20px;
                    border-radius: 5px;
                }
            }*/
        </style>
        <!-- CR-58 performance tuning: defer the no critical resoruce 2022-03-01 Zane -->
        <!-- CR-56_Link_20220214 -->
        <link rel="preload" href="{!URLFOR($Resource.DD_Demo, 'js/jquery-3.6.0.min.js')}" as="script" />
        <link rel="preload" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.carousel_new.min.js')}" as="script" />
        <link rel="preload" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.carousel.css')}" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
        <link rel="preload" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.theme.css')}" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
        <link rel="preload" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.transitions.css')}" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
        <link rel="preload" href="{!$Resource.Cigna_Horizontal_Logo}" as="image"/>
        <noscript>
            <link rel="stylesheet"  type="text/css" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.carousel.css')}"/>
            <link rel="stylesheet"  type="text/css" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.theme.css')}"/>
            <link rel="stylesheet"  type="text/css" href="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.transitions.css')}"/>
        </noscript>
        <!-- CR-58 End -->
        <!-- <script src="/soap/ajax/30.0/connection.js" type="text/javascript"></script> -->
         <!-- CR-56_Link_20220214, commented by minghua, the jquery exist in CignaUtilJS -->
        <!-- <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/jquery-3.6.0.min.js')}"/>
        <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/jquery-migrate-3.3.2.js')}"/> -->
        <!-- CR-56_Link_20220214, commented by minghua, CignaUtilJS exist in CustomerPageTemplate -->
        <!-- <apex:include pageName="CignaUtilJS"/> -->

    </head>
    <body>
    <!-- Google Tag Manager (noscript) -->
    <!-- Tovid SMT51 -commented>
    <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PGJ23KN"
                      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    <!-- End Google Tag Manager (noscript) -->
    <!-- Start of the page template -->
    <!-- ChubbNewFlow_Link_20220512 -->
    <!-- 20221205 - minghua - JOBR-280, only popup message -->
    <!-- <apex:outputPanel id="chubbForm">
        <div id="loginPageOverlay" style="display:none;">
            <div id="loginPagePop" class="bs"> -->
                <!-- Chubb Login flow: user type =3, click X to login 2022-06-18 Zane -->
                <!-- <button type="button" id="chubbLogout" class="btn btn-default btn-sm" onclick="logout();" style="display:none;">X</button> -->
                <!-- <apex:outputPanel rendered="{!userType=='1'}" layout="block" style="text-align: left;"> -->
                <!-- <div id="ChubbPageOne" layout="block" style="text-align: left;display: none;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <p>{!$Label.Chubb_AsPerOurRecord}</p><br/>
                            <p>{!$Label.Chubb_InOrderToLoginToChubbPortal}</p><br/>
                        </div><br/>
                        <div style="text-align:center;text-decoration:underline;">
                            <a id="chubbUrlRestPassword" class="bs" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_blank" onclick="chubbDisplayLogout()">{!$Label.Chubb_ClickHereToCreateAPassword}</a>
                        </div>
                    </div>
                </div> -->
                <!-- </apex:outputPanel> -->
                <!-- <apex:outputPanel rendered="{!userType=='2'}" layout="block" style="text-align: left;"> -->
                <!-- <div id="ChubbPageTwo" layout="block" style="text-align: left;display:none;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <p>{!$Label.Chubb_YourPolicyIsServicedByCignaNow}</p><br/>
                        </div><br/>
                        <div style="text-align:center;text-decoration:underline;">
                            <a id="chubbUrlLogin" class="bs" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_blank" onclick="chubbDisplayLogout()">{!$Label.Chubb_PleaseTakeMeToChubbPortal}</a>
                        </div>
                    </div>
                </div> -->
                <!-- <apex:outputPanel rendered="{!userType=='3'}" layout="block" style="text-align: left;"> -->
                <!-- Chubb Login flow: user type =3, click X to login 2022-06-18 Zane -->
                <!-- <div id="ChubbPageThree" layout="block" style="text-align: left;display:none;">
                    <button type="button" id="chubbCloseButton" class="btn btn-default btn-sm" onclick="toggleLoginPageOverlay();">X</button>
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <p>{!$Label.Chubb_AsPerOurRecordSomeOfYou}</p><br/>
                            <p>{!$Label.Chubb_ToViewThosePoliciesTransferred}</p><br/>
                        </div><br/>
                        <div style="text-align:center;text-decoration:underline;">
                            <a id="chubbUrlRegistration" class="bs" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_blank">{!$Label.Chubb_ClickHereToRegisterNow}</a>
                        </div>
                    </div>
                </div> -->
                <!-- <apex:outputPanel layout="block" style="text-align: left;display:none;"> -->
                <!-- <div id="ChubbPageFour" layout="block" style="text-align: left;display:none;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;">
                        <div>
                            <h4>{!$Label.Chubb_ChooesThePortalYouWantLogin}</h4><br/><br/>
                        </div><br/>
                            <div>
                                <a class="bs btn btn-primary btn-block" style="cursor:pointer" onclick="toggleLoginPageOverlay();">{!$Label.Chubb_BackToMyCigna}</a>
                            </div>
                            <br />
                            <div>
                                <a class="bs btn btn-primary btn-block" style="cursor:pointer" href="{!chubbUrl}" target="_blank" onclick="chubbDisplayLogout()">{!$Label.Chubb_PleaseTakeMeToChubbPortal}</a>
                            </div>
                    </div>
                </div> -->
                <!-- </apex:outputPanel> -->
                <!-- <apex:outputPanel rendered="{!chubbUserType=='5'}" layout="block" style="text-align: left;"> -->
                <!-- <div id="ChubbPageFive" layout="block" style="text-align: left;display:none;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;">
                        <div>
                            <apex:outputText value="{!$Label.Chubb_Register_AsPerOurRecord}" escape="false"/>
                            <a id="chubbUrlRegChubb" style="cursor:pointer;color: black !important;text-decoration:underline;" href="{!chubbUrl}" target="_blank" onclick="chubbDisplayLogout()">{!$Label.Chubb_Register_ChubbPortal}</a>
                            <apex:outputText value="{!$Label.Chubb_Register_CreateAcc}" escape="false"/><br/>
                        </div><br/>
                    </div>
                </div> -->
                <!-- </apex:outputPanel> -->
                <!-- <apex:outputPanel rendered="{!chubbUserType=='6'}" layout="block" style="text-align: left;"> -->
                <!-- <div id="ChubbPageSix" layout="block" style="text-align: left;display:none;">   
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <apex:outputText value="{!$Label.Chubb_AsPerOurRecord}" escape="false"/><br/>
                            <apex:outputText value="{!$Label.Chubb_InOrderToLoginToChubbPortal}" escape="false"/><br/>
                        </div><br/>
                        <div>
                            <a id="chubbUrlCreatePassword" class="bs btn btn-primary btn-block" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_blank" onclick="chubbDisplayLogout()">{!$Label.Chubb_ClickHereToCreateAPassword}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </apex:outputPanel> -->
    <apex:composition template="CustomerPageTemplate">

        <!-- Start of the main body -->
        <apex:define name="body">
            <!--
            <div class="page-header">
                <h3>Coming Soon.</h3>
            </div>
            -->
            <!--<apex:actionStatus id="loader-icon">
                <!--<apex:facet name="start">
                    <div class="bs col-xs-12 col-lg-12 loading-div" style="padding: 0px;">
                        <span class="loading-helper"></span>
                        <i class="spinner-icon fa fa-spinner fa-pulse fa-3x fa-fw"></i>
                        <span class="sr-only">Loading...</span>
                    </div>
                </apex:facet>
            </apex:actionStatus> -->
            <apex:form id="customerLandingForm">
                <!-- <apex:outputPanel id="memoPanel"> -->
                <!-- 20201030 - minghua - PendingMemo delete-->
                <!--<div class="bs carousel-wrapper"> class="bs container-fluid"  -->
                <!-- <apex:outputPanel id="memoPanel"> -->
                <div class="customerLandingDiv">
                    <!--SMT-91_Tovid_20210727 -start-->
                    <apex:actionFunction action="{!myvirtualHealthPage}" name="myvirtualHealthPage"/>
                    <!--SMT-91_Tovid_20210727 -end-->
                    <apex:outputPanel id="CarouselBanners" layout="block"> <!-- class="bs row" will introduce scrollable blank to pending memo area -->

                        <div id="promotion-carousel-mobile" class="bs promotion-carousel" style="width: 100%;overflow-y: hidden;">
                            <div id="owl-promotion-mobile" class="owl-carousel owl-theme" style="max-height: 100%;">
                                <apex:repeat value="{!BannerList}" var="bannerWrapper">
                                    <div class="item">
                                         <span class='spclick' data-isproduct="{!bannerWrapper.bannerInfo.is_product_page__c}" data-isexternal="{!bannerWrapper.bannerInfo.Is_External_Page__c}" data-url="{!bannerWrapper.redirectURL}" data-product="{!bannerWrapper.ProductCode}"
                                               onclick="bannerRedirect({!bannerWrapper.bannerInfo.Enable_Background_Click__c},this)"  style="{!if(bannerWrapper.bannerInfo.Enable_Background_Click__c,'cursor:pointer','')}">
                                            <img class="lazyOwl img-responsive visible-xs visible-sm " style="width: 100%; max-height:100%;" data-src="{!$Site.Prefix}/servlet/servlet.FileDownload?file={!bannerWrapper.mobileBannerId}" />
                                            <!-- CR-58 performance tuning: download desktop version by media 2022-03-01 Zane -->
                                            <!-- <apex:image styleClass="visible-md visible-lg" value="" width="100%" html-srcset="{!$Resource.Cigna_Horizontal_Logo} 100w, {!$Site.Prefix}/servlet/servlet.FileDownload?file={!bannerWrapper.desktopBannerId} 992w" html-sizes="(max-width:991px) 90px, (min-width:992px) 992px, 90px" /> -->
                                            <picture>
                                                <source media="(min-width: 992px)" srcset="{!$Site.Prefix}/servlet/servlet.FileDownload?file={!bannerWrapper.desktopBannerId}" />
                                                <img class="visible-md visible-lg" src="{!$Resource.Cigna_Horizontal_Logo}" width="100%" />
                                            </picture>
                                            <!-- CR-58 End -->
                                         </span>
                                        <div class="bs owl-banner-desc">
                                            <div><h3>{!bannerWrapper.bannerName}</h3></div>
                                            <div>{!bannerWrapper.bannerDescription} <br/></div>
                                            <div>
                                                <apex:outputPanel layout="block" rendered="{!bannerWrapper.bannerInfo.Display_Learn_More_Button__c}">
                                                    <button data-isproduct="{!bannerWrapper.bannerInfo.is_product_page__c}" data-isexternal="{!bannerWrapper.bannerInfo.Is_External_Page__c}" data-url="{!bannerWrapper.redirectURL}" data-product="{!bannerWrapper.ProductCode}" class="bs btn cigna-fg-white cigna-bg-green-medium learn-more-btn-new" onclick="bannerRedirect(true,this);">{!$Label.Learn_More}</button>
                                                </apex:outputPanel>
                                            </div>
                                        </div>
                                    </div>
                                </apex:repeat>

                                <!--      <apex:repeat value="{!productList}" var="product">-->
                                <!--IBM JING PORTABLE CR 0420 START-->
                                <apex:outputPanel rendered="{!(PBTWrap!=null && isTopUpElig)}" styleClass="item"  id="CarouselBanner1"  >
                                    <img class="lazyOwl img-responsive visible-xs visible-sm " style="width: 100%; max-height:100%;" data-src="{!$Site.Prefix}/servlet/servlet.FileDownload?file={!PBTWrap.mobileBannerId}" />
                                    <!-- CR-58 performance tuning: not download desktop image 2022-03-01 Zane -->
                                    <picture>
                                        <source media="(min-width: 992px)" srcset="{!$Site.Prefix}/servlet/servlet.FileDownload?file={!PBTWrap.desktopBannerId}" />
                                        <img class="visible-md visible-lg" src="{!$Resource.Cigna_Horizontal_Logo}" width="100%" />
                                    </picture>
                                    <!-- CR-58 End -->
                                    <div class="bs owl-banner-desc">
                                        <div><h3>{!PBTWrap.product.Name__c}</h3></div>
                                        <div>{!PBTWrap.product.Short_Description__c}</div>
                                        <div><button data-product="{!PBTWrap.product.Product_Code__c}" class="bs btn cigna-fg-white cigna-bg-green-medium learn-more-btn">{!$Label.Learn_More}</button></div>
                                    </div>
                                </apex:outputPanel>

                                <apex:outputPanel rendered="{!(PBCWrap!=null && isCoversionElig)}" styleClass="item"  id="CarouselBanner2"  >
                                    <img class="lazyOwl img-responsive visible-xs visible-sm " style="width: 100%; max-height:100%;" data-src="{!$Site.Prefix}/servlet/servlet.FileDownload?file={!PBCWrap.mobileBannerId}" />
                                    <!-- CR-58 performance tuning: not download desktop image 2022-03-01 Zane -->
                                    <picture>
                                        <source media="(min-width: 992px)" srcset="{!$Site.Prefix}/servlet/servlet.FileDownload?file={!PBCWrap.desktopBannerId}" />
                                        <img class="visible-md visible-lg" src="{!$Resource.Cigna_Horizontal_Logo}" width="100%" />
                                    </picture>
                                    <!-- CR-58 End -->
                                    <div class="bs owl-banner-desc">
                                        <div><h3>{!PBCWrap.product.Name__c}</h3></div>
                                        <div>{!PBCWrap.product.Short_Description__c}</div>
                                        <div><button data-product="{!PBCWrap.product.Product_Code__c}" class="bs btn cigna-fg-white cigna-bg-green-medium learn-more-btn">{!$Label.Learn_More}</button></div>
                                    </div>
                                    <input type="hidden" id='hid' value="{!isTopUpElig}" />
                                </apex:outputPanel>
                                <!--IBM JING PORTABLE CR 0420 END-->
                                <!--  </apex:repeat>-->
                            </div>
                        </div>
                        <apex:outputPanel id="test" >
                            <input type="hidden" id='hid' value="{!(PBTWrap!=null && isTopUpElig)}" />
                        </apex:outputPanel>
                        <apex:actionFunction name="initPortableMedicalPlan" action="{!initPortableMedicalPlan}" rerender="CarouselBanner2,CarouselBanner1,test,CarouselBanners" oncomplete="MGMBannerInit();"  />
                        <!-- //CR-56_Link_20220214 -->
                        <apex:actionFunction name="MGMBannerInit" action="{!MGMBannerInit}" rerender="CarouselBanner2,CarouselBanner1,test,CarouselBanners" oncomplete="Cigna.Home.initDisplay(); $('.learn-more-btn').on('click',Cigna.Home.goToGetProtected);console.log('ready111')"  />

                        <!--Nicole_CM Super Login_20201229-->
                        <apex:actionFunction name="resetPendingMemoCM" action="{!resetPendingMemoCM}" oncomplete="checkPendMemoWSComplete();" />
                    </apex:outputPanel>

                    <div class="bs row visible-xs">
                        <div class="bs row floating-button-container" id='isDisplay-panel'>
                            <div class="bs floating-button-panel cigna-fg-white cigna-bg-blue-dark">
                                <div id="isDisplay_Normol">
                                    <div class="bs col-lg-2 col-sm-2 col-xs-4" onclick="Cigna.Util.navigateToVFP('MyClaimVFP')">
                                        <i class="ci-hk-clip-offcial ci-hk-lg"></i>
                                        <div class="bs floating-button">
                                                {!$Label.NavBar_My_Claim}
                                        </div>
                                    </div>
                                    <div class="bs col-lg-2 col-sm-2 col-xs-4">
                                        <i class="ci-hk-notes ci-hk-lg" onclick="Cigna.Util.navigateToVFP('MyPolicyVFP')"></i>
                                        <div class="bs floating-button" >
                                                {!$Label.NavBar_My_Policy}
                                        </div>
                                    </div>
                                    <div class="bs col-lg-2 col-sm-2 col-xs-4" onclick="Cigna.Util.navigateToVFP('GetProtectedVFP')">
                                        <i class="ci-hk-beach-umbrella ci-hk-lg"></i>
                                        <div class="bs floating-button">
                                                {!$Label.NavBar_Get_A_Quote}
                                        </div>
                                    </div>
                                </div>
                                <!--junda add 20201008-->
                                <div class="bs col-lg-2 col-sm-2 col-xs-12" id="isDisplay_My_Health" style="text-align: center;" onclick="Cigna.Util.navigateToVFP('MyVirtualHealthVFP')">
                                    <i class="ci-hk-ekg ci-hk-lg"></i>
                                    <div class="bs floating-button" >
                                            <!--STM 78 NavBar_My_Health_Start>
                                            {!$Label.NavBar_My_Health}
                                            -->
                                            {!$Label.NavBar_My_Health_Start}
                                    </div>
                                </div>
                                <div class="bs col-lg-2 col-sm-2 col-xs-6" id="isDisplay_Prescription" style="display: none;" onclick="Cigna.Util.navigateToVFP('PrescriptionVFP')">
                                    <i class="ci-hk-clipboard ci-hk-lg" ></i>
                                    <div class="bs floating-button" >
                                            {!$Label.NavBar_Prescription}
                                    </div>
                                </div>
                                <script>
                                    if({!isVirtualHealthShow}){
                                        $('#isDisplay_Normol').attr('style','display:none');
                                        if({!isVirtualTD}){
                                            $('#isDisplay-panel').attr('style','display:none');
                                        }
                                    }else{
                                        $('#isDisplay_My_Health').attr('style','display:none');
                                    }
                                    //if(Cigna.Util.isMobile()){
                                    //    var ua = navigator.userAgent.toLowerCase();
                                    //    if(Cigna.Util.isIOS()){                          
                                    //        if (ua.indexOf('safari') >0 || ua.indexOf('chrome') >0) {
                                    //            $('#isDisplay_My_Health').attr('data-applink','cignacustomerportal://app');
                                    //            $('#isDisplay_My_Health').attr('onclick','window.location.href=\'https://itunes.apple.com/hk/app/mycigna-hk/id1202342855\'');
                                    //        }else{
                                                //$('#isDisplay_My_Health').attr('onclick','getToken()');
                                                //Tovid smt 47
                                    //            $('#isDisplay_My_Health').attr('onclick','Cigna.Util.navigateToVFP(\'MyVirtualHealthVFP\')');
                                    //        }
                                    //    }else if(Cigna.Util.isAndroid()){
                                    //        var hasVersion = /Version\/[.0.9]*/i.test(ua);
                                    //        if(hasVersion){
                                                //$('#isDisplay_My_Health').attr('onclick','getToken()');
                                                //Tovid smt 47
                                    //            $('#isDisplay_My_Health').attr('onclick','Cigna.Util.navigateToVFP(\'MyVirtualHealthVFP\')');
                                    //        }else{
                                    //            $('#isDisplay_My_Health').attr('data-applink','cignacustomerportal://app');
                                    //            $('#isDisplay_My_Health').attr('onclick','window.location.href=\'https://play.google.com/store/apps/details?id=com.salesforce.chatter\'')
                                    //        }
                                    //    }else{
                                    //        $('#isDisplay_My_Health').attr('onclick','Cigna.Util.navigateToVFP(\'MyVirtualHealthVFP\')');
                                            
                                    //    }
                                    //}else{
                                    //    $('#isDisplay_My_Health').attr('onclick','Cigna.Util.navigateToVFP(\'MyVirtualHealthVFP\')');
                                    //}
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- </apex:outputPanel> -->
            </apex:form>
        </apex:define>

        <!-- End of the main body -->
    </apex:composition>
    <!-- End of the page template -->
    <!-- CR-56_Link_20220214,update by minghua, update script owl.carousel.min.js -->
    <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'owl.carousel/owl.carousel_new.min.js')}"/>
    <script type="text/javascript">
        // 20210723 - minghua - SMT-83 109297 - Top Page Margin on IOS
        if(Cigna.Util.checkWebView()){
            if(Cigna.Util.isIOS() && Cigna.Util.isMobile()){
                document.getElementsByClassName("customerLandingDiv")[0].style.margin="30px 0px 0px 0px";
            }
        }
        var Cigna = Cigna || {};
        Cigna.Home = function(){
            function togglePanel(e){
                console.log('in toggle handler');
                var panel = $('#mobile-msg-panel');
                if ($(panel).is(':visible')) {
                    $(panel).hide(0, function(){
                        $('.cigna-message-bar i.ci-hk-arrow-27').addClass('ci-hk-arrow-28').removeClass('ci-hk-arrow-27');
                    });
                } else {
                    $(panel).show(0, function(){
                        $('.cigna-message-bar i.ci-hk-arrow-28').addClass('ci-hk-arrow-27').removeClass('ci-hk-arrow-28');
                    });
                }
                e.preventDefault();
                e.stopPropagation();
            }

            function initDisplay(){

                if(Cigna.Util.checkWebView()){
                    if(Cigna.Util.isIOS()){
                        $('.cigna-message-bar').css("margin-top","20px");
                        if($('.cigna-message-bar').css('padding-top') == '14.5px'){
                            $('.cigna-message-bar').css("padding-top","16px");
                        }else{
                            $('.cigna-message-bar').css("padding-top","12px");
                        }
                        $('.cigna-message-bar').css("padding-bottom","10px");
                    }else{
                        $('.cigna-message-bar').css("margin-top","0");
                        $('.cigna-message-bar').css("padding-top","10px").css("padding-bottom","10px");
                    }
                }

                console.log('adding event listener to message bar click');
                //CR-56_Link_20220214
                $('.cigna-message-bar').on("click",Cigna.Home.togglePanel);
                //$('#mobile-msg-panel').show();
                $('.cigna-message-bar i.ci-hk-arrow-27').addClass('ci-hk-arrow-28').removeClass('ci-hk-arrow-27');

                $("#owl-promotion-mobile").owlCarousel({
                    slideSpeed : 300,
                    hpaginationSpeed : 300,
                    singleItem: true,
                    itemsTabletSmall: false,
                    navigation : true,
                    lazyLoad : true,
                    itemsScaleUp: true,
                    responsive: true,
                    autoPlay: false,
                    pagination: false,
                    navigationText: [
                        '<i class="ci-hk-arrow-29" aria-hidden="true"></i>',
                        '<i class="ci-hk-arrow-31" aria-hidden="true"></i>'
                    ]
                });
            }

            function goToGetProtected(evt){
                var product = $(this).data('product');
                Cigna.Util.navigateToVFP('GetProtectedVFP?pc='+product);
                sessionStorage.setItem('get-protected-back-url',window.location.href);
                evt.preventDefault();
            }

            return {
                togglePanel : togglePanel,
                initDisplay : initDisplay,
                goToGetProtected: goToGetProtected
            }
        }();

        // ChubbNewFlow_Link_20220512
        // minghua - 20220516 - Registration flow for Chubb
        // 20221205 - minghua - JOBR-280, only popup message
        // function toggleLoginPageOverlay(){
        //     console.log('toggleLoginPageOverlay');
        //     var overlay = document.getElementById('loginPageOverlay');
        //     var specialBox = document.getElementById('loginPagePop');
        //     overlay.style.opacity = 1;
        //     console.log('overlay.style.display='+overlay.style.display);
        //     if (overlay.style.display == "block") {
        //         console.log('toggleLoginPageOverlay block');
        //         overlay.style.display = "none";
        //         specialBox.style.display = "none";
        //         localStorage.setItem('chubbUserType','0');
        //         localStorage.setItem('chubbParameter','');
        //     } else {
        //         console.log('toggleLoginPageOverlay none');
        //         overlay.style.display = "block";
        //         specialBox.style.display = "block";
        //     }
        // }
        // function logout() {
        //     sessionStorage.setItem("isClosed",false);
        //     localStorage.setItem('login', false);
        //     if (checkWebView()) {
        //         window.location = "https://localhost/logout.html";
        //     } else {
        //         location.href = "{!$Label.Logout_URL}";
        //     }
        //     localStorage.setItem('chubbUserType','0');
        //     localStorage.setItem('chubbParameter','');
        //     localStorage.setItem('chubbRegUser','0');
        //     localStorage.setItem('chubbRegParameter','');
        // }
        // function chubbDisplayLogout(){
        //     $('#chubbLogout').show();
        // }
        /*
        function equiNavMenu(){
            alert('323');
            alert('pic=='+$('#promotion-carousel-mobile').width());
            alert('bar=='+$('#cigna-message-bar').width());
            $('#promotion-carousel-mobile').css("width",$('#cigna-message-bar').width());
            divtest.style.height = divtest.offsetHeight
        }

        $(window).resize(function(){
            //equiNavMenu();
        });
        */

        $(document).ready(function(){
            // ChubbNewFlow_Link_20220512
            // minghua - 20220516 - Registration flow for Chubb
            // 20221205 - minghua - JOBR-280, only popup message
            // var chubbUserType=localStorage.getItem('chubbUserType');
            // var chubbParameter=localStorage.getItem('chubbParameter');
            // if (chubbUserType!=undefined&&(chubbUserType!='0'&&chubbUserType!='4' &&chubbUserType!='3')&&Cigna.Util.checkWebView()) {
            //     // is mobile and userType equal 1,2,3,5,6 will display message, not run else logic
            //     if (chubbParameter!=undefined&&chubbParameter!=null&&chubbParameter!='') {
            //         if (chubbUserType=='1') {
            //             $('#ChubbPageOne').show();
            //         }else if(chubbUserType=='2') {
            //             $('#ChubbPageTwo').show();
            //         }else if(chubbUserType=='5') {
            //             $('#ChubbPageFive').show();
            //         }else if(chubbUserType=='6') {
            //             $('#ChubbPageSix').show();
            //         }
            //         $('a[id^="chubbUrl"]').each(function(idx, elem){
            //             $(elem).attr('href',$(elem).attr('href')+chubbParameter)
            //         });
            //     }
                
            //     console.log('mobile test');
            //     toggleLoginPageOverlay();
            // }else{
                //Nicole_CM Super Login_20201229
                resetPendingMemoCM();
                //CR-55 Removed by David
                //initPortableMedicalPlan();
                //MGMEntryControl();
                Cigna.Home.initDisplay();
                // 20201030 - minghua - PendingMemo
                // loadPendingMemoMsg();
                //CR-56_Link_20220214
                $('.learn-more-btn').on("click",Cigna.Home.goToGetProtected);

                document.ontouchmove = function(event){
                    event.preventDefault();
                } 
                // sforce.connection.sessionId = "{!$Api.Session_ID}";

                //SMT-91_Tovid_20210727 -start
            　　var virtualHealthPage = {!virtualHealthPage};
                console.log('virtualHealthPage:' + virtualHealthPage);
                if(virtualHealthPage==true){
                    myvirtualHealthPage();
                }
                //SMT-91_Tovid_20210727 -end
                // ChubbNewFlow_Link_20220512
                // Chubb Login flow: user type =3, click X to login 2022-06-18 Zane
                // 20221205 - minghua - JOBR-280, only popup message
                // if (chubbUserType!=undefined&&(chubbUserType=='4'|| chubbUserType=='3')&&Cigna.Util.checkWebView()) {
                //     // is mobile and userType equal 4, will display message, run else logic
                //     console.log('mobile test');
                //     if(chubbUserType=='4'){

                //         $('div[id="ChubbPageFour"]').show();
                //     }else if(chubbUserType=='3'){

                //         $('div[id="ChubbPageThree"]').show();
                //         if(chubbParameter){
                //             let chubbRegiButton = document.querySelector("a[id='chubbUrlRegistration']");
                //             chubbRegiButton.href = chubbRegiButton.href + chubbParameter;
                //         }
                //     }
                //     toggleLoginPageOverlay();
                // }
            // }
        });

        var referralEligible = {!referralEligible};
        sessionStorage.setItem('mgmEligible',referralEligible);

        function MGMEntryControl(){
            if (referralEligible){
                $(".MGMEntry").show();
            }else{
                $(".MGMEntry").hide();
            }
        }

        function bannerRedirect(enabled,obj,evnet ){
            event.preventDefault();
            if (enabled){
                var isproduct = $(obj).data('isproduct');
                var product = $(obj).data('product');
                var url = $(obj).data('url');
                var isExternal = $(obj).data('isexternal');
                sessionStorage.setItem('get-protected-back-url',window.location.href);
                if (isproduct == true){
                    Cigna.Util.navigateToVFP('GetProtectedVFP?pc='+product);
                }else{
                    if (url!=""){
                        if (isExternal==true){
                            window.open(url, '_blank');
                        }else{
                            Cigna.Util.navigateToVFP(url);
                        }
                    }
                }
                //event.preventDefault();
            }
        }
    </script>
    </body>
</apex:page>