<!--Please change apex page id and Portal Template Page-->
<apex:page docType="html-5.0" id="CustomerPortalTemplatePage" sidebar="false" showHeader="false" title="{!$Label.Login_Title}" applyBodyTag="false" applyHtmlTag="false" controller="SiteLoginController" language="{!JSINHTMLENCODE($CurrentPage.Parameters.lang)}" action="{!checkLoggedIn}" cache="false"> 

    <head>
        <title>{!$Label.Login_Title}</title>
        <meta content="{!$Label.Login_Description}" name="description"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
        <link rel="alternate" href="https://www.mycigna.com.hk/?lang=zh" hreflang="zh"/>
        <link rel="alternate" href="https://www.mycigna.com.hk/?lang=en" hreflang="en"/>
        <link rel="alternate" href="https://www.mycigna.com.hk" hreflang="x-default"/>

        <!-- CR-56_Link_20220214 -->
        <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/jquery-3.6.0.min.js')}"/>
        <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/jquery-migrate-3.3.2.js')}"/>
       <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/bootstrap3.4.1.min.js')}"/>
       
        <!-- ChubbNewFlow_Link_20220512 -->
        <apex:include pageName="applinkJS"/>
        <apex:include pageName="CignaUtilJS"/>
        
        <style>
            span[id$="cigna-error"] span div.message {
                border: none;
                //background-color: #cc0000;
                background-color: #fff;
                //background-color: transparent;
                opacity: .9;
            }
            
            span[id$="cigna-error"] span div.message table.messageTable tbody tr td img{
                display: none;
            }
            
            span[id$="cigna-error"] span div.message table.messageTable tbody tr td.messageCell div span{
                display: none;
            }
            
            span[id$="cigna-error"] span div.message table.messageTable tbody tr td.messageCell{
                //color: #fff;
                //color: #F68621;
                color:red;
                font-family: "Gotham SSm A", "Gotham SSm B";
            }
            
            span[id$="cigna-error"] .messageText::before{
                content: "\f071\20";
                font: normal normal normal 14px/1 FontAwesome;
                font-size: inherit;
                text-rendering: auto;
                -webkit-font-smoothing: antialiased;
                padding-right: 7px;
            }
            /*CR-56_Link_20220214*/
            .ui-tooltip {
                background: black !important;
                max-width: 250px !important;
                width: 250px; 
                min-width: 100px;
                color: white !important;
                z-index: 1070;
                display: block;
                text-align: center !important;
                font-size: 12px !important;
                border-radius: 5px !important;
            }

            /* Rancho_Neat_20221129 - PS3 - css for health combo campaign pop-up consent page */
            div#overlay {
                display: none;
                z-index: 10;
                background: #D9D9D6;
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0px;
                left: 0px;
                text-align: center;
            }
            div#specialBox {
                display: none;
                position: absolute;
                z-index: 11;
                margin: 150px auto 0px auto;
                width: 80%;
                height: 50%;
                background: #FFF;
                color: #000;
                left: 10%;
                padding:20px;
                border-radius:5px;                             
            }
            #closeOverlay {
                position: absolute;
                top: 10px;
                right: 10px;
            }
            
            #tccontent {
                padding:10px;
                color:#000;
                font-size:12px;
                width: 100%;
                height: 95%;
                overflow-y:auto;
            }

            /* PI-114 20230731, commented by Owen to remove chubb */
            /* ChubbNewFlow_Link_20220512 */
            /*  20221205 - minghua - JOBR-280, only popup message*/
            /*div#loginPageOverlay {
                display: none;
                z-index: 10;
                background: #D9D9D6;
                position: fixed;
                width: 100%;
                height: 100%;
                top: 0px;
                left: 0px;
                text-align: center;
            }*/
            /*Chubb Login flow: user type =3, click X to login 2022-06-18 Zane*/
            /*20221205 - minghua - JOBR-280, only popup message*/
            /*#chubbCloseButton{
                color: #333 !important;
                background-color: #fff !important;
                border-color: #ccc !important;
                border: 1px solid !important;
                position: absolute;
                top: 6px;
                right: 6px;
                font-size: large;
                font-weight: 500;
                text-decoration: none;
                padding: 1px 4px;
            }*/

            /*@media (max-width: 767px) {
                div#loginPagePop {
                    display: none;
                    position: absolute;
                    z-index: 11;
                    margin: 100px auto 0px auto; 
                    width: 80%;
                    max-height: 70%;
                    overflow-y: auto;
                    background: #ffff;
                    color: #000;
                    left: 5%;
                    padding: 20px;
                    border-radius: 5px;
                }
            }
            @media (min-width: 768px) {
                div#loginPagePop {
                    display: none;
                    position: absolute;
                    z-index: 11;
                    margin: 124px auto;
                    width: 40%;
                    max-height: 70%;
                    overflow-y: auto;
                    background: #ffff;
                    color: #000;
                    left: 30%;
                    padding: 20px;
                    border-radius: 5px;
                }
            }*/
        </style>
        
        <apex:form >
            <apex:actionFunction name="refreshAppLogin" action="{!refreshAppLogin}"/>
            <apex:actionFunction name="loginSuccess" action="{!loginSuccess}"/>
        </apex:form>
        
        <apex:outputPanel id="jqForm">       
            <script>
                
                function checkParamExist(param){
                    return (param != "" && param != null && typeof param !== 'undefined');
                }
                
                var url = window.location.href;
        
                if (Cigna.Util.checkWebView()) {
                    setTimeout(refreshAppLogin, 480000);
                
                    var refUrl = document.referrer;
                    var liveChatUrl = '{!$Setup.Portal_Settings__c.Live_Chat_Site_URL__c}';
                    liveChatUrl = liveChatUrl.replace("/LiveChat", "");
                    
                    $("#remember-me").hide();
                    
                    var startUrlParam = '{!JSINHTMLENCODE($CurrentPage.Parameters.startURL)}';
                    var sourceParam = '{!JSINHTMLENCODE($CurrentPage.Parameters.source)}';
                    var langParam = '{!JSINHTMLENCODE($CurrentPage.Parameters.lang)}';
                    
                    if(checkParamExist(startUrlParam)){
                        
                        if(startUrlParam.indexOf('source') != -1){
                            
                            var sourceStart = startUrlParam.indexOf('source') + 7;
                            var sourceEnd = startUrlParam.indexOf('&amp\;display=touch');
                            var newSource = startUrlParam.substring(sourceStart, sourceEnd);
                            
                            if(newSource == 'null'){
                                location.href="https://localhost/logout.html";
                            }else if(checkParamExist(newSource)){
                                sourceParam = decodeURIComponent(newSource);
                            }
                            
                        }
                        
                        if(startUrlParam.indexOf('&lang=') != -1){
                            var langStart = startUrlParam.indexOf('&lang=') + 6;
                            var langEnd = langStart + 5;
                            var newLang = startUrlParam.substring(langStart, langEnd);
                            
                            if(checkParamExist(newLang)){
                                langParam = decodeURIComponent(newLang);
                            }
                        }
                    }
                    
                    if(checkParamExist(sourceParam)){
                        sessionStorage.setItem('sourceParam', sourceParam);
                    }
                    
                    if(checkParamExist(langParam)){
                        sessionStorage.setItem('langParam', langParam);
                    }
                    
                    if((url.indexOf('RemoteAccessAuthorizationPage') == -1 && !checkParamExist(sourceParam)) || url.indexOf("RemoteAccessAuthorizationPage.apexp?lang=") != -1){
                        
                        var targetUrl = "/customer/CustomerLoginVFP?startURL=" + encodeURIComponent("/customer/setup/secur/RemoteAccessAuthorizationPage.apexp?source=" + sessionStorage.getItem('sourceParam') + "&display=touch") + "&lang=" + sessionStorage.getItem('langParam');
                        //var targetUrl = "/customer/setup/secur/RemoteAccessAuthorizationPage.apexp?source=" + sessionStorage.getItem('sourceParam') + "&display=touch&lang=" + sessionStorage.getItem('langParam');
                        
                        location.replace(targetUrl);
                    }
                    
                }
                
                $(document).ready(function(){
                    // minghua - 20220516 - Registration flow for Chubb
                    // 20221205 - minghua - JOBR-280, only popup message
                    // var chubbRegUser=localStorage.getItem('chubbRegUser');
                    // var chubbRegParameter=localStorage.getItem('chubbRegParameter');
                    // // var newp='<p>p'+chubbRegUser+'</p>';
                    // // $('#chubbTest').append(newp);
                    // if (Cigna.Util.checkWebView()&&chubbRegUser!=undefined&&chubbRegUser!=null&&(chubbRegUser=='5'||chubbRegUser=='6')&&chubbRegParameter!=undefined&&chubbRegParameter!=null&&chubbRegParameter!='') {
                    //     $("input[id$='chubbRegUser']").val(chubbRegUser);
                    //     $("input[id$='chubbRegParameter']").val(chubbRegParameter);
                    //     // localStorage.setItem('chubbRegUser','0');
                    //     // localStorage.setItem('chubbRegParameter','');
                    //     chubbReglogin();
                    // }

                    //added by Connor_SMT
                    var cusKey = '{!JSINHTMLENCODE($CurrentPage.Parameters.customerKey)}';
                    if(cusKey!=''){
                        $("#back-button").show();
                    }
                    //20220121-David-timeout message
                    if(checkParamExist('{!JSINHTMLENCODE($CurrentPage.Parameters.startURL)}')){
                        if(localStorage.getItem('login') === 'true'){
                            $('#timeoutmsg').show();
                            if(checkParamExist(sourceParam) || !Cigna.Util.checkWebView()){
                                localStorage.removeItem('login');
                            }
                        }
                    }
                    // Smart App Banner for Safari
                    $("head").append("<meta name='apple-itunes-app' content='app-id=1202342855' />");
                
                   //CR-56_Link_20220214
                   $("[title]").tooltip();
                                        
                    if (Cigna.Util.checkWebView()) {
                        $("#remember-me").hide();
                        $("#app-reminder").show();
                        
                    }else{
                    
                        if(Cigna.Util.isIOS() && sessionStorage.showAppOpen !== 'false'){
                            
                            var ua = navigator.userAgent.toLowerCase();
                            
                            if (ua.indexOf('safari') != -1 && ua.indexOf('chrome') == -1 && !ua.match(/CriOS/i)) {
                                // Safari uses Smart App Banner
                            }else{
                                $('#open-app-dialog').show();
                                $('#open-ios-app-button').show();   
                            }
                                
                        }else if(Cigna.Util.isAndroid() && sessionStorage.showAppOpen !== 'false'){
                            
                            $('#open-app-dialog').show();
                            $('#open-android-app-button').show();
                            
                        }
                        // Added by Linus 2021 Feb 19
                        $("#app-reminder").show();
                    }
                    
                    //check if cookies enabled
                    if( !navigator.cookieEnabled ){
                        $("#error-msg-area").find("#msgContent").text("{!$Label.Enable_Cookies_Msg}");
                        $("#error-msg-area").show();
                        $("#login-input-area").hide();
                    }
                });

                // ChubbNewFlow_Link_20220512
                // 20221205 - minghua - JOBR-280, only popup message
                // function toggleLoginPageOverlay(){
                //     console.log('toggleLoginPageOverlay');
                //     <!-- var chubbUserType='{!chubbUserType}'; -->
                //     // 20220916 - minghua - JOBR-182 AH26110 - Complaint on potential data leakage when login MyCigna Portal
                //     console.log('chubbUserType:'+chubbUserType);
                //     console.log('loginCheck:{!loginCheck}');
                //     if (!{!loginCheck}&&!Cigna.Util.checkWebView()&&chubbUserType!=undefined&&chubbUserType!='0') {
                //         var overlay = document.getElementById('loginPageOverlay');
                //         var specialBox = document.getElementById('loginPagePop');
                //         overlay.style.opacity = .95;
                //         console.log('overlay.style.display='+overlay.style.display);
                //         if (overlay.style.display == "block") {
                //             console.log('toggleLoginPageOverlay block');
                //             overlay.style.display = "none";
                //             specialBox.style.display = "none";
                //         } else {
                //             console.log('toggleLoginPageOverlay none');
                //             overlay.style.display = "block";
                //             specialBox.style.display = "block";
                //         }
                //     }
                // }
                
                function showLoading() {
                    $('#login-input-area').fadeOut(100, function(){
                        $('#login-loading').fadeIn(100);
                    });
                }
                /* David - 20200916 - Security fix
                    function finishSubmission() {
                        if({!!hasError}){
                            if(navigator && navigator.cookieEnabled){
                                if('<apex:outputText value="{!rememberUN}"></apex:outputText>' == 'true'){
                                    setCookie();
                                } else {
                                    removeCookie();
                                }
                            }
                            $('#login-input-area').hide();
                                                    
                            //add by kit
                            sessionStorage.setItem("isClosed",false);
                            
                            loginSuccess();
                        }
                        $('#login-loading').fadeOut(100, function(){
                            $('#login-input-area').fadeIn(100);
                        });
                    }
                */
               function beforeSubmission() {
                    if(navigator && navigator.cookieEnabled){
                        //document.cookie ='SameSite=None; Secure';
                        document.cookie ='SameSite=Lax;';
                        if('<apex:outputText value="{!rememberUN}"></apex:outputText>' == 'true'){
                            setCookie();
                        } else {
                            removeCookie();
                        }
                    }
                    $('#login-input-area').hide();
                    $('#td-regis-area').hide(); // Rancho_Neat_20221129 - PS3
                    sessionStorage.setItem("isClosed",false);
                    
                    if(Cigna.Util.isAndroid()){
                        sessionStorage.setItem("reloadDone",false);//Rancho Android login error resolve 
                        console.log("set reload: "+sessionStorage.getItem("reloadDone"));
                        //alert(sessionStorage.getItem("reloadDone"));
                    }

                    //sessionStorage.setItem("needRefresh",true);//Rancho Test 20210415
                }
        
               function finishSubmission() {
                    if({!hasError}){
                        if(navigator && navigator.cookieEnabled){
                           removeCookie();
                        }                             
                        //add by kit
                        sessionStorage.removeItem("isClosed");
                        
                        //loginSuccess();

                    }
                    $('#login-loading').fadeOut(100, function(){
                        // Rancho_Neat_20221129 - PS3 - display td consent page
                        var isTD = {!tdRegistration};
                        console.log('display consent page');
                        if (isTD) {
                            $('#td-regis-area').fadeIn(100);
                        } else {
                            $('#login-input-area').fadeIn(100);
                        }
                    });
                }
                
                function setCookie() {
                    if(Cigna.Util.isCustomerPortal()){
                        document.cookie = 'cigna-customer-name=<apex:outputText value="{!JSINHTMLENCODE(username)}"></apex:outputText>;expires=2147483647000';
                    } else if(Cigna.Util.isBrokerPortal()){
                        document.cookie = 'cigna-broker-name=<apex:outputText value="{!JSINHTMLENCODE(username)}"></apex:outputText>;expires=2147483647000';
                    }
                }
                
                function removeCookie() {
                    if(Cigna.Util.isCustomerPortal()){
                        document.cookie = 'cigna-customer-name=;expires=-1';
                    } else if(Cigna.Util.isBrokerPortal()){
                        document.cookie = 'cigna-broker-name=;expires=-1';
                    }
                    
                }
                
                function getCookie() {
                    var name = '';
                    if(Cigna.Util.isCustomerPortal()){
                        name = 'cigna-customer-name';
                    } else if(Cigna.Util.isBrokerPortal()){
                        name = 'cigna-broker-name';
                    }
                    var arr,reg=new RegExp("(^| )" + name + "=([^;]*)(;|$)");
                    if(arr=document.cookie.match(reg)){
                        return unescape(arr[2]);
                    } else {
                        return '';
                    }
                }

                // Rancho_Neat_20221129 - PS3 - toggle policy box
                function toggleOverlay(){
                    var overlay = document.getElementById('overlay');
                    var specialBox = document.getElementById('specialBox');
                    overlay.style.opacity = .95;
                    if(overlay.style.display == "block"){
                        overlay.style.display = "none";
                        specialBox.style.display = "none";
                    } else {
                        overlay.style.display = "block";
                        specialBox.style.display = "block";
                    }
                }

                // Rancho_Neat_20221129 - PS3 - loading
                function showTDLoading() {
                    $('#login-input-area').fadeOut(100, function(){
                        $('#login-loading').fadeIn(100);
                    });
                }

                // Rancho_Neat_20221129 - PS3 - redirect page
                function redirectCignaPage(){
                    if ({!!hasError && isTDRegisComplt}) {
                        console.log('redirect to cigna page');
                        // no need to open thank you page - 20230401 - Rancho
                        // open cigna thank you page in a new tab if td register done
                        // var pageRef = '';
                        // var lang = '{!JSINHTMLENCODE($CurrentPage.Parameters.lang)}';
                        // if (lang == 'zh_TW') {
                        //     pageRef = '{!$Setup.Portal_Settings__c.Thank_You_Page_TC__c}';
                        // } else {
                        //     pageRef = '{!$Setup.Portal_Settings__c.Thank_You_Page_EN__c}';
                        // }
                        // window.open(pageRef);
                        
                        // login to my cigna as normal
                        loginSuccess();
                    }
                }
                
                //Chubb Login flow: user type =3, click X to login 2022-06-18 Zane
                // 20221205 - minghua - JOBR-280, only popup message
                // function clickLogin(){
                //     showLoading();
                //     beforeSubmission();
                //     toggleLoginPageOverlay();
                //     loginAction();

                // }
            </script>
        </apex:outputPanel>
    </head>
    <!-- ChubbNewFlow_Link_20220512 -->
    <!-- 20221205 - minghua - JOBR-280, only popup message -->
    <!-- <apex:outputPanel id="chubbForm">
        <div id="loginPageOverlay" style="display:none;">
            <div id="loginPagePop"> -->
                <!-- Chubb Login flow: user type =3, click X to login 2022-06-18 Zane -->
                <!-- <apex:outputPanel rendered="{!chubbUserType=='3'}">
                    <apex:form >
                        <apex:actionFunction name="loginAction" action="{!login}" rerender="preForm,thePreFormPanel,jqForm,chubbForm" oncomplete="finishSubmission();"/>
                    </apex:form>
                    <button type="button" id="chubbCloseButton" class="btn btn-default btn-lg" onclick="clickLogin();">X</button>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!chubbUserType=='1'}" layout="block" style="text-align: left;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <p>{!$Label.Chubb_InOrderToLoginToChubbPortal}</p><br/>
                        </div><br/>
                        <div style="text-align:center;text-decoration:underline;">
                            <a class="bs" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_self">{!$Label.Chubb_ClickHereToCreateAPassword}</a> -->
                            <!-- <a class="bs visible-xs-block" style="cursor:pointer;color: black !important;" href="{!chubbUrl}">{!$Label.Chubb_ClickHereToCreateAPassword}</a> -->
                        <!-- </div>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!chubbUserType=='2'}" layout="block" style="text-align: left;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <p>{!$Label.Chubb_YourPolicyIsServicedByCignaNow}</p><br/>
                        </div><br/>
                        <div style="text-align:center;text-decoration:underline;">
                            <a class="bs" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_self">{!$Label.Chubb_PleaseTakeMeToChubbPortal}</a> -->
                            <!-- <a class="bs visible-xs-block" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_blank">{!$Label.Chubb_PleaseTakeMeToChubbPortal}</a> -->
                        <!-- </div>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!chubbUserType=='3'}" layout="block" style="text-align: left;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;color:black">
                        <div>
                            <p>{!$Label.Chubb_AsPerOurRecordSomeOfYou}</p><br/>
                            <p>{!$Label.Chubb_ToViewThosePoliciesTransferred}</p><br/>
                        </div><br/>
                        <div style="text-align:center;text-decoration:underline;">
                            <a class="bs" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_self">{!$Label.Chubb_ClickHereToRegisterNow}</a> -->
                            <!-- <a class="bs visible-xs-block" style="cursor:pointer;color: black !important;" href="{!chubbUrl}" target="_blank">{!$Label.Chubb_ClickHereToRegisterNow}</a> -->
                        <!-- </div>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!chubbUserType=='4'}" layout="block" style="text-align: left;">
                    <div class="bs col-md-12 col-xs-12" style="font-size:20px;">
                        <div>
                            <h4>{!$Label.Chubb_ChooesThePortalYouWantLogin}</h4><br/><br/>
                        </div><br/>
                        <apex:form >
                            <apex:commandButton action="{!login}"  value="{!$Label.Chubb_BackToMyCigna}" onclick="showLoading();beforeSubmission();toggleLoginPageOverlay();"  rerender="preForm,thePreFormPanel,jqForm,chubbForm" oncomplete="finishSubmission();" styleClass="bs btn btn-primary btn-block" style="font-family: Arial,Helvetica,sans-serif;"/>
                            <br />
                            <div> -->
                                <!-- <a class="bs btn btn-primary btn-block visible-xs" style="cursor:pointer" href="{!chubbUrl}" target="_blank">{!$Label.Chubb_PleaseTakeMeToChubbPortal}</a> -->
                                <!-- <a class="bs btn btn-primary btn-block" style="cursor:pointer" href="{!chubbUrl}" target="_self">{!$Label.Chubb_PleaseTakeMeToChubbPortal}</a>
                            </div>
                        </apex:form>
                    </div>
                </apex:outputPanel>
            </div>
            <script>
                localStorage.setItem('chubbParameter','');
                localStorage.setItem('chubbUserType','0');
                if (Cigna.Util.checkWebView()&&'{!chubbUserType}'!='0') {
                    localStorage.setItem('chubbUserType','{!chubbUserType}');
                    localStorage.setItem('chubbParameter','{!chubbParameter}');
                    if (!{!hasError}) {
                        loginSuccess();
                    }
                }
            </script>
        </div>
    </apex:outputPanel> -->
    <!-- Start of the page template -->
    <apex:composition template="CustomerUnauthorizedPageTemplateNoCache">
        <!-- Start of the main body -->
        <apex:define name="body">
            <!-- ChubbNewFlow_Link_20220512 -->
            <!-- minghua - 20220516 - Registration flow for Chubb -->
            <!-- 20221205 - minghua - JOBR-280, only popup message -->
            <!-- <apex:actionFunction name="chubbReglogin" action="{!login}" reRender="chubbForm"/>
            <apex:inputHidden value="{!isMobile}" id="chubbMobileCheck" />
            <apex:inputHidden value="{!chubbUserType}" id="chubbRegUser" />
            <apex:inputHidden value="{!chubbParameter}" id="chubbRegParameter" /> -->
            <div id="error-msg-area" style="display:none;">
                <span id="cigna-error"><span>
                    <div class="message errorM3" role="alert">
                        <table border="0" cellpadding="0" cellspacing="0" class="messageTable" style="padding:0px;margin:0px;">
                            <tr valign="top">
                                <td class="messageCell">
                                    <div class="messageText">
                                        <div id="msgContent" style="display: inline-block;"></div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </span></span>
            </div>
            <div id="login-input-area" class="bs col-xs-12">
                <div class="bs col-xs-12 col-md-12">
                    <!--<apex:pageMessages id="cigna-error" />-->
                    <!-- this span is the source code when use apex:pageMessages  -->
                    <!-- 20220121-David-timeout message-->
                    <div id ='timeoutmsg' class="message errorM3" style='display: none;margin: 4px 0px;background-color: #fff;opacity: 0.9;'>
                        <span style="color:#cc0000">{!$Label.err_session_timeout}</span>
                    </div>
                    <apex:outputPanel rendered="{!hasError}">
                        <span id="CustomerPortalTemplatePage:cigna-error">
                            <span>
                                <div class="message errorM3" role="alert">
                                    <table border="0" cellpadding="0" cellspacing="0" class="messageTable" style="padding:0px;margin:0px;">
                                        <tbody>
                                            <tr valign="top">
                                                <td><img alt="ERROR" class="msgIcon" src="/s.gif" title="" data-original-title="ERROR" /></td>
                                                <td class="messageCell">
                                                    <div class="messageText">
                                                        <!-- Rancho_Neat_20221129 - escape html tag -->
                                                        <span style="color:#cc0000"><h4>{!$Label.site.error2}</h4></span><apex:outputText escape="false" value="{!errorMessage}" />
                                                        <br />
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </span>
                        </span>
                    </apex:outputPanel>
                </div>
                <!-- Rancho_Neat_20221129 - PS3 -  -->
                <apex:outputPanel rendered="{!!displayConsentPage}">
                <div class="bs form-group col-xs-12 col-md-12">
                    <div id="chubbTest"></div>
                    <apex:inputText value="{!username}" 
                                    id="username" 
                                    html-placeholder="{!$Label.site.email}" 
                                    styleClass="bs form-control" 
                                    html-autocomplete="off" 
                    />
                </div>
                
                <div class="bs form-group col-xs-12 col-md-12">
                    <apex:inputSecret value="{!password}" 
                                      id="password" 
                                      html-placeholder="{!$Label.site.password}" 
                                      styleClass="bs form-control" 
                    />
                    <script>
                        $("input[id$='password']").attr("autocomplete", "off");
                    </script>
                </div>
                <div id="remember-me" class="bs form-group col-xs-12 col-md-12">
                    <p style="margin-top: 10px;">
                         <apex:inputCheckbox styleClass="bs" id="checkbox-remember-me" value="{!rememberUN}"/>
                         <apex:outputLabel styleClass="bs" value="{!$Label.Login_Remember_Me}" for="checkbox-remember-me"/>
                    </p>
                </div>

                <div class="col-xs-12 col-md-12" style="font-size: 1.1em;">
                    <br/>
                    <!-- MRP-264 -->
                    <apex:outputLink value="{!$Label.Customer_Registration_Alert_VFP}?route=reg&lang={!JSINHTMLENCODE($CurrentPage.Parameters.lang)}"> {!$Label.site.register} </apex:outputLink> 
                    <apex:outputLink value="{!$Label.Customer_Registration_Alert_VFP}?route=forgotpassword&lang={!JSINHTMLENCODE($CurrentPage.Parameters.lang)}" styleClass="pull-right"> {!$Label.site.forgot_your_password_q} </apex:outputLink> 
                    <!-- Rancho_Neat_20221129 - PS3 - hide register button for td register flow -->
                    <!-- <apex:outputLink value="{!$Label.Customer_Registration_VFP}?lang={!JSINHTMLENCODE($CurrentPage.Parameters.lang)}" rendered="{!!tdRegistration}"> {!$Label.site.register} </apex:outputLink> 
                    <apex:outputLink value="{!$Label.Customer_ForgotPassword_VFP}?lang={!JSINHTMLENCODE($CurrentPage.Parameters.lang)}" styleClass="pull-right"> {!$Label.site.forgot_your_password_q} </apex:outputLink>  -->
                </div>

                <div class="col-xs-12 col-md-12" style="padding-top:10px; padding-bottom:10px;">
                    <!-- ChubbNewFlow_Link_20220512 -->
                    <!-- 20221205 - minghua - JOBR-280, only popup message, remove rerender chubbForm, oncomplete toggleLoginPageOverlay() -->
                    <!-- Rancho_Neat_20221129 - PS3 - add td register panel -->
                    <apex:commandButton action="{!login}" 
                                        value="{!$Label.site.login}"
                                        id="Login" 
                                        onclick="showLoading();beforeSubmission();" 
                                        rerender="preForm,thePreFormPanel,jqForm,td-regis-area"
                                        oncomplete="finishSubmission();" styleClass="bs btn btn-primary btn-block"
                    />
                    <br/>
                    <br/>
                </div>
                </apex:outputPanel>
                <!--added by Connor for back button for SMT-->
                <div id="back-button" style="display:none;padding-left: 15px;padding-right: 15px;font-size: 1.2em;">
                    <apex:outputLink value="/customer/SMTCustomerLandingVFP?customerKey={!JSINHTMLENCODE($CurrentPage.Parameters.customerKey)}&lang={!JSINHTMLENCODE($CurrentPage.Parameters.lang)}">{!$Label.Previous_Step}</apex:outputLink> 
                </div>
            </div>

            <!-- Rancho_Neat_20221129 - PS3 - health combo campaign consent page -->
            <div id="td-regis-area" class="bs col-xs-12">
                <apex:outputPanel rendered="{!displayConsentPage}">
                <!-- fields -->
                <div class="bs form-group col-xs-12 col-md-12" style="{!IF(isNaFilled, 'display:none;', '')}">
                    <p><h5>{!transField['SMT_Nationality_Label'][$Label.Header_Language_Code_Current]}</h5></p>
                    <apex:selectList value="{!nationality}" size="1" styleClass="form-control">
                        <apex:selectOptions value="{!nationalityList}"></apex:selectOptions>
                    </apex:selectList>
                </div>
                <!-- PS-22 Owen 20230518 check the promote code and enable the mkt checkbox -->
                <div class="bs form-group col-xs-12 col-md-12">
                    <apex:inputText value="{!promoteCode}" id="input-promote-code" html-placeholder="{!transField['Teladoc_Promote_Code_Cus'][$Label.Header_Language_Code_Current]}" styleClass="bs form-control" html-autocomplete="off" onchange="checkPromoteCode();"/>
                </div>

                <!-- declaration -->
                <!-- PS-22 Owen 20230518 Move the 3rd check box message to the 1st,and pre-filled the check box -->
                <!-- Rancho_PS28_20230802 - update marketing wording -->
                <apex:outputPanel rendered="{!displayMktOut}">
                    <div class="form-group col-xs-12 col-md-12">
                        <input id="dontmkt" type="checkbox" class="validate-checkbox" />
                        <label for="dontmkt" class="control-label" style="color:#FFF"><apex:outputText escape="false" value="{!$Label.Teladoc_DM}" /></label>
                        <apex:inputHidden id="marketingOptOut" value="{!marketingOptIn}" />
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!JSINHTMLENCODE($CurrentPage.Parameters.lang) == 'en_US'||JSINHTMLENCODE($CurrentPage.Parameters.lang) ==''}">                   
                    <div class="form-group col-xs-12 col-md-12">
                        <input id="accept" type="checkbox" class="validate-checkbox" />
                        <label for="accept" class="control-label">I agree to Cigna Healthcare’s <span style="cursor:pointer;text-decoration: underline;font-weight: normal;"><a href="{!$Label.PrivacyStatementURL}" target="_blank">Privacy Statement</a></span> and MyCigna’s <span style="cursor:pointer;text-decoration: underline;font-weight: normal;"><a onclick="toggleOverlay();">{!$Label.Terms_And_Conditions}</a></span>.</label>
                        <apex:inputHidden id="acceptTC" value="{!acceptTC}" />
                    </div>
                    <div class="form-group col-xs-12 col-md-12">
                        <input id="acceptTela" type="checkbox" class="validate-checkbox" />
                        <label for="acceptTela" class="control-label">I agree with <a href="{!$Setup.Portal_Settings__c.File_Download_URL__c}{!SMT_Teladoc}" target="_blank"><span style="cursor:pointer;text-decoration: underline;font-weight: normal;">{!$Label.TelaDoc_S} {!$Label.Data_Privacy_Notice} {!$Label.And_Lable} {!$Label.Footer_Terms_Conditions}</span></a>, and authorise Cigna Healthcare to share my personal details to Teladoc.</label>
                        <apex:inputHidden id="acceptDNTC" value="{!acceptDNTC}" />
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!JSINHTMLENCODE($CurrentPage.Parameters.lang) == 'zh_TW'}">                   
                    <div class="form-group col-xs-12 col-md-12">
                        <input id="acceptZh" type="checkbox" class="validate-checkbox" />
                        <label for="acceptZh" class="control-label">我同意信諾環球的<span style="cursor:pointer;text-decoration: underline;font-weight: normal;"><a href="{!$Label.PrivacyStatementURL}" target="_blank">私隱聲明</a></span>和MyCigna的<span style="cursor:pointer;text-decoration: underline;font-weight: normal;" class="control-label"><a onclick="toggleOverlay();">{!$Label.Terms_And_Conditions}</a></span>。</label>
                        <apex:inputHidden id="acceptTCZh" value="{!acceptTC}" />
                    </div>
                    <div class="form-group col-xs-12 col-md-12">
                        <input id="acceptTelaZh" type="checkbox" class="validate-checkbox" />
                        <label for="acceptTelaZh" class="control-label">我同意<a href="{!$Setup.Portal_Settings__c.File_Download_URL__c}{!SMT_Teladoc_TC}" target="_blank"><span style="cursor:pointer;text-decoration: underline;font-weight: normal;">Teladoc的私隱聲明及{!$Label.Footer_Terms_Conditions}</span></a>及授權信諾環球提供我的個人資料予Teladoc。</label>
                        <apex:inputHidden id="acceptDNTCZh" value="{!acceptDNTC}" />
                    </div>
                </apex:outputPanel>
                
                <!-- buttons -->
                <div class="form-group col-xs-12 col-md-12">
                    <br/>                 
                    <apex:commandButton action="{!telaDocLogin}" 
                                        value="{!$Label.Submit}" 
                                        id="submit" 
                                        onclick="showTDLoading();beforeSubmission();"
                                        rerender="preForm,thePreFormPanel,jqForm"
                                        oncomplete="redirectCignaPage();finishSubmission();"
                                        styleClass="bs btn btn-primary btn-block"
                    />
                </div>
                </apex:outputPanel>

                <script>
                    // user need to accept policy to submit
                    function submitDisplay(){
                        if (($("[id$='accept']").is(':checked') && $("[id$='acceptTela']").is(':checked'))
                            || ($("[id$='acceptZh']").is(':checked') && $("[id$='acceptTelaZh']").is(':checked'))) {
                            $("[id$='submit']").prop('disabled', false);
                        }else{
                            $("[id$='submit']").prop('disabled', true);
                        }
                    }
                    $( ".validate-checkbox" ).off( "click" ).on( "click", submitDisplay );
                    
                    // set value when click
                    $(".validate-checkbox").click(function(){
                        console.log('id:'+$(this).attr('id'));
                        if($(this).is(':checked')){
                            $(this).parent().children('input[type="hidden"]').val(true);
                        }else{
                            $(this).parent().children('input[type="hidden"]').val(false);
                        }
                    });
                    
                    // set value when page refreshed
                    $(".validate-checkbox").each(function(){
                        console.log('id:' + $(this).attr('id'));
                        var isChecked = $(this).parent().children('input[type="hidden"]').val();
                        if(isChecked == 'true'){
                            $(this).attr("checked", "checked");
                        }
                    });

                    // enable/disable button when page refreshed
                    submitDisplay();
                    //PS-22 Owen 20230518 check the promote code and enable the mkt checkbox
                    function checkPromoteCode(){
                        var valueClick = $('input[id$="dontmkt"]').parent().children('input[type="hidden"]').val();
                        if(valueClick == 'false'){
                            $('input[id$="dontmkt"]').click();
                        }
                        var value=$('input[id$="input-promote-code"]').val().substring(0,1);
                        //console.log('value' + value);
                        if(value=='P'){
                            $('input[id$="dontmkt"]').removeAttr("disabled");
                        }else{
                            $('input[id$="dontmkt"]').attr("disabled","disabled");
                        }
                    }

                    // Rancho_PS28_20230802 - update marketing wording
                    $(".cigna-pics").click(function(){
                        let url = '';
                        if ("{!$Label.Header_Language_Code}" == 'zh_TW') {
                            url = "{!PersonalInformationCollectionStatement_chi}";
                        }else{
                            url = "{!PersonalInformationCollectionStatement_eng}";
                        }
                        window.open(url, "_blank");
                    });
                </script>

                <!-- Start Special Centered Box -->
                <div id="overlay" style="display:none;">
                    <div id="specialBox">
                        <a href="#" style="color:#337ab7 !important;"><div id="closeOverlay" class="glyphicon glyphicon-remove" onclick="toggleOverlay();"></div></a>
                        <h4>{!$Label.Terms_and_Conditions}</h4>
                        <div style="padding-bottom:10px; border-top: 1px solid #f2f2f2;"></div>
                        <div id="tccontent">
                            <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'zh_TW'}">
                                <div id="reallocationtccontent" style="text-align:left">
                                    <b>Terms and Conditions for Internet Services</b><br/><br/>
                                    <b>1.  Application and Service</b><br/><br/>1.1 These Terms and Conditions shall, unless otherwise determined by Cigna, apply to all services provided by Cigna to you via Internet from time to time ("Services").<br/><br/>1.2 Cigna shall be entitled from time to time to impose any limit whether in transaction amount, operating procedures or otherwise on the use of any Services and such limit shall be determined by Cigna at its discretion.<br/><br/>
                                    <b>2.  Registration</b><br/><br/>2.1 You warrant that all information provided by you to Cigna is provided voluntarily and that such information is true, correct and complete in all respects. You have to inform us forthwith if there is any change of your information.<br/><br/>
                                    <b>3.  Instruction</b><br/><br/>3.1  Cigna will rely upon and act in accordance with instructions given to us through Internet in connection with any Services offered to you if the person giving the instruction can quote your Username and Password.<br/><br/>3.2 Cigna shall not be under any duty to verify the identity of the person sending instructions on your behalf. Any translation or Services effected pursuant to such instructions referred to in paragraph 3.1 above shall be binding upon you whether the instructions were made with or without your authority, knowledge or consent.<br/><br/>3.3 Cigna may refuse to accept any instruction upon such grounds as we deem fit.<br/><br/>3.4 Any transaction effected pursuant to an instruction given to Cigna may be considered concluded only if Cigna has confirmed the same to you.<br/><br/>3.5 You undertake to: (a) keep your PIN, Username and Password secret and safe; and (b) inform Cigna as soon as reasonably practicable if you know or suspect that, any unauthorized person knows your PIN, Username or Password.<br/><br/>3.6 You shall hold Cigna harmless and indemnify Cigna against all actions, proceedings, demands, claims, liabilities, damages, losses, costs and expenses howsoever arising, directly or indirectly, out of the Services or transactions effected in accordance with any instruction referred to in paragraph 3.1 above. This indemnity shall continue notwithstanding any maturity or expiry or termination of your policy(ies).<br/><br/>
                                    <b>4.  Warranties</b><br/><br/>4.1 You warrant to Cigna that:<br/><br/>  (a) You shall not gain access to any Services in any country or jurisdiction where the offering of the same by Cigna is not lawful or where these Terms and Conditions may not be enforceable by us against you. If you access this site from outside Hong Kong, you do so on your own responsibility and are responsible for ensuring compliance with all laws in the place where you are located.<br/><br/>  (b) You shall not, and shall not attempt to, reverse engineer, decompose, disassemble or otherwise tamper with any software relating to any Services.<br/><br/>  (c) You shall ensure that the browser cache memory shall be cleared as soon as you logout each time after having gained access to any Services through use of computer and you shall exit the browser immediately after each use of any Services through use of computer.<br/><br/>
                                    <b>5.  Disclaimers</b><br/><br/>5.1 Owing to unpredictable traffic congestion, openness and public nature of the Internet and other reasons, the Internet may not be a reliable medium of communication and that such unreliability is beyond the control of Cigna. This may subject transactions to delays in transmission, incorrect data transmission, delays in execution, misunderstanding and errors in any communication between Cigna and you, transmission blackouts, interruptions and so on.<br/><br/>5.2 Cigna cannot and does not guarantee or warrant that files available for downloading from this site are free of viruses, worms, Trojan horses or other code that has contaminating or destructive properties. Cigna shall assume no responsibility, and shall not be liable for, any damages to, or viruses that may infect, your computer equipment or other property as a result of your access to, use of, or browsing in this website or your downloading of any materials, data, text, images, video or audio from this website.<br/><br/>5.3 This website may be linked to other websites which are not maintained by Cigna. Cigna shall not be responsible for the contents of those websites. The inclusion of any link to such websites does not imply approval of or endorsement by Cigna of the website or the contents thereof.<br/><br/>5.4 You agree by accessing this website that to the fullest extent permitted by law, under no circumstances or any theories of liability under international or civil, common or statutory law including but not limited to strict liability, negligence or other tort theories or contract, patent or copyright laws, will Cigna be liable for damages of any kind occurring from the use of this website or any information or services obtained on this website including direct, indirect, consequential, incidental, or punitive damages (even if Cigna has been advised of the possibility of such damages), to the fullest extent permitted by law.<br/><br/>
                                    
                                    <b>6.  Your Personal Information</b><br/><br/>6.1 You agree that Cigna may use and/or disclose your personal information in accordance with :<br/><br/>  (a) <a href="{!$Label.PrivacyStatementURL}" target="_blank" style="text-decoration: underline;color:#337ab7 !important;">Privacy Statement of Cigna</a> (as may be amended from time to time) which is posted on MyCigna.com.hk; and<br/><br/>  (b) <a href="{!PersonalInformationCollectionStatement_eng}" target="_blank" style="text-decoration: underline;color:#337ab7 !important;">Cigna's Personal Information Collection Statement</a> issued from time to time.<br/><br/>
                                    <b>7.  Information on this Website</b><br/><br/>7.1 Any transaction effected by you through use of any Services shall be made solely upon exercise of your own judgment and at your own discretion notwithstanding any information, suggestion or documents Cigna may have provided to you.<br/><br/>7.2 Any information, suggestion or recommendation communicated to you by Cigna is based on information obtained from sources believed by Cigna to be reliable, are for your own use and consideration only and will not constitute an offer to sell any investment to you.<br/><br/>7.3 Cigna shall not be liable for any inaccuracy or incompleteness of any information provided by Cigna or the performance or outcome of any transactions effected by you after receipt of such information.<br/><br/>7.4 Any price of funds or other similar information quoted to you is for your reference only and shall not be binding on Cigna unless confirmed by Cigna for a transaction.<br/><br/>
                                    <b>8.  Trademarks and Copyright</b><br/><br/>8.1 There are references throughout this website to various trademarks or service marks and these, whether registered or not, are the property of their respective owners. Images displayed on this website are the property of their respective owners.<br/><br/>8.2 Nothing contained on this website should be construed as granting, by implication, estoppel, or otherwise, any license or right to use any trademark or images displayed on this website without the written permission of the owners.<br/><br/>8.3 No materials or contents (including the text, images, audio and video) from this website may be copied, reproduced, republished, uploaded, posted, transmitted or distributed in any way without our permission.<br/><br/>
                                    <b>9.  Amendments</b><br/><br/>9.1 Cigna may at any time delete, replace, add or change any term of these Terms and Conditions. You are advised to read these Terms and Conditions from time to time before utilizing any Services through Internet. You are deemed to have accepted and agreed to be bound by these Terms and Conditions and its revisions (if any) upon your utilizing any Services on this website.<br/><br/>9.2 Cigna may at any time introduce any new Services or delete any existing Services without prior notice.<br/><br/>
                                    <b>10.  Governing Law and Prevailing Language</b><br/><br/>10.1 These Terms and Conditions shall be governed by and construed in accordance with the laws of the Hong Kong Special Administrative Region.<br/><br/>10.2 The English version of these Terms and Conditions shall prevail, if there is any inconsistency between the English and the Chinese versions.<br/><br/>
                                    <b>Privacy Statement</b><br/><br/>PLEASE READ CAREFULLY.<br/><br/>We know that when you visit us at MyCigna.com.hk, you depend on us to be as diligent about protecting your privacy on-line as we've always been in our more traditional interactions with you. We also know that you rely on us to provide products and services that meet each of your unique needs. To do both, we need to gather and protect certain information about you.<br/><br/>
                                    <b>What kind of information does MyCigna.com.hk collect?</b><br/><br/>We've designed our Web site to capture two types of information: automatic tracking and individualized. The first allows us to see which topics interest you most; the second helps us service your accounts.<br/><br/>Automatic tracking information is gathered by following your "footsteps" through MyCigna.com.hk. The route you and other visitors choose tells us a little something about the people who visit our site. We use aggregate numbers to compile statistics, monitor trends and track site usage. We also use the information to make sure our technology is compatible with yours. We're then better able to offer products and services that match your needs.<br/><br/>Individualized information can be anything you've provided to MyCigna.com.hk that identifies you or your accounts. For example: Your name, identity card number, birth date, address and names of your dependents are types of individualized information. We use this information to service your accounts. It's our policy to send and receive individualized information through encrypted channels only.<br/><br/>To use our secure services, "cookies" must be enabled. Cookies are small pieces of software that remain activated during your session in a secure area, then are deactivated when you log off.<br/><br/>
                                    <b>What do you do with the information you collect about me?</b><br/><br/>We will not sell, rent or license your individualized information furnished by you to MyCigna.com.hk unless you authorize it. But we may need to use and/or transfer it within the Cigna family or to affiliate companies or with a third party vendor, within or outside Hong Kong, to perform administrative, technical, hosting, marketing or other functions that help us manage the site while providing service to you. Our third party vendors subscribe to the same privacy practices as MyCigna.com.hk.<br/><br/>Except as noted above, we will not release individualized information to any other party unless required to do so by government authorities or legal process or as otherwise permitted by law.<br/><br/>We will retain individualized information for a period necessary to attain the specified purposes.<br/><br/>
                                    <b>What if I need to correct or remove information about me?</b><br/><br/>You can contact our Privacy Data Protection Officer (Address: {!$Label.Cigna_Address_en}) by mail. Please do not e-mail individualized information unless you do so through a secure channel. We have a policy that prohibits us from communicating individualized information through non-secure e-mail.<br/><br/>
                                    <b>What if I don't want you to collect, use and distribute my information?</b><br/><br/>If you don't want MyCigna.com.hk to collect, use and distribute information about you, there are always traditional means of communication available to you. Simply pick up the phone or send your questions, comments and specific information by regular mail.<br/><br/>
                                    <b>About e-mail</b><br/><br/>From time to time we may send informational, educational or promotional materials to you at the e-mail address you've provided.<br/><br/>Please remember that e-mail messages can be viewed by other Internet users while in transit. If you have individualized information to communicate, please contact your local customer service representative or e-mail us a request for your customer service representative to contact you.<br/><br/>
                                    <b>How secure is MyCigna.com.hk?</b><br/><br/>Your individualized information at MyCigna.com.hk is protected from unauthorized access by a secure firewall and security infrastructure. When information is received, we employ extensive physical, electronic and procedural safeguards to maintain the security of your information. MyCigna.com.hk also conducts periodic reviews of its Web security to ensure that our electronic security safeguards remain up-to-date and effective.<br/><br/>
                                    <b>What about the links on your site? Are they secure?</b><br/><br/>Because we don't own or control all the sites linked from MyCigna.com.hk, we can't guarantee they're secure; therefore, we can not assume responsibility for all their privacy practices. If you enroll with a company that is not affiliated with MyCigna.com.hk or any Cigna company, we urge you to review the privacy policies of any of the Web sites you visit once you leave MyCigna.com.hk.<br/><br/>
                                    <b>I'm not a Hong Kong customer. How do I fit into your privacy policies?</b><br/><br/>Your continued use of MyCigna.com.hk from places or countries other than Hong Kong means that you are giving your consent to have your individualized information processed outside those places or countries in accordance with the protection described in this Privacy Statement.<br/><br/>
                                    <b>I've switched my coverage to another company. What will you do with my information?</b><br/><br/>We will continue to treat your individualized information with the same confidentiality and respect we extend to all our valuable customers.<br/><br/>
                                    <b>Why is this Privacy Statement important to me?</b><br/><br/>Your visit to MyCigna.com.hk and any dispute over privacy is subject to this Statement, <a href="{!PersonalInformationCollectionStatement_eng}" target="_blank" style="text-decoration: underline;color:#337ab7 !important;">Personal Information Collection Statement of Cigna Hong Kong</a> and our Legal Disclaimers/Conditions of Use including limitations of damages and the application of the laws of Hong Kong and exclusive jurisdiction of the courts of Hong Kong.<br/><br/>This statement is applicable only to information collected from you during your visit to MyCigna.com.hk. We will display a prominent notice on the MyCigna.com.hk home page whenever this Privacy Statement is updated or changed and you should check our Privacy Statement periodically. By choosing to continue usage of MyCigna.com.hk, you agree to the terms of the Privacy Statement.<br/><br/>If you have any questions of comments concerning this Statement, please contact us by postal mail at:<br/><br/><apex:outputText escape="false" value="{!$Label.Cigna_Address_en_2_line}"/><br/><br/><br/><br/>Last Updated: 31 Oct 2008
                                </div>
                            </apex:outputPanel>
                            <apex:outputPanel rendered="{!$Label.Header_Language_Code == 'en_US'}">
                                <div id="reallocationtccontent" style="text-align:left">
                                    <b>網上服務的條款及細則</b><br/><br/>
                                    <b>1.  使用與服務</b><br/><br/>1.1 除信諾另行決定外，此條款及細則適用於信諾不時於互聯網上提供予閣下之所有服務 (“服務”)。<br/><br/>1.2 信諾有權不時就交易金額、操作程式或在使用任何服務之細節加上任何限額或限制。信諾有酌情決定權對此等限額或限制作出更改。<br/><br/>
                                    <b>2.  註冊</b><br/><br/>2.1 閣下保證向信諾提供的所有資料均為自願，而有關資料在任何方面均為真實、正確及完整。閣下的資料如有任何改變，必須立即通知信諾。<br/><br/>
                                    <b>3.  指示</b><br/><br/>3.1 若任何人士通過互聯網給與信諾指示，並可提供閣下的用户名稱和密碼，信諾將根據並遵照該指示進行交易或提供服務給與閣下。<br/><br/>3.2 信諾將不會有任何責任核實於互聯網上以閣下名義給與信諾指示的人士的身分。根據上述第3.1條所給與信諾的指示所進行之交易或提供之服務，閣下無論是否知情、同意或已授權，將須要負上責任。<br/><br/>3.3 信諾可在其認為適當之情況下拒絕接納任何指示。<br/><br/>3.4 所有根據向信諾發出的指示所進行之交易，需由信諾向閣下確認後方視為完成交易。<br/><br/>3.5 閣下承諾：(a)確保閣下之個人識別碼、用户名稱和密碼保持機密及妥善保存；(b)若閣下得悉或懷疑有任何未獲授權之人士知悉閣下之個人識別碼、用户名稱或密碼，會於情況許可下盡快通知信諾。<br/><br/>3.6 對於信諾因應根據上述第3.1條所給與的指示所進行之交易或提供之服務，直接或間接地招致之一切申索、訴訟、要求、賠償、責任、損害、損失、費用和支出（不論其招致原因），閣下無條件及不可撤回地同意賠償信諾及使信諾免受損害。不論閣下的保單是否已屆成熟或期滿或終止，此彌償保證將繼續生效。<br/><br/>
                                    <b>4.  保證</b><br/><br/>4.1 閣下向信諾保證如下：<br/><br/>  (a) 閣下不會在任何禁止信諾提供有關服務或交易或對此條款及細則沒有法律效用的國家或司法管轄區使用任何服務。若閣下在香港以外的地方進入此網站，閣下須自行負上責任，確保遵從有關地方之法律；<br/><br/>  (b) 閣下不會及不會試圖就與任何服務相關的電腦軟件進行還原工程、分拆或其他類型的干擾；<br/><br/>  (c) 閣下承諾確保每次透過電腦使用完任何服務後盡快登出、關閉瀏覽器並把瀏覽器的記憶體內之資料清除。<br/><br/>
                                    <b>5.  免責聲明</b><br/><br/>5.1 閣下明白到互聯網可能因為未能預測的擠塞、其開放和公開性質、和其他原因，導致互聯網未必是可靠的通訊媒介，而這種不可靠是在信諾可控制範圍之外。這些因素可導致交易傳送延誤、錯誤資料傳送、延誤執行指示、或閣下與信諾溝通上的誤解和錯誤等等。<br/><br/>5.2 信諾不能並不會擔保或保證在本網站以供下載的檔案，沒有受到病毒感染或存有受感染或破壞性物質。信諾不會就閣下連接、使用或瀏覽本網站、或由本網站下載任何資料、數據、文字、影像、視像或音效而對閣下的電腦設備或其他財產造成的損害或受病毒的影響而負上任何責任。<br/><br/>5.3 本網站可能會被接駁至不屬於信諾所運作的其他網站。信諾不會就此等網站的內容負上責任。接駁至此等網站並不代表信諾已批核或贊同此等網站或其內容。<br/><br/>5.4 閣下進入本網站，即表示閣下同意：在法律許可的最大範圍內，在任何情況下或根據國際法、民事法、普通法或法定規定下的任何法律責任理論（包括但不限於嚴格法律責任、疏忽或其他侵權法理論或合約法、專利法或版權法）信諾均不就以下損害賠償負責：因使用本網站或在本網站上取得的任何資訊或服務發生的任何類別損害賠償，包括直接的、間接的、相應的、附帶的或懲罰性的損害賠償（即使信諾已獲悉可能有該等損害賠償）。<br/><br/>
                                    
                                    <b>6.  個人資料</b><br/><br/>6.1 閣下同意信諾可按照下列文件中的規定，使用及/或透露閣下的個人資料：<br/><br/>  (a) 張貼在MyCigna.com.hk的<a href="{!$Label.PrivacyStatementURL}" target="_blank" style="text-decoration: underline;color:#337ab7 !important;">信諾的隱私聲明</a>（可作不定時之修正）;和<br/><br/>  (b) 信諾不時發出的<a href="{!PersonalInformationCollectionStatement_chi}" target="_blank" style="text-decoration: underline;color:#337ab7 !important;">個人資料收集聲明</a>。<br/><br/>
                                    <b>7.  本網站中的資料</b><br/><br/>7.1 儘管信諾向閣下提供任何資料、建議或文件，然而閣下完全明白閣下通過使用任何服務所進行的任何交易純粹按照閣下個人之判斷及酌情決定權所進行。<br/><br/>7.2 信諾傳達给閣下之任何資料或建議均源於信諾認為可靠的資料來源，並只供閣下使用及考慮，而不構成向閣下邀約出售任何投資。<br/><br/>7.3 閣下同意信諾毋須就信諾提供任何不準確或不全面的資料，或在收到該等資料後閣下進行任何交易的表現或結果而負上責任。<br/><br/>7.4 信諾提供給與閣下有關的基金價格或其他類似的資料只供閣下參考，除非信諾確認交易，信諾不會受此約束。<br/><br/>
                                    <b>8.  商標和版權 </b><br/><br/>8.1 本網站中所提述的各個商標或服務商標（不論是否已註冊），均屬於其各有關擁有人的財產。本網站中所顯示的圖像均屬其各有關擁有人的財產。<br/><br/>8.2 本網站所載任何內容均不應詮釋為批予閣下，無論是暗示、不容反悔或其他形式之任何特許或權利，在未得有關擁有人的書面批准的情况下，以使用本網站上顯示的任何商標或圖像。<br/><br/>8.3 在未得到信諾准許的情況下，閣下不得將此網站所載的資料及內容(包括文字、影像、音效及視像)以任何方式複印、複製、出版、上載、刊登、傳送或發放。<br/><br/>
                                    <b>9.  修訂 </b><br/><br/>9.1 信諾可在任何時間刪除、替換、添加或更改此條款及細則。在利用及使用任何服務之前，信諾建議閣下先閱讀此條款及細則。當在此網站上使用任何服務，閣下將會被視作已接受並同意接受此條款及細則及其修訂（如有的話）。<br/><br/>9.2 信諾可在任何時候提出任何新的服務或刪除任何現有的服務，毋須事先通知。<br/><br/>
                                    <b>10.  管轄法律和語言</b><br/><br/>10.1 此條款及細則均受香港特別行政區之法律所管治及據其解釋。<br/><br/>10.2 此條款及細則以英文版為準。<br/><br/>
                                    <b>私隱聲明</b><br/><br/>請詳細閱讀<br/><br/>
                                    <b>MyCigna.com.hk 收集哪一類資料?</b><br/><br/>本網站的設計是供本公司收集兩類資料：網站自行追測及紀錄和客戶自行提供的資料。第一類資料讓本公司瞭解閣下最感興趣的項目，第二類資料則讓本公司為閣下提供服務。<br/><br/>網站自行追測及紀錄的資料是根據閣下在 MyCigna.com.hk 瀏覽的「路徑」所收集的。根據閣下及其他人士的瀏覽路線，讓本公司了解多一些關於網站瀏覽人士的資料：本公司將以結合的數據進行統計、監察網站的趨勢及使用量。同時亦會使用這些資料以確保本公司的技術水平、產品及服務能配合閣下的需要。<br/><br/>客戶自行提供的資料指閣下提供予 MyCigna.com.hk 的所有資料，以證明閣下或閣下的賬戶，例如閣下的名字、身份証號碼、出生日期、地址、閣下家屬的姓名及其他的個人資料。本公司將利用這些資料為閣下提供服務。本公司的策略是透過加密保安系統傳送及收集個人資料。<br/><br/>在使用本公司的保安服務時，必須啟動「曲奇檔案」( Cookies )。曲奇檔案是微型的軟件，當閣下進入本公司保安地帶時，它便會啟動，而當閣下離開時，它便會停止運作。<br/><br/>
                                    <b>貴公司會如何處理向本人收集的資料?</b><br/><br/>本公司不會將閣下的資料以售賣、租借或授權方式發放給其他人。本公司可能進行行政、技術、主機租賃、市場推廣或其他工作時使用及/或傳送資料予信諾的聯營或分公司或第三者(在香港境內或境外)以助管理網站及為閣下提供服務。第三者亦需同時遵守 MyCigna.com.hk 的私隱聲明。<br/><br/>除上述外，本公司不會向其他人透露閣下的個人資料，唯在政府機構或法律程序或法律容許的情況下則例外。<br/><br/>本公司將保留有關的個人資料一段時間以作特定用途。<br/><br/>
                                    <b>若想更改或刪除本人的資料，應怎樣做?</b><br/><br/>閣下可以郵寄方式聯絡本公司的個人資料保護主任（地址：{!$Label.Cigna_Address_zh})。請勿以電郵方式傳送個人資料，唯透過保安渠道則例外。本公司的政策是禁止所有透過非安全的渠道傳送個人資料。<br/><br/>
                                    <b>若本人不欲貴公司收集、使用及派發本人的資料，應怎樣做？</b><br/><br/>若閣下不欲 MyCigna.com.hk 收集、使用及派發閣下的資料，閣下仍可選擇傳統的通訊途徑。閣下可致電或以郵寄方式傳送您的問題、意見或特別資料予本公司。<br/><br/>
                                    <b>關於電子郵件。</b><br/><br/>本公司將不定期傳送一些資料性、教育性或推廣性的資料至閣下的電郵地址。<br/><br/>注意，電郵所載的訊息在傳送過程中可能被其他網站用戶看到。閣下需要傳送個人資料，請聯絡閣下所在地的客戶服務代表，或以電郵方式通知本公司，以便安排客戶服務代表與閣下聯絡。<br/><br/>
                                    <b>MyCigna.com.hk 的保安程度如何？</b><br/><br/>由於本公司不能擁有或控制所有連結到 MyCigna.com.hk 的網站，我們不能保證那些網站是否安全，亦不能為它們私隱操守負上責任。若閣下所參與的公司並非 MyCigna.com.hk 的聯營公司，本公司謹此忠告閣下在離開 MyCigna.com.hk 後，必先細閱該網站的的私隱聲明。<br/><br/>
                                    <b>關於貴公司網站的連結，是否安全？</b><br/><br/>由於本公司不能擁有或控制所有連結到 MyCigna.com.hk 的網站，我們不能保證那些網站是否安全，亦不能為它們私隱操守負上責任。若閣下所參與的公司並非 MyCigna.com.hk 的聯營公司，本公司謹此忠告閣下在離開 MyCigna.com.hk 後，必先細閱該網站的的私隱聲明。<br/><br/>
                                    <b>本人並非香港人／客戶，如何配合貴公司的私隱政策？</b><br/><br/>若閣下於香港以外地方／國家繼續使用 MyCigna.com.hk ，表示閣下已根據私隱聲明條款同意閣下的個人資料在其他地方和國家被處理。<br/><br/>
                                    <b>本人的保險保障已經轉往另一間公司，貴公司將如何處理本人的個人資料？</b><br/><br/>我們將繼續以保密方式處理及尊重閣下的個人資料。<br/><br/>
                                    <b>為什麼私隱聲明對本人如此重要？</b><br/><br/>閣下瀏覽 MyCigna.com.hk時，任何有關私隱的爭拗均受私隱聲明、<a href="{!PersonalInformationCollectionStatement_chi}" target="_blank" style="text-decoration: underline;color:#337ab7 !important;">信諾香港的個人資料收集聲明</a>及本公司法律卸責聲明／使用條件限制，包括有限制的破壞及香港法律使用及專有司法權。<br/><br/>此私隱聲明只適用於當閣下瀏覽 MyCigna.com.hk 時收集的個人資料。當私隱聲明被更新或更改時，本公司將於 MyCigna.com.hk 當眼之處展示有關通知。閣下亦須定期查閱私隱聲明，當閣下選擇繼續使用 MyCigna.com.hk ，即代表同意此私隱聲明的條款。<br/><br/>如閣下有任何關於私隱聲明的問題或意見，請以郵寄方式聯絡我們：<br/><br/>{!$Label.Cigna_Address_zh}<br/><br/>多謝閣下閱讀此私隱聲明。<br/><br/><br/><br/>更新日期：2008年10月31日
                                </div>
                            </apex:outputPanel>
                        </div>
                    </div>
                </div>
                <!-- End Special Centered Box -->
            </div>

            <div id="app-reminder" class="col-xs-12 col-md-12" 
                style="padding-left: 30px;
                padding-right: 30px;
                font-size: 1.2em;display:none" >
                <div class="col-xs-12 col-md-12" 
                style="background-color: rgba(0, 0, 0, 0.3);padding: 10px 10px 10px 10px;" >
                {!$Label.Login_Reminder}
                </div>
            </div>
        </apex:define>
        <!-- End of the main body -->
    </apex:composition>
    <!-- End of the page template -->

    <script>
        // execute only once except the page is refreshed manually
        if(navigator && navigator.cookieEnabled){
            if(getCookie() != null && getCookie() != ''){
                $("input[id$='username']").val(getCookie());
                $("input[id$='checkbox-remember-me']").attr("checked", true);
            }
        }

        // ChubbNewFlow_Link_20220512
        // 20221205 - minghua - JOBR-280, only popup message
        // localStorage.setItem('chubbUserType','0');
        // if (Cigna.Util.checkWebView()) {
        //     // $("input[id$='chubbMobileLoginCheck']").val(true);
        //     $("input[id$='chubbMobileCheck']").val(true);
        // }

    </script>
</apex:page>