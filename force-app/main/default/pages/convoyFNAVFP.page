<apex:page docType="html-5.0" sidebar="false" showHeader="true" title="FNA e-Sales"  controller="ConvoyFNACtrl" action="{!createTransactionWithConvoyInfor}">
<head>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
    <!-- <apex:include pageName="CignaBrokerCommonCSS" /> -->
    <!-- <apex:include pageName="CignaCommonCSS" /> -->
    <style type="text/css">
          .loadEffect{
              width: 100px;
              height: 100px;
              position: relative;
              margin: 0 auto;
              margin-top:100px;
          }
          .loadEffect span{
              display: inline-block;
              width: 16px;
              height: 16px;
              border-radius: 50%;
              background: lightgreen;
              position: absolute;
              -webkit-animation: load 1.04s ease infinite;
          }
          @-webkit-keyframes load{
              0%{
                  opacity: 1;
              }
              100%{
                  opacity: 0.2;
              }
          }
          .loadEffect span:nth-child(1){
              left: 0;
              top: 50%;
              margin-top:-8px;
              -webkit-animation-delay:0.13s;
          }
          .loadEffect span:nth-child(2){
              left: 14px;
              top: 14px;
              -webkit-animation-delay:0.26s;
          }
          .loadEffect span:nth-child(3){
              left: 50%;
              top: 0;
              margin-left: -8px;
              -webkit-animation-delay:0.39s;
          }
          .loadEffect span:nth-child(4){
              top: 14px;
              right:14px;
              -webkit-animation-delay:0.52s;
          }
          .loadEffect span:nth-child(5){
              right: 0;
              top: 50%;
              margin-top:-8px;
              -webkit-animation-delay:0.65s;
          }
          .loadEffect span:nth-child(6){
              right: 14px;
              bottom:14px;
              -webkit-animation-delay:0.78s;
          }
          .loadEffect span:nth-child(7){
              bottom: 0;
              left: 50%;
              margin-left: -8px;
              -webkit-animation-delay:0.91s;
          }
          .loadEffect span:nth-child(8){
              bottom: 14px;
              left: 14px;
              -webkit-animation-delay:1.04s;
          }
        </style>
</head>

    <!--common css, bootstrap, jquery libraries-->
    <apex:define name="additionalLibraries">
        <!-- Bootstrap Core CSS -->
        <script type="text/javascript" src="{!URLFOR($Resource.DD_Demo, 'js/jquery.min.js')}"></script>
        
        <apex:include pageName="CignaUtilJS"/> 
    </apex:define>

    <apex:pageMessages id="errorMessage" />
    <div class="loadEffect" id="main_loading">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
    <apex:form id="form">
      <input id="current-product-code" type="hidden" value="{!selectedProductCode}" />
      <input id="esalesId" type="hidden" value="{!esalesId}" />
      <input id="loadFlag" type="hidden" value="{!loadFlag}" />
      <apex:inputhidden value="{!hasPermission}" id="hasPermission" />
    </apex:form>
    <script>
      // document.onreadystatechange  = completeLoading;
      function completeLoading() {
        if (document.readyState =="complete") {
          document.getElementById('main_loading').style.display="none";
        }
        else{
          document.getElementById('main_loading').style.display="block";
        }
      }
      $(document).ready(function(){
          var selectedCode = $('#current-product-code').val();
          var esalesId = $('#esalesId').val();
          var loadFlag = $('#loadFlag').val();
          var hasPermission = $('input[type="hidden"][id$="hasPermission"]').val();

          if (Cigna.Util.isBrokerPortal() && hasPermission === 'true') {
            if(selectedCode == 'LHB'){
              Cigna.Util.navigateToVFP("GroupProductQuotationVFP?plan=" + selectedCode + "&Category=", null, null, true);
            }
            else if(selectedCode == 'PBT'){
              Cigna.Util.navigateToVFP("PortableGetQuoteVFP?plan=" + selectedCode + "&Category=&esalesFNAId="+ esalesId, null, null, true);                  
            }else  if(selectedCode == 'PBC'){
              Cigna.Util.navigateToVFP("PortableConversionGetQuoteVFP?plan=" + selectedCode + "&Category=&esalesFNAId="+ esalesId, null, null, true);                  
            }else if(selectedCode == 'VHIS'){
              Cigna.Util.navigateToVFP("GenericGetQuoteVFP?plan=" + selectedCode + "&Category=&esalesFNAId="+ esalesId, null, null, true);   
            }else{
              Cigna.Util.navigateToVFP("GetQuoteVFP?plan=" + selectedCode + "&Category=&esalesFNAId="+ esalesId, null, null, true);
            }
          }

          if (loadFlag == 'false') {
            document.getElementById('main_loading').style.display="none";
          }
        });
    </script>
</apex:page>